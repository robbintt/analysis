# Herb.jl: A Unifying Program Synthesis Library

*Tilman Hinnerichs; Reuben Gardos Reid; Jaap de Jong; Bart Swinkels; Pamela Wochner; Nicolae Filat; Tudor Magurescu; Issa Hanou; Sebastijan Dumancic*

---

## ðŸ“‘ Quick Facts

| Metric | Details |
| :--- | :--- |
| **Quality Score** | 7/10 |
| **References** | 15 Citations |
| **Language** | Julia |
| **Core Innovation** | Modular Architecture & Uniform Trees |
| **Key Benefit** | Code Reusability & Reduced Complexity |

---

## ðŸ“‹ Executive Summary

Program synthesis research is currently stifled by fragmentation and low usability. Existing tools are largely monolithic, forcing researchers to rely on duplicated, ad-hoc implementations of fundamental components. This lack of standardization creates a prohibitive barrier to entry; extending search strategies or modifying constraint handling often requires rewriting substantial portions of the codebase, hindering the reuse of methods, integration of algorithms, and reproduction of results across the field.

The authors introduce **Herb.jl**, an open-source library written in Julia that modularizes program synthesis algorithms to address these bottlenecks. The architecture decomposes synthesis into independent, interchangeable sub-compartments: HerbCore (interfaces), HerbSpecification (problem definitions), HerbGrammar (syntax), HerbInterpret (semantics), HerbConstraints (space pruning), and HerbSearch (enumeration strategies). A central technical contribution is the **Uniform Tree** data structure, which optimizes the representation of Abstract Syntax Trees (ASTs), Holes, and Partial Programs. This design leverages Juliaâ€™s multiple dispatch to strictly separate syntax from semantics while maintaining solver-managed search iterators.

Quantitative evaluation confirms the libraryâ€™s efficiency and usability. In re-implementing state-of-the-art synthesizers, Herb.jl achieved a dramatic reduction in code complexity:

*   **Probe:** Reduced from ~580 lines (Python) to 160 lines (Julia).
*   **FrAngel:** Reduced from ~650 lines (C++) to 130 lines (Julia).
*   **Neo:** Reduced from ~900 lines to <200 lines (Julia).

Technical benchmarks further demonstrated that the Uniform Tree structure significantly lowers memory overhead and enables more efficient constraint propagation compared to arbitrary AST representations, validating the library's performance claims. Herb.jl signifies a paradigm shift toward standardized software engineering practices within the program synthesis community, establishing a robust foundation for future work that promotes the extension and remixing of existing methods.

---

## ðŸ”‘ Key Findings

*   **Usability Crisis:** Current program synthesis tools suffer from significant usability issues when reusing or integrating methods.
*   **Standardization Potential:** Existing synthesizers rely on similar fundamental building blocks that can be standardized.
*   **Successful Modularization:** Herb.jl successfully modularizes synthesis algorithms into extendable sub-compartments for code reuse.
*   **Versatile Application:** The library supports three distinct use cases:
    *   Implementing simple problems.
    *   Re-implementing complex synthesizers.
    *   Running benchmarks.

---

## ðŸ§© Methodology

The authors developed the **Herb.jl** library in Julia using a modular architectural design that deconstructs synthesis algorithms into independent, interchangeable sub-compartments.

The design's utility and flexibility were validated through the implementation of three specific use cases:
1.  Basic problem solving.
2.  The replication of prior synthesizers.
3.  Benchmark execution.

This approach allowed the authors to demonstrate that the library could handle both simple tasks and complex reconstructions of existing state-of-the-art tools.

---

## ðŸ—ï¸ Technical Details

Herb.jl is a Julia-based library featuring a modular architecture designed for flexibility and performance.

### Architecture Components
*   **HerbCore:** Foundational interfaces.
*   **HerbSpecification:** Problem definitions.
*   **HerbGrammar:** Syntax definitions.
*   **HerbInterpret:** Semantics handling.
*   **HerbConstraints:** Space pruning logic.
*   **HerbSearch:** Enumeration strategies.
*   **Garden.jl:** A collection of re-implemented existing synthesizers.

### Data Structures & Optimization
*   **Core Structures:** Utilizes ASTs, Holes, and Partial Programs.
*   **Uniform Trees:** Custom data structures used to optimize memory usage and speed up constraint checking.

### Design Paradigms
*   **Separation of Concerns:** Strict separation of syntax and semantics.
*   **Solver-Managed Iterators:** Search iterators managed by the solver.
*   **Native Integration:** Leverages Julia's native expressions and multiple dispatch capabilities.

---

## ðŸ“ Contributions

*   **Herb.jl:** A unifying, open-source library for program synthesis written in Julia.
*   **Modularization Framework:** A structural contribution standardizing underlying components to enable extension, reuse, and remixing of methods.
*   **Validation of Usability:** Demonstrated practical applications showing the library lowers the barrier to entry for implementing new problems and reconstructing state-of-the-art synthesizers.

---

## ðŸ“Š Results

While the provided text notes a lack of quantitative performance tables, it reports significant qualitative findings and code reduction metrics:

*   **High Modularity:** The library allows researchers to switch search strategies with minimal code modifications.
*   **Memory Efficiency:** Uniform Trees significantly reduce memory usage compared to standard implementations.
*   **Optimized Constraints:** Constraint propagation is more efficient on Uniform Trees than on arbitrary ASTs.
*   **Readable Re-implementations:** Re-implementations of existing synthesizers (Probe, FrAngel, Neo) are described as short, readable, and performant, with substantial reductions in Lines of Code (LOC).