---
title: 'MetaAgent: Automatically Constructing Multi-Agent Systems Based on Finite
  State Machines'
arxiv_id: '2507.22606'
source_url: https://arxiv.org/abs/2507.22606
generated_at: '2026-02-03T07:11:37'
quality_score: 8
citation_count: 40
model_profiles_used:
- default
- fast
model_profiles:
  default:
    provider: cerebras
    name: zai-glm-4.7
    temperature: 0.9
    top_p: 0.95
    max_tokens: 150000
  fast:
    provider: cerebras
    name: zai-glm-4.7
    temperature: 0.9
    top_p: 0.95
    max_tokens: 150000
---

# MetaAgent: Automatically Constructing Multi-Agent Systems Based on Finite State Machines

*Yaolun Zhang; Xiaogeng Liu; Chaowei Xiao*

> ### ðŸ“Š Quick Facts
> *   **Quality Score:** 8/10
> *   **References:** 40 citations
> *   **Core Architecture:** Finite State Machine (FSM) based Multi-Agent System (MAS)
> *   **Performance Benchmark:** 100% success rate in text tasks; **0.87 F1 Score** in ML pipeline
> *   **Key Competitors:** Outperforms AutoGen and MetaGPT
> *   **Input:** Task Description $\rightarrow$ **Output:** Deployed Multi-Agent System

---

## Executive Summary

Designing effective Multi-Agent Systems (MAS) typically requires significant manual effort to define agent roles, communication protocols, and workflow logic. While existing automated methods attempt to alleviate this burden, they suffer from critical limitations, including dependence on external training data, rigid communication structures, and a lack of tool integration. Furthermore, these automated approaches are often confined to small, pre-defined scenarios, limiting their scalability in complex environments.

This paper introduces **MetaAgent**, a novel framework that leverages **Finite State Machines (FSMs)** to automatically construct and govern multi-agent systems based on simple task descriptions. The system represents the MAS topology as a JSON object defining "states" (specific agent actions with memory control) and "transitions" (logic flow). Technically, the framework employs a **Meta-Optimizer**, an LLM-driven agent that iteratively critiques and refines the initial FSM architecture by identifying logic gaps and revising the JSON definition before deployment.

Empirical evaluations demonstrate that MetaAgent-generated systems consistently outperform established baselines, specifically AutoGen and MetaGPT. In text-based reasoning tasks, MetaAgent achieved a **100% success rate**, whereas competing methods frequently failed to complete the workflow. In a rigorous real-world validation involving an end-to-end Machine Learning pipeline on the Adult dataset, MetaAgent achieved an **F1 score of 0.87** and **86.5% accuracy**. This research significantly advances the field of agentic AI by demonstrating that FSMs, when coupled with LLM-driven optimization, can serve as effective controllers for complex agent systems, shifting the paradigm from manual architectural engineering to high-level task specification.

---

## Key Findings

*   **Superiority over Automated Methods:** MetaAgent-generated systems consistently outperform existing automated multi-agent design methods, including AutoGen and MetaGPT.
*   **Parity with Human Design:** The framework achieves performance comparable to human-designed multi-agent systems that are specifically optimized for the task at hand.
*   **Effective Control Mechanism:** Finite State Machines (FSMs) are demonstrated to be highly effective controllers for managing agent actions and state transitions within deployed systems.
*   **Task Versatility:** The framework was successfully validated across both text-based tasks and practical, real-world scenarios, such as end-to-end ML pipelines.

---

## Methodology

The MetaAgent framework follows a structured four-step process to move from a task description to a fully functional system:

1.  **Framework Architecture**
    The solution utilizes a Finite State Machine (FSM) based framework to structure the multi-agent system, ensuring a logical flow of operations.

2.  **System Generation**
    The process accepts a natural language task description as input and automatically constructs the initial multi-agent system design.

3.  **Optimization (Meta-Optimizer)**
    An optimization algorithm (LLM-driven) is employed to refine and "polish" the generated system architecture. This step identifies logic gaps and revises the system definition before deployment.

4.  **Deployment Control**
    Once deployed, the FSM directly governs the logic by controlling agent actions and managing state transitions, ensuring the system adheres to the designed workflow.

---

## Technical Details

The technical implementation of MetaAgent relies on a robust JSON-based representation of the system topology and execution logic:

*   **Topology Representation**
    The MAS is represented as a JSON object containing two primary components:
    *   **States:** Correspond to specific agent actions.
    *   **Transitions:** Define the logic flow between states.

*   **State Configuration**
    *   **Roles:** Agents are assigned specific roles (e.g., `DataPreprocessingAgent`).
    *   **System Prompts:** Contain the transition logic and instructions for the agent.
    *   **Tools:** Agents are equipped with specific tools (e.g., `code_interpreter`).
    *   **Memory Control:** Includes a `listener` field defining which agents must save the output, managing the flow of memory.

*   **Transition Logic**
    *   **Self-Triggered:** Transitions are triggered by agents via specific output tags (e.g., `<STATE_TRANS>: 2`).
    *   **Structural Support:** The system supports loops, branching, and complex workflows.
    *   **Completeness Rules:** Enforced rules are in place to prevent deadlocks and ensure the system can reach a terminal state.

---

## Research Contributions

*   **Addressing Automation Gaps**
    The paper addresses specific limitations in current automated design methods, specifically the lack of tool integration, dependence on external training data, and rigid communication structures found in existing solutions.

*   **Novel Framework (MetaAgent)**
    Introduction of a framework capable of dynamically generating multi-agent systems from scratch, moving beyond the constraints of small, pre-defined scenarios typical of human-designed frameworks.

*   **Integration of FSMs with LLMs**
    Demonstrating the successful application of Finite State Machines to structure and control LLM-based agents in an automated fashion, combining the reliability of FSMs with the reasoning power of LLMs.

---

## Results & Performance

The validation of MetaAgent covered both qualitative and quantitative metrics across diverse scenarios:

**Text-Based Reasoning Tasks**
*   **Success Rate:** MetaAgent achieved a **100% success rate**.
*   **Comparison:** Competing methods (AutoGen, MetaGPT) frequently failed to complete the workflow.

**Real-World Scenario (ML Pipeline)**
*   **Task:** End-to-end Machine Learning pipeline on the Adult dataset.
*   **Capabilities Demonstrated:** Data preprocessing, model selection, training, and reporting metrics (F-1, RMSE).
*   **Metrics:**
    *   **F1 Score:** 0.87
    *   **Accuracy:** 86.5%
*   **Tool Integration:** Successful integration of execution tools like `code_interpreter`.

---
**Document Quality Score:** 8/10 | **References:** 40 citations