---
ver: rpa2
title: Novelty Heuristics, Multi-Queue Search, and Portfolios for Numeric Planning
arxiv_id: '2404.05235'
source_url: https://arxiv.org/abs/2404.05235
tags:
- planning
- numeric
- heuristic
- novelty
- search
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: The paper explores ways to improve heuristic search for numeric
  planning by extending novelty heuristics, introducing the Manhattan distance heuristic,
  and combining heuristics using multi-queue search and portfolios. The Manhattan
  distance heuristic is simple but effective, outperforming more complex numeric heuristics
  for single-queue search.
---

# Novelty Heuristics, Multi-Queue Search, and Portfolios for Numeric Planning

## Quick Facts
- arXiv ID: 2404.05235
- Source URL: https://arxiv.org/abs/2404.05235
- Authors: Dillon Z. Chen; Sylvie Thiébaux
- Reference count: 34
- Key outcome: Manhattan distance heuristic (hmd) outperforms complex numeric heuristics; novelty heuristics with boundary extension and QB function significantly improve coverage; multi-queue search and portfolios further enhance performance by combining complementary heuristics

## Executive Summary
This paper explores ways to improve heuristic search for numeric planning by extending novelty heuristics, introducing the Manhattan distance heuristic, and combining heuristics using multi-queue search and portfolios. The Manhattan distance heuristic is simple but effective, outperforming more complex numeric heuristics for single-queue search. Novelty heuristics, particularly those using the boundary extension encoding feature and quantified both novelty function, also improve performance. Multi-queue search and portfolios further enhance performance by combining heuristics and exploiting their complementary strengths. Experiments on the Numeric Track of the 2023 International Planning Competition show that the proposed techniques significantly improve coverage and plan quality compared to existing approaches.

## Method Summary
The paper extends heuristic search techniques for numeric planning, including the Manhattan distance heuristic (hmd), novelty heuristic extensions using boundary extension encoding and quantified both (QB) function, multi-queue search, and portfolio strategies. The methods are implemented in the ENHSP planner and evaluated on the Numeric Track of the 2023 International Planning Competition (NT-IPC) benchmark suite. The experiments compare various configurations of single-queue, multi-queue, and portfolio search with different heuristics, measuring coverage and plan quality.

## Key Results
- The Manhattan distance heuristic (hmd) outperforms more complex numeric heuristics for single-queue search
- Novelty heuristics with boundary extension encoding and quantified both (QB) function significantly improve coverage
- Multi-queue search and portfolios further enhance performance by combining complementary heuristics and exploiting their strengths

## Why This Works (Mechanism)

### Mechanism 1
- Claim: The Manhattan distance heuristic (hmd) outperforms more complex numeric heuristics for single-queue search.
- Mechanism: hmd refines the goal count heuristic by measuring the absolute error of numeric expressions in unsatisfied goal conditions, making it more informative than simple counting while remaining computationally cheap.
- Core assumption: The error in numeric expressions correlates well with actual plan distance.
- Evidence anchors:
  - [abstract]: "The Manhattan distance heuristic is simple but effective, outperforming more complex numeric heuristics for single-queue search."
  - [section]: "We can easily refine the heuristic for numeric conditions ξ ⊵ 0 by measuring the error of the expression ξ evaluated in the current state."
- Break condition: If numeric errors are not well correlated with plan distance (e.g., in domains with highly nonlinear constraints), hmd performance degrades.

### Mechanism 2
- Claim: Multi-queue search improves performance by combining complementary heuristics.
- Mechanism: By maintaining separate priority queues for each heuristic and expanding nodes in a round-robin fashion, multi-queue search balances exploration and exploitation, avoiding the pitfalls of any single heuristic.
- Core assumption: Different heuristics have complementary strengths across different problem instances.
- Evidence anchors:
  - [abstract]: "Multi-queue search and portfolios further enhance performance by combining heuristics and exploiting their complementary strengths."
  - [section]: "Multi-queue search is an effective method for combining heuristics for satisficing search by maintaining a separate queue in greedy best first search for each heuristic."
- Break condition: If all heuristics perform similarly poorly on a domain, multi-queue search provides little benefit.

### Mechanism 3
- Claim: Novelty heuristics with boundary extension encoding and quantified both (QB) function significantly improve coverage.
- Mechanism: These novelty heuristics identify states that explore new regions of the state space (via extreme value tracking) and prioritize them based on both novelty and heuristic value, avoiding redundant exploration.
- Core assumption: Exploring novel states leads to finding solutions faster than purely heuristic-driven search.
- Evidence anchors:
  - [abstract]: "Novelty heuristics, particularly those using the boundary extension encoding feature and quantified both novelty function, also improve performance."
  - [section]: "The quantified both novelty function addresses these issues by making use of the base heuristic value and also distinguishing non-novel states."
- Break condition: If the state space is small or highly structured, novelty heuristics may add unnecessary overhead.

## Foundational Learning

- Concept: PDDL2.1 numeric planning formalization
  - Why needed here: The paper extends techniques from classical planning to numeric planning, which requires understanding the formal syntax and semantics of numeric variables and conditions.
  - Quick check question: What are the two types of variables in a numeric planning task and how do they differ?

- Concept: Delete relaxation and its limitations
  - Why needed here: Many heuristics discussed are derived from delete relaxation, and understanding its limitations explains why certain techniques (like novelty heuristics) are valuable.
  - Quick check question: Why do delete-relaxation heuristics perform poorly on problems requiring back-and-forth movement or long-range resource dependencies?

- Concept: Heuristic search algorithms (GBFS, A*)
  - Why needed here: The paper evaluates various heuristic search configurations, and understanding how these algorithms use heuristics is crucial for interpreting results.
  - Quick check question: What is the difference between greedy best-first search and A* in terms of node selection?

## Architecture Onboarding

- Component map: ENHSP planner -> search framework -> heuristics (hmd, hadd, hmrp+hj, novelty extensions) -> queue management (single-queue, multi-queue, portfolio) -> benchmark suite (NT-IPC)
- Critical path: State expansion → heuristic evaluation → queue insertion → node selection → goal check
- Design tradeoffs:
  - Single vs. multi-queue: Trade computation of multiple heuristics against redundant node expansions
  - Novelty vs. base heuristic: Trade exploration of novel states against exploitation of heuristic guidance
  - Portfolio vs. multi-queue: Trade static vs. dynamic combination of heuristics
- Failure signatures:
  - Poor performance on domains with infinite state spaces (e.g., counters, sailing) suggests need for constraint-based approaches
  - Long plan lengths indicate delete-relaxation heuristics missing crucial dependencies
  - High node expansions with hmd suggest informative but computationally expensive heuristics may be needed
- First 3 experiments:
  1. Compare hmd vs. hgc on a domain with clear numeric goals (e.g., counters) to verify Manhattan distance refinement works
  2. Run multi-queue with (hmd, hadd) vs. single-queue hmd to test complementary heuristic assumption
  3. Compare ⟨B,QB⟩ novelty extension vs. ⟨A,QB⟩ on a domain with extreme value tracking (e.g., delivery) to test boundary extension feature

## Open Questions the Paper Calls Out

### Open Question 1
- Question: What is the optimal novelty heuristic extension (k value) for numeric planning?
- Basis in paper: [explicit] The paper mentions that choosing k = 2 almost always provides better performance than k = 1 for all configurations of novelty heuristics.
- Why unresolved: While the paper suggests k = 2 is generally better, it doesn't definitively prove this is optimal across all domains and problem instances.
- What evidence would resolve it: A comprehensive study varying k values across all domains and problem instances, potentially with statistical significance testing, could determine if k = 2 is truly optimal or if there are cases where other k values perform better.

### Open Question 2
- Question: How do multi-queue search and portfolios compare in terms of efficiency and effectiveness for combining heuristics in numeric planning?
- Basis in paper: [inferred] The paper states that portfolios achieve higher coverage even with simple uniform partitioning scheduling, suggesting they may be more effective than multi-queue search.
- Why unresolved: The paper only provides a qualitative comparison and doesn't offer a detailed quantitative analysis of efficiency (e.g., computation time) and effectiveness (e.g., plan quality) trade-offs between the two approaches.
- What evidence would resolve it: A thorough experimental study comparing multi-queue search and portfolios on metrics such as computation time, plan quality, and coverage across diverse numeric planning domains and problem instances.

### Open Question 3
- Question: What are the key characteristics of numeric planning problems that make them more suitable for constraint-based solvers versus heuristic search approaches?
- Basis in paper: [explicit] The paper notes that constraint-based solvers like PATTY perform well on problems with a high ratio of numeric variables and short rolled-up plans, while heuristic search performs better on problems requiring long sequential plans or traversal over maps with many locations.
- Why unresolved: While the paper provides some general observations, it doesn't offer a comprehensive framework or set of rules for determining which type of solver is best suited for a given problem based on its characteristics.
- What evidence would resolve it: A systematic analysis of problem characteristics (e.g., number of numeric variables, plan length, domain structure) and their correlation with solver performance could lead to a predictive model for choosing between constraint-based and heuristic search approaches.

## Limitations
- Performance limitations on domains with infinite state spaces or long-range dependencies due to delete-relaxation heuristics
- Potential overfitting to benchmarks when using portfolios or automatic configuration selection methods
- Experimental results rely on a specific benchmark suite (NT-IPC) that may not generalize to other numeric planning domains

## Confidence
- High confidence: The mechanism by which hmd outperforms hgc through measuring numeric expression errors is well-established and clearly demonstrated.
- Medium confidence: The claim that novelty heuristics with boundary extension and QB function significantly improve coverage is supported by experimental results but may be sensitive to implementation details.
- Medium confidence: The assertion that multi-queue search exploits complementary heuristic strengths is theoretically sound but requires careful configuration to avoid redundant expansions.

## Next Checks
1. Replicate the main experimental results on a separate numeric planning benchmark suite to assess generalization beyond NT-IPC.
2. Conduct ablation studies on the novelty heuristic components (boundary extension encoding, QB function) to isolate their individual contributions.
3. Test the proposed techniques on domains with infinite state spaces or complex resource constraints to identify limitations of delete-relaxation-based approaches.