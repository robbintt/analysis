---
ver: rpa2
title: 'On the Computational Complexity of Stackelberg Planning and Meta-Operator
  Verification: Technical Report'
arxiv_id: '2403.17826'
source_url: https://arxiv.org/abs/2403.17826
tags:
- planning
- stackelberg
- plan
- leader
- follower
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: "The paper presents the first theoretical complexity analysis of\
  \ Stackelberg planning, an adversarial planning model between two players. It shows\
  \ that Stackelberg planning is PSPACE-complete in general, but becomes \u03A3P2-complete\
  \ under a polynomial plan-length restriction."
---

# On the Computational Complexity of Stackelberg Planning and Meta-Operator Verification: Technical Report

## Quick Facts
- arXiv ID: 2403.17826
- Source URL: https://arxiv.org/abs/2403.17826
- Authors: Gregor Behnke; Marcel Steinmetz
- Reference count: 12
- Key outcome: Stackelberg planning is PSPACE-complete in general, ΣP2-complete under polynomial plan-length restrictions, with meta-operator verification showing equivalent complexity.

## Executive Summary
This paper presents the first comprehensive theoretical complexity analysis of Stackelberg planning, an adversarial planning model where a leader commits to a plan and a follower responds with their own plan. The authors establish that Stackelberg planning is PSPACE-complete in the general case, making it no harder than classical planning, but becomes ΣP2-complete under polynomial plan-length restrictions. This fundamental result implies that polynomial compilations of Stackelberg planning into classical planning necessarily incur exponential plan-length blow-up in the worst case. The paper also analyzes various syntactic restrictions and proves that Stackelberg planning remains intractable even where classical planning is tractable. Finally, the authors explore the complexity of meta-operator verification, recently connected to Stackelberg planning, proving it to be PSPACE-complete and ΣP2-complete under polynomial plan-length restrictions.

## Method Summary
The paper employs complexity-theoretic reductions to establish its results. The primary approach involves reducing from well-known complexity problems (PLANUNSAT for PSPACE-completeness, and restricted QBF problems for ΣP2-completeness) to Stackelberg planning and meta-operator verification problems. The authors construct Stackelberg planning tasks that encode logical formulas, where the leader's actions correspond to existential quantifier choices and the follower's responses correspond to universal quantifier choices. The polynomial plan-length restriction is achieved by bounding the number of actions in both players' plans by a polynomial function of the task size. For meta-operator verification, the authors show that the problem can be reduced to checking whether a certain formula is valid, which in turn reduces to QBF problems.

## Key Results
- Stackelberg planning is PSPACE-complete in general, showing no additional complexity compared to classical planning
- Under polynomial plan-length restrictions, Stackelberg planning becomes ΣP2-complete, a higher complexity class than classical planning
- Meta-operator verification is PSPACE-complete and ΣP2-complete under polynomial plan-length restrictions, establishing its equivalence to Stackelberg planning
- Various syntactic restrictions that make classical planning tractable do not reduce the complexity of Stackelberg planning

## Why This Works (Mechanism)

### Mechanism 1
- **Claim**: Stackelberg planning is computationally equivalent to classical planning in the general case, both being PSPACE-complete.
- **Mechanism**: The reduction from PLANUNSAT (deciding if a classical planning task is unsolvable) to STACKELSAT allows using the same PSPACE-complete machinery. The construction treats all actions as follower actions, making the leader's only option to select a plan that renders the follower's task unsolvable.
- **Core assumption**: The follower's task is exactly classical planning, and the leader's objective is to find a plan that makes this task unsolvable.
- **Evidence anchors**:
  - [abstract]: "We show that in general Stackelberg planning is actually no harder than classical planning."
  - [section]: "Theorem 1. STACKELSAT is PSPACE-complete. Membership: Savitch (1970) showed that PSP ACE = NPSP ACE..."
  - [corpus]: Weak evidence - no direct citations to support this specific reduction.
- **Break condition**: If the follower's task were not reducible to classical planning, or if the leader's objective were not simply to render the follower's task unsolvable, this equivalence would break.

### Mechanism 2
- **Claim**: Under polynomial plan-length restrictions, Stackelberg planning becomes harder than classical planning, reaching ΣP2-completeness.
- **Mechanism**: The reduction from restricted QBF (∃x∀yφ) to STACKELPOLY creates a Stackelberg task where the leader chooses variable assignments and the follower tries to find a counter-assignment. The polynomial bound ensures both players' plans are short, but the alternation between existential and universal choices pushes the complexity up.
- **Core assumption**: The polynomial plan-length restriction is sufficient to capture the alternation needed for the QBF reduction.
- **Evidence anchors**:
  - [abstract]: "Under a polynomial plan-length restriction, however, Stackelberg planning is a level higher up in the polynomial complexity hierarchy..."
  - [section]: "Theorem 3. STACKELPOLY is ΣP2-complete. Membership: Membership in ΣP2 can be shown by providing a polynomial time alternating Turing Machine..."
  - [corpus]: No direct evidence - this is a novel result.
- **Break condition**: If the polynomial plan-length restriction were not tight enough to capture the alternation, or if the QBF reduction did not preserve the complexity, this result would not hold.

### Mechanism 3
- **Claim**: Meta-operator verification is computationally equivalent to Stackelberg planning, both being PSPACE-complete in general and ΣP2-complete under polynomial plan-length restrictions.
- **Mechanism**: The reduction from PLANUNSAT to METAOPVER creates a meta-operator that is valid if and only if the original classical planning task is unsolvable. This equivalence allows leveraging the same complexity machinery.
- **Core assumption**: The meta-operator condition can be expressed as a Stackelberg planning task where the leader's plan must make the follower's task unsolvable.
- **Evidence anchors**:
  - [abstract]: "We finally inspect the complexity of meta-operator verification, a problem that has been recently connected to Stackelberg planning."
  - [section]: "Theorem 10. METAOPVER is PSPACE-complete. Proof. Membership: Iterate over all states in Π..."
  - [corpus]: No direct evidence - this is a novel result.
- **Break condition**: If the meta-operator condition could not be expressed as a Stackelberg planning task, or if the reduction did not preserve the complexity, this equivalence would break.

## Foundational Learning

- **Concept**: Polynomial hierarchy
  - **Why needed here**: Understanding the placement of ΣP2 in the polynomial hierarchy is crucial for interpreting the complexity results and their implications for compilations.
  - **Quick check question**: If NP = ΣP2, what happens to the polynomial hierarchy?

- **Concept**: Savitch's theorem and its implications for PSPACE
  - **Why needed here**: Savitch's theorem is used to show that PSPACE = NPSPACE, which is essential for proving the PSPACE-completeness of the decision problems.
  - **Quick check question**: What is the key insight of Savitch's theorem, and how does it relate to the complexity of Stackelberg planning?

- **Concept**: QBF reductions and their use in complexity proofs
  - **Why needed here**: The proofs for the polynomial plan-length restrictions rely on reductions from restricted QBF problems, which require understanding how to encode logical formulas into planning tasks.
  - **Quick check question**: How does the reduction from ∃x∀yφ to Stackelberg planning work, and what is the role of the polynomial plan-length restriction?

## Architecture Onboarding

- **Component map**: Decision problems (STACKELSAT, STACKELMIN, STACKELPOLY, METAOPVER) -> Complexity classes (PSPACE-complete, ΣP2-complete, ΠP2-complete)
- **Critical path**: The reduction from PLANUNSAT to STACKELSAT establishes the baseline PSPACE-completeness, which is then extended to other decision problems and complexity classes.
- **Design tradeoffs**: The choice of polynomial plan-length restriction balances fine-grained complexity analysis with theoretical tractability. Focusing on decision problems simplifies analysis but may not capture practical algorithmic considerations.
- **Failure signatures**: Reductions that don't preserve complexity classes, insufficient polynomial bounds, or inability to express meta-operator conditions as Stackelberg tasks.
- **First 3 experiments**:
  1. Verify the reduction from PLANUNSAT to STACKELSAT by implementing both problems and checking if the equivalence holds.
  2. Implement the reduction from restricted QBF to STACKELPOLY and verify that the complexity is indeed ΣP2-complete.
  3. Test the equivalence between meta-operator verification and Stackelberg planning by reducing one to the other and checking if the complexity classes match.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: Does Stackelberg planning become tractable under any syntactic restriction that is not captured by Bylander's classes?
- Basis in paper: [inferred] The paper shows that Stackelberg planning remains intractable under various syntactic restrictions where classical planning is tractable, but does not exhaustively explore all possible restrictions.
- Why unresolved: The paper focuses on Bylander's syntactic restrictions but does not consider other potential restrictions or combinations thereof that might yield tractable fragments.
- What evidence would resolve it: Demonstrating either a tractable syntactic restriction for Stackelberg planning or proving that no such restriction exists within a well-defined class of restrictions.

### Open Question 2
- Question: Can the ΣP2-completeness of Stackelberg planning under polynomial plan-length restriction be leveraged to develop more efficient algorithms for specific problem instances?
- Basis in paper: [explicit] The paper shows that Stackelberg planning is ΣP2-complete under polynomial plan-length restriction, suggesting that polynomial compilations into classical planning have a worst-case exponential plan-length blow-up.
- Why unresolved: While the complexity result is established, it does not directly inform algorithmic improvements or identify tractable subclasses of Stackelberg planning problems.
- What evidence would resolve it: Developing and analyzing algorithms that exploit the structure of specific Stackelberg planning instances to achieve better performance than the worst-case complexity suggests.

### Open Question 3
- Question: Is there a direct relationship between the complexity of meta-operator verification and the complexity of solving the corresponding Stackelberg planning task?
- Basis in paper: [explicit] The paper establishes that meta-operator verification is PSPACE-complete in general and ΠP2-complete under polynomial plan-length restriction, similar to Stackelberg planning but with swapped quantifiers.
- Why unresolved: While the complexities are shown to be related, the paper does not explore whether solving one problem can be used to efficiently solve the other or if there are deeper connections between their solution spaces.
- What evidence would resolve it: Proving a reduction between meta-operator verification and Stackelberg planning that preserves complexity or developing a unified framework that captures both problems' complexities.

## Limitations
- Analysis focuses on worst-case complexity and decision problems, not practical algorithmic performance
- Polynomial plan-length restrictions may not correspond to realistic planning scenarios
- Complexity results don't directly inform algorithm design or identify tractable subclasses

## Confidence
- **High**: PSPACE-completeness results for general Stackelberg planning based on established reductions from PLANUNSAT
- **Medium**: ΣP2-completeness results for polynomially bounded cases as novel complexity assignments with subtle dependencies on formulation
- **Medium**: Equivalence between meta-operator verification and Stackelberg planning due to recent development of this connection

## Next Checks
1. Implement the QBF-to-Stackelberg planning reduction for small instances (2-3 variable formulas) to verify follower can find counter-assignments
2. Systematically test impact of varying syntactic restrictions on complexity class boundaries
3. Empirically measure plan-length blow-up in polynomial compilations of Stackelberg planning to classical planning across benchmark domains