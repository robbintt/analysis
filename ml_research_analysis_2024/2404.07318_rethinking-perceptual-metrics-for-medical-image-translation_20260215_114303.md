---
ver: rpa2
title: Rethinking Perceptual Metrics for Medical Image Translation
arxiv_id: '2404.07318'
source_url: https://arxiv.org/abs/2404.07318
tags: []
core_contribution: 'This study investigates evaluation metrics for medical image translation,
  focusing on perceptual metrics like FID, KID, and SWD. Two tasks are evaluated:
  GE breast MRI to Siemens breast MRI and lumbar spine MRI to CT, using state-of-the-art
  translation models.'
---

# Rethinking Perceptual Metrics for Medical Image Translation

## Quick Facts
- arXiv ID: 2404.07318
- Source URL: https://arxiv.org/abs/2404.07318
- Authors: Nicholas Konz; Yuwen Chen; Hanxue Gu; Haoyu Dong; Maciej A. Mazurowski
- Reference count: 4
- Key outcome: Perceptual metrics (FID, KID, SWD) show inconsistent correlation with segmentation metrics in medical image translation due to anatomical constraints, with SWD better for subtle intra-modality tasks but failing for inter-modality translation.

## Executive Summary
This study investigates the applicability of perceptual metrics (FID, KID, SWD) for evaluating medical image translation tasks, specifically GE breast MRI to Siemens breast MRI and lumbar spine MRI to CT. The research finds that while perceptual metrics are standard in natural image domains, they fail to consistently correlate with segmentation-based metrics in medical imaging due to the critical importance of anatomical preservation. SWD shows promise for subtle intra-modality translation but breaks down for more complex inter-modality tasks, highlighting the need for metrics that better capture anatomical constraints.

## Method Summary
The study evaluates four state-of-the-art translation models (CycleGAN, MaskGAN, UNSB, SPADE) on two medical image translation tasks using the DBC dataset for breast MRI and private lumbar spine MRIs with TotalSegmentator for CT. Images are resized to 256x256 and normalized to [0, 255]. Perceptual metrics (FID, KID, SWD, IS) are computed between translated images and target domain images, while segmentation metrics use a UNet trained on target domain to measure Dice coefficients for breast tissue and bone structures. The correlation between perceptual and segmentation metrics is analyzed to assess metric reliability.

## Key Results
- Perceptual metrics, particularly FID, show inconsistent correlation with segmentation metrics due to anatomical constraints
- SWD performs better than learned feature metrics (FID, KID) for subtle intra-modality breast MRI translation
- SWD fails for inter-modality MRI-to-CT translation, highlighting metric limitations across different translation tasks
- Segmentation-based metrics remain more reliable for medical image translation despite requiring labeled data

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Perceptual metrics like FID fail in medical image translation because they focus on global image realism rather than anatomical consistency.
- Mechanism: Perceptual metrics rely on deep network features that assess perceptual similarity between generated and real images, but these features do not encode anatomical constraints that are critical in medical imaging.
- Core assumption: Medical image translation requires preserving anatomical structures, which perceptual metrics designed for natural images do not prioritize.
- Evidence anchors:
  - [abstract] "perceptual metrics do not generally correlate with segmentation metrics due to them extending poorly to the anatomical constraints of this sub-field"
  - [section] "perceptual metrics are designed for assessing image realism rather than object preservation during translation"
  - [corpus] No direct evidence found in neighbors; claim based on paper findings.
- Break condition: If perceptual metrics were specifically trained or adapted to medical anatomical features, they might capture anatomical consistency.

### Mechanism 2
- Claim: SWD metric works better for subtle intra-modality translation because it captures pixel-level textural patterns.
- Mechanism: SWD calculates distance between pixel-level features rather than learned deep features, making it sensitive to subtle texture differences within the same modality.
- Core assumption: Subtle differences between similar modalities are best captured by direct pixel-level comparisons rather than learned features.
- Evidence anchors:
  - [abstract] "we find that the lesser-used pixel-level SWD metric may be useful for subtle intra-modality translation"
  - [section] "SWD shows a better correlation than the learned feature metrics (FID, KID, IS) for the subtle intra-modality breast MRI translation"
  - [corpus] No direct evidence in neighbors; claim based on paper findings.
- Break condition: If translation involves significant modality differences, pixel-level similarity becomes insufficient.

### Mechanism 3
- Claim: Segmentation-based metrics remain more reliable for medical image translation because they directly measure anatomical preservation.
- Mechanism: Training a segmentation model on target domain images and evaluating its performance on translated images provides a task-specific measure of anatomical preservation.
- Core assumption: The primary goal of medical image translation is to preserve anatomical structures that segmentation models can identify.
- Evidence anchors:
  - [abstract] "A common metric that is more anatomy-focused is the performance of a segmentation model trained in the target domain on translated images"
  - [section] "evaluate the metric of (1) training and validating a UNet on the corresponding target domain training set to segment the aforementioned object(s) of interest"
  - [corpus] No direct evidence in neighbors; claim based on paper findings.
- Break condition: If the segmentation model is not robust or the anatomical features are too subtle for reliable segmentation.

## Foundational Learning

- Concept: Generative Adversarial Networks (GANs) and their evaluation
  - Why needed here: Understanding how GANs generate medical images and why standard evaluation metrics may not apply
  - Quick check question: What is the fundamental difference between how GANs are evaluated in natural images versus medical images?

- Concept: Perceptual metrics (FID, KID, SWD)
  - Why needed here: Understanding the mathematical basis and limitations of these metrics in medical contexts
  - Quick check question: How does SWD differ from FID in terms of feature extraction and what implications does this have for medical image evaluation?

- Concept: Anatomical constraints in medical imaging
  - Why needed here: Recognizing why preserving anatomical structure is more important than perceptual realism in medical applications
  - Quick check question: Why might a perceptually realistic medical image still be clinically unusable?

## Architecture Onboarding

- Component map:
  Data preprocessing pipeline -> Translation models (CycleGAN, MaskGAN, UNSB, SPADE) -> Evaluation metrics (segmentation-based, perceptual metrics) -> Segmentation models (UNet for target domain evaluation)

- Critical path:
  1. Preprocess source and target domain images
  2. Train translation models on unpaired data
  3. Generate translated images
  4. Evaluate using both segmentation metrics and perceptual metrics
  5. Compare correlations between metric types

- Design tradeoffs:
  - Using segmentation metrics requires labeled data but provides anatomically-relevant evaluation
  - Perceptual metrics are task-agnostic but may not capture anatomical preservation
  - SWD provides pixel-level comparison but may be too sensitive for inter-modality translation

- Failure signatures:
  - Low correlation between perceptual and segmentation metrics
  - SWD performing poorly on inter-modality translation
  - FID showing inconsistent behavior across different translation tasks

- First 3 experiments:
  1. Run all four translation models on the breast MRI dataset and compute all metrics
  2. Compare metric correlations across breast MRI (intra-modality) and MRI-to-CT (inter-modality) tasks
  3. Test SWD with different pixel neighborhood sizes to determine optimal configuration for medical images

## Open Questions the Paper Calls Out

### Open Question 1
- Question: What specific perceptual metric would best capture anatomical realism in medical image translation?
- Basis in paper: [inferred] The paper highlights that perceptual metrics like FID, KID, and SWD fail to consistently correlate with segmentation metrics, indicating a need for more suitable metrics.
- Why unresolved: Current perceptual metrics are designed for general image realism, not anatomical accuracy, and their performance varies significantly between intra-modality and inter-modality tasks.
- What evidence would resolve it: Development and validation of a perceptual metric specifically tailored to anatomical features, tested across diverse medical imaging tasks and compared against existing metrics.

### Open Question 2
- Question: How can perceptual metrics be adapted to better handle inter-modality translation tasks in medical imaging?
- Basis in paper: [inferred] The study found that SWD, which works well for subtle intra-modality translation, fails for more complex inter-modality tasks like MRI-to-CT.
- Why unresolved: Inter-modality tasks involve larger visual differences that pixel-level metrics cannot capture, suggesting a need for new approaches.
- What evidence would resolve it: Research into perceptual metrics that incorporate higher-level semantic or anatomical features, validated on inter-modality translation tasks.

### Open Question 3
- Question: What are the limitations of using segmentation-based metrics for evaluating medical image translation, and how can they be addressed?
- Basis in paper: [explicit] The paper notes that segmentation metrics may be overly reductionist and biased for specific tasks, as translated images could be used for various applications.
- Why unresolved: Segmentation metrics require annotations and may not fully capture the utility of translated images across different downstream tasks.
- What evidence would resolve it: Development of evaluation frameworks that integrate multiple downstream tasks and assess the versatility of translated images, moving beyond segmentation-centric metrics.

## Limitations
- Small dataset size (N < 2048) may have affected FID reliability due to non-full-rank feature covariance matrix
- Narrow scope limited to two specific translation tasks (breast MRI and MRI-to-CT) that may not generalize
- Does not explore whether perceptual metrics could be adapted or trained specifically for medical contexts

## Confidence
- Finding that FID fails to capture anatomical constraints: Medium confidence
- SWD better for subtle intra-modality translation: Medium confidence
- Segmentation metrics remain more reliable: High confidence within tested domains

## Next Checks
1. Validate findings on additional medical imaging tasks beyond breast MRI and MRI-to-CT translation
2. Test SWD with varying pixel neighborhood sizes to optimize for medical image characteristics
3. Develop and test a perceptual metric specifically trained on anatomical features rather than general image realism