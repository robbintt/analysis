---
ver: rpa2
title: Windowed MAPF with Completeness Guarantees
arxiv_id: '2410.01798'
source_url: https://arxiv.org/abs/2410.01798
tags:
- heuristic
- agents
- agent
- ss-cbs
- windowed
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper tackles the issue of deadlock and livelock in windowed
  multi-agent pathfinding (MAPF) solvers, which arises due to their limited planning
  horizon. To address this, the authors introduce WinC-MAPF, a framework that enables
  completeness in windowed MAPF solvers.
---

# Windowed MAPF with Completeness Guarantees

## Quick Facts
- arXiv ID: 2410.01798
- Source URL: https://arxiv.org/abs/2410.01798
- Reference count: 18
- Primary result: Introduces WinC-MAPF framework with SS-CBS that solves deadlock/livelock problems in windowed MAPF where existing approaches fail

## Executive Summary
This paper addresses a fundamental limitation in windowed Multi-Agent Path Finding (MAPF) solvers: the loss of completeness guarantees when planning with limited horizons. The authors introduce WinC-MAPF, a framework that restores completeness by combining heuristic updates from single-agent real-time search with agent independence ideas from MAPF. The framework's core innovation is a mechanism for updating heuristic values for disjoint agent groups, allowing the system to escape local minima without requiring full joint configuration planning. A key contribution is Single-Step CBS (SS-CBS), which integrates these heuristic updates into a CBS-based action generator while maintaining optimality guarantees.

## Method Summary
The method centers on WinC-MAPF, a framework that iteratively plans and executes windowed actions while maintaining completeness through heuristic updates. The core component is the Action Generator (AG), which must find optimal windowed actions and identify disjoint agent groups. SS-CBS serves as the primary AG implementation, using a novel "heuristic conflict" mechanism within CBS to incorporate heuristic penalties without breaking CBS's independence assumptions. When CBS encounters configurations that would incur penalties, it marks heuristic conflicts rather than immediately applying penalties. The framework then updates heuristic values for identified disjoint groups, encouraging exploration of alternative paths and preventing cycles.

## Key Results
- SS-CBS outperforms windowed CBS with larger windows across various maps and scenarios
- The framework successfully solves tough congestion problems where existing windowed approaches fail
- Formal proof of completeness for WinC-MAPF under specific conditions regarding optimal action generators

## Why This Works (Mechanism)

### Mechanism 1
- Claim: The framework maintains completeness by updating heuristic values for disjoint agent groups rather than full joint configurations, enabling practical escape from local minima.
- Mechanism: When a group of agents repeatedly visits configurations during deadlock/livelock, their heuristic values are increased via the update equation `h(CGri) ← U(CGri, CW_Gri)`. This penalizes those configurations and encourages the search to explore alternatives.
- Core assumption: The action generator must find the optimal windowed action that minimizes `c(C, CW) + h(CW)` and correctly identify disjoint agent groups.
- Evidence anchors:
  - [abstract] "Our framework leverages heuristic update insights from single-agent real-time heuristic search algorithms and agent independence ideas from MAPF algorithms."
  - [section 3.2] "Our key idea is therefore to compute and apply heuristic penalties to specific groups of agents instead of on the entire configuration."
- Break condition: If the action generator fails to identify disjoint groups correctly, agents may be penalized unnecessarily or deadlock situations may not be properly addressed.

### Mechanism 2
- Claim: Single-Step CBS (SS-CBS) introduces "heuristic conflicts" to properly incorporate heuristic penalties without breaking CBS's assumption of independent agent planning.
- Mechanism: When CBS encounters a configuration that would incur a heuristic penalty, it marks the CT node with a "heuristic conflict" without adding the penalty yet. Resolving this conflict requires applying both negative vertex constraints (to avoid the penalty) and positive vertex constraints (to force the penalty when necessary).
- Core assumption: CBS can maintain optimality while handling these additional heuristic conflicts and constraints.
- Evidence anchors:
  - [section 4.1] "Our idea is thus not to incorporate the heuristic penalty immediately. Instead, when CBS encounters a configuration that would incur a penalty, it marks the CT node with a 'heuristic conflict' without adding the penalty into the CT node's heuristic value yet."
  - [section 4.1] "Formally, a heuristic conflict occurs when agents' locations match the configuration of a HP."
- Break condition: If heuristic conflicts are not properly managed, the solution may become suboptimal or the completeness guarantee may be lost.

### Mechanism 3
- Claim: Disjoint agent group detection allows the framework to focus heuristic updates on coupled agents while leaving independent agents unaffected.
- Mechanism: The action generator analyzes resolved conflicts on the solution branch to determine which agents are coupled. Groups are formed by merging agents that share conflicts, ensuring that updates only affect agents that actually interact.
- Core assumption: Coupled agents must have conflicts that got resolved, and independent agents will not conflict with each other.
- Evidence anchors:
  - [section 4.2] "One small subtly; coupled agents must have conflicts, but agents with conflicts may not be coupled, e.g. an agent could tie-break poorly and have an 'unnecessary' conflict."
  - [section 4.2] "There is the possibility of indirect interactions. In particular, R1 could conflict with R2, causing R2 to replan which then conflicts with R3."
- Break condition: If indirect interactions are not properly detected, some coupled agents may be incorrectly separated into different groups, reducing the effectiveness of heuristic updates.

## Foundational Learning

- Concept: Multi-Agent Path Finding (MAPF) and its completeness guarantees
  - Why needed here: Understanding why traditional MAPF methods are complete but windowed approaches lose this property is crucial to appreciating the framework's contribution.
  - Quick check question: What is the key difference between full-horizon MAPF planning and windowed MAPF planning that leads to completeness issues?

- Concept: Real-time heuristic search and heuristic updates
  - Why needed here: The framework builds on single-agent real-time search techniques where updating heuristic values of visited states maintains completeness.
  - Quick check question: How does updating heuristic values help single-agent real-time search escape from cycles or local minima?

- Concept: Conflict-Based Search (CBS) algorithm structure
  - Why needed here: SS-CBS is a modification of CBS, so understanding CBS's high-level and low-level search structure is essential for grasping how heuristic conflicts are integrated.
  - Quick check question: In CBS, what is the role of the high-level search versus the low-level search?

## Architecture Onboarding

- Component map:
  - WinC-MAPF Framework -> Action Generator (AG) -> CBS with heuristic conflicts
  - WinC-MAPF Framework -> Heuristic Penalty System -> Group Detection Module
  - Action Generator -> Heuristic Penalty System -> Group Detection Module

- Critical path:
  1. Current configuration → AG with heuristic penalties
  2. AG returns next configuration and disjoint groups
  3. Update heuristic penalties for each group
  4. Execute first step of the returned path
  5. Repeat until all agents reach goals

- Design tradeoffs:
  - Window size W=1 vs larger windows: Single-step planning reduces computational overhead but may require more iterations
  - Optimal vs suboptimal AG: Optimal AG guarantees completeness but is computationally expensive
  - Group granularity: Smaller groups allow more targeted updates but require more complex group detection

- Failure signatures:
  - Deadlock: Agents repeatedly visit the same configurations without progress
  - Livelock: Agents keep moving but never reach goals due to coordination issues
  - Timeout: Individual iterations take too long due to high congestion
  - Suboptimal solutions: Agents find paths but with higher cost than necessary

- First 3 experiments:
  1. Test SS-CBS on simple congestion scenarios (like the tunnel/loopchain/connector examples) to verify it can solve problems that windowed CBS fails on
  2. Compare success rates of SS-CBS vs windowed CBS with various window sizes on standard benchmark maps
  3. Measure the effect of tie-breaking strategies on solution quality and runtime by running with and without tie-breaking mechanisms

## Open Questions the Paper Calls Out

### Open Question 1
- Question: Can WinC-MAPF maintain completeness guarantees with bounded suboptimal action generators (AGs) instead of optimal ones?
- Basis in paper: [explicit] The authors state that completeness is only proven for optimal AGs and conjecture that future work could relax this assumption to allow bounded suboptimal AGs.
- Why unresolved: The paper only proves completeness for optimal AGs, leaving open the question of whether bounded suboptimal AGs can still guarantee completeness.
- What evidence would resolve it: A formal proof showing that WinC-MAPF remains complete with AGs that are bounded suboptimal, or counterexamples demonstrating cases where bounded suboptimal AGs lead to incompleteness.

### Open Question 2
- Question: How does the performance of SS-CBS scale when planning for horizons longer than a single step (W > 1)?
- Basis in paper: [inferred] The authors mention that SS-CBS plans only a single step and that future work could generalize SS-CBS to work on longer horizons.
- Why unresolved: The paper focuses on SS-CBS with W = 1, leaving the performance and completeness implications of longer horizons unexplored.
- What evidence would resolve it: Experimental results comparing SS-CBS with W > 1 against existing methods, along with theoretical analysis of how longer horizons affect completeness and efficiency.

### Open Question 3
- Question: Can WinC-MAPF and SS-CBS effectively handle scenarios where the single-agent heuristic is not perfect?
- Basis in paper: [explicit] The authors note that SS-CBS requires a perfect single-agent heuristic and suggest that future work could relax this assumption.
- Why unresolved: The paper assumes a perfect backward Dijkstra heuristic for each agent, which may not hold in all scenarios.
- What evidence would resolve it: Experiments testing SS-CBS with imperfect heuristics (e.g., learned heuristics or bounded suboptimal heuristics) and analysis of how heuristic inaccuracies impact performance and completeness.

## Limitations

- The framework assumes optimal action generators, which may be computationally expensive and not scale to large agent groups
- Completeness proof relies on specific conditions about the action generator that may not hold in all practical scenarios
- Heuristic conflict handling introduces complexity that could lead to suboptimal solutions if not implemented precisely

## Confidence

- High confidence: The framework's theoretical foundation and completeness proof under stated conditions
- Medium confidence: SS-CBS's practical performance compared to windowed CBS based on reported experiments
- Low confidence: Scalability claims to large agent groups and dense scenarios without additional computational evidence

## Next Checks

1. Verify the correctness of the heuristic conflict and constraint implementation by testing on small, controlled scenarios where optimal solutions are known
2. Measure the computational overhead of SS-CBS compared to standard CBS on scenarios with varying agent densities to assess scalability
3. Test the framework's behavior when the action generator fails to find the optimal windowed action, to understand how robust the completeness guarantee is to practical implementation limitations