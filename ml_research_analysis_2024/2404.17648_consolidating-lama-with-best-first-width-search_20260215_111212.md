---
ver: rpa2
title: Consolidating LAMA with Best-First Width Search
arxiv_id: '2404.17648'
source_url: https://arxiv.org/abs/2404.17648
tags:
- lama
- planning
- planner
- search
- bfws
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper investigates combining two agile planners, LAMA and
  Best-First Width Search (BFWS), to improve performance. LAMA uses open-list alternation,
  while BFWS explores novel states using novelty measures.
---

# Consolidating LAMA with Best-First Width Search

## Quick Facts
- **arXiv ID**: 2404.17648
- **Source URL**: https://arxiv.org/abs/2404.17648
- **Reference count**: 25
- **Primary result**: Combining simplified versions of LAMA and BFWS planners achieves state-of-the-art performance in agile planning

## Executive Summary
This paper investigates combining two agile planners, LAMA and Best-First Width Search (BFWS), to improve performance. LAMA uses open-list alternation, while BFWS explores novel states using novelty measures. The authors initially tried adding BFWS's strongest open-list to LAMA but found it harmful. Through an ablation study, they identified that removing certain open-lists and features from both planners significantly improves performance. The resulting planner, NOLAN, achieves state-of-the-art results in agile planning, with a 13% higher IPC agile score than the second-best method. NOLAN solves more tasks than LAMA in most domains, demonstrating the effectiveness of combining and simplifying features from both planners.

## Method Summary
The authors implemented LAMA-W(f6) by adding BFWS(f6)'s tiebreaking open-list to LAMA's open-list alternation. They then performed systematic ablation studies by removing subsets of open-lists and features to identify the optimal configuration. The final NOLAN planner uses a simplified open-list structure [hFF, hFF+, hLM+, f hLM²], combining elements from both planners while removing redundant components. Experiments were conducted on 2426 tasks from IPCs (1998-2023) using 5-minute time limits and 8 GiB memory per task.

## Key Results
- NOLAN achieves a 13% higher IPC agile score than the second-best method
- NOLAN solves more tasks than LAMA in most domains
- The optimal configuration removes entire open-lists from LAMA and simplifies BFWS's tiebreaking structure

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Removing entire open-lists from LAMA and simplifying BFWS's tiebreaking open-list leads to a more efficient exploration-exploitation balance
- Mechanism: The original LAMA-W(f6) combination introduces redundancy and inefficiency by processing similar information (hFF, hLM, preferred operators) in incompatible ways. Simplifying to [hFF, hFF+, hLM+, f hLM²] reduces unnecessary expansions
- Core assumption: Simpler open-list structures with fewer tie-breakers are more effective when underlying information sources overlap
- Evidence anchors: Abstract states combining "only parts" leads to state-of-the-art results; ablation study shows simpler approaches have better coverage

### Mechanism 2
- Claim: Using hLM in novelty open-lists is consistently superior to hFF for guiding search
- Mechanism: hLM (landmark heuristic) provides more informed estimates of distance to goal compared to hFF, prioritizing states that are novel and closer to achieving important subgoals
- Core assumption: hLM is more informative than hFF for guiding search in tested domains
- Evidence anchors: Abstract mentions combining novelty measures with heuristic estimates; ablation study shows consistent superiority of hLM-based novelty

### Mechanism 3
- Claim: Alternation between [hFF, hFF+, hLM+, f hLM²] provides better exploration-exploitation balance than original LAMA
- Mechanism: Replacing hLM with f hLM² (combining novelty and hLM) while keeping preferred operator queues achieves better balance than original structure
- Core assumption: This specific open-list alternation provides optimal balance for tested domains
- Evidence anchors: Abstract confirms combining parts leads to state-of-the-art planner; ablation study identifies this configuration as optimal

## Foundational Learning

- **Novelty search and BFWS**: Understanding how novelty search and BFWS work is crucial for understanding the paper's contribution. The paper combines LAMA and BFWS, so a clear understanding of both planners is necessary.
  - *Why needed*: The paper's main contribution is combining these two approaches
  - *Quick check*: What is the novelty of a state in BFWS, and how does it differ from the heuristic value used in greedy best-first search?

- **Open-list alternation and tiebreaking**: The paper's main contribution is combining LAMA's alternation open-list with BFWS's tiebreaking open-list
  - *Why needed*: Understanding how these two approaches work and their differences is essential for understanding the paper's results
  - *Quick check*: How does open-list alternation differ from tiebreaking in heuristic search, and what are the advantages and disadvantages of each approach?

- **Landmarks and hLM heuristic**: The paper uses hLM (landmark heuristic) in the novelty open-list, and the resulting planner is called NOLAN (Novelty, Landmarks, and Alternation)
  - *Why needed*: Understanding what landmarks are and how hLM works is crucial for understanding the paper's contribution
  - *Quick check*: What are landmarks in classical planning, and how does the hLM heuristic estimate the distance to the goal using landmarks?

## Architecture Onboarding

- **Component map**: LAMA -> BFWS -> NOLAN
- **Critical path**: The search algorithm alternates between four open-lists [hFF, hFF+, hLM+, f hLM²], expanding states based on their priority in each open-list. The novelty-based open-list (f hLM²) guides search towards novel states, while other open-lists exploit preferred operators and different heuristics.
- **Design tradeoffs**: The main tradeoff is balancing exploration and exploitation. The simplified structure aims to reduce redundancy and improve efficiency but may reduce ability to handle certain domains.
- **Failure signatures**: NOLAN may fail in domains with very large state spaces and many hLM values due to memory overhead of maintaining novelty bit vectors. It may perform poorly where hLM is less informative than hFF, or where different exploration-exploitation balance is required.
- **First 3 experiments**:
  1. Compare NOLAN with LAMA and BFWS(f6) on diverse IPC domains measuring coverage, expansions, and agile scores
  2. Analyze effect of removing different subsets of LAMA's open-lists from NOLAN to identify most essential components
  3. Compare NOLAN with other state-of-the-art agile planners (GBFS-RSL, Dual-BFWS, OLCFF) on same IPC domains

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How does the memory bottleneck in VisitAll tasks affect scalability of novelty-based planners, and what strategies can mitigate this issue?
- Basis in paper: Authors mention VisitAll tasks have huge numbers of facts and different hLM values, leading to high memory usage for storing seen fact tuples
- Why unresolved: Paper identifies the problem but doesn't provide detailed solution or strategy to address the memory bottleneck
- What evidence would resolve it: Evidence of successful memory optimization techniques or alternative data structures that reduce memory usage in VisitAll tasks

### Open Question 2
- Question: What are the potential benefits and drawbacks of combining NOLAN with other exploration techniques?
- Basis in paper: Authors suggest combining NOLAN with other exploration techniques is a potential area for future work
- Why unresolved: Paper doesn't explore or provide results on combinations with other exploration techniques
- What evidence would resolve it: Empirical results comparing performance of NOLAN with and without integration of other exploration techniques

### Open Question 3
- Question: How do NOLAN's results compare to other state-of-the-art planners in handling larger and more complex planning tasks?
- Basis in paper: Authors state NOLAN has higher coverage and agile score than evaluated planners but don't provide detailed comparison for larger and more complex tasks
- Why unresolved: Paper focuses on overall performance but doesn't delve into specific comparisons for larger and more complex tasks
- What evidence would resolve it: Detailed performance metrics and comparisons of NOLAN against other planners on diverse set of larger and more complex planning tasks

## Limitations

- The improvements come from ablation studies on a specific combined planner rather than systematic exploration of all possible combinations
- Performance gains are measured primarily on IPC domains excluding those with derived predicates
- The specific configuration identified as optimal may be somewhat fortuitous rather than theoretically justified

## Confidence

- **High confidence**: Core finding that combining LAMA and BFWS components can improve performance over individual planners
- **Medium confidence**: Claim that hLM-based novelty search is consistently superior to hFF-based novelty search
- **Medium confidence**: Identification of optimal open-list alternation as superior to LAMA's original structure

## Next Checks

1. Test NOLAN on domains with derived predicates and larger state spaces to evaluate robustness beyond the IPC benchmark
2. Conduct more systematic exploration of the space of possible open-list combinations to verify the identified configuration is truly optimal
3. Implement the same ablation studies on different base planners to determine if findings generalize to other planner architectures