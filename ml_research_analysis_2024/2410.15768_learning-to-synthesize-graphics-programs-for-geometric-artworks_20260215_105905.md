---
ver: rpa2
title: Learning to Synthesize Graphics Programs for Geometric Artworks
arxiv_id: '2410.15768'
source_url: https://arxiv.org/abs/2410.15768
tags:
- program
- image
- graphics
- programs
- sequence
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper presents Art2Prog, a novel program synthesis approach
  that generates executable graphics programs from input images. The method treats
  drawing tools as programs and predicts sequences of drawing commands to reconstruct
  complex geometric artwork.
---

# Learning to Synthesize Graphics Programs for Geometric Artworks

## Quick Facts
- arXiv ID: 2410.15768
- Source URL: https://arxiv.org/abs/2410.15768
- Authors: Qi Bing; Chaoyi Zhang; Weidong Cai
- Reference count: 32
- One-line primary result: Art2Prog achieves IoU rgba of 0.9733 on geometric artwork vectorization, outperforming existing methods.

## Executive Summary
This paper presents Art2Prog, a novel program synthesis approach that generates executable graphics programs from input images. The method treats drawing tools as programs and predicts sequences of drawing commands to reconstruct complex geometric artwork. Art2Prog introduces a domain-specific language (DSL) that emulates artists' workflows and employs a GPT-2-based architecture with ResNet image encoder. The model is trained on millions of synthetically generated examples and achieves state-of-the-art reconstruction accuracy on vectorization tasks.

## Method Summary
Art2Prog uses a GPT-2-based architecture with a ResNet image encoder to synthesize graphics programs from images. The approach tokenizes graphics programs into sequences that can be decoded to generate executable programs. It defines a colored graphics program DSL that emulates an artist's workflow, comprising overlapping layers with drawing commands and color blending modes. The model is trained on synthetically generated data using cross-entropy loss and employs greedy search during inference to generate programs that can be executed to reconstruct input images.

## Key Results
- Achieves IoU rgba of 0.9733 on held-out test set, significantly outperforming baseline methods like LIVE (0.8513) and REPL
- Produces high-quality, resolution-independent vector graphics that can be understood and edited by humans
- Demonstrates superior performance on both synthetic geometric artwork and hand-drawn geometric artwork datasets

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Art2Prog treats drawing tools as executable programs, predicting a sequence of drawing commands to reconstruct complex geometric artwork.
- Mechanism: The system tokenizes graphics programs into sequences that can be decoded to generate executable graphics programs. It employs a GPT-2-based architecture with ResNet image encoder to learn the probability distribution of the tokenized program sequence.
- Core assumption: The drawing process can be effectively captured as a sequence of discrete commands that, when executed, will reproduce the target image.
- Evidence anchors:
  - [abstract] "treats a set of drawing tools as executable programs. This method predicts a sequence of steps to achieve the final image"
  - [section] "We develop Art2Prog, a novel GPT-2 based program synthesizer for generating colored graphics programs from a single input image"
  - [corpus] No direct corpus evidence supporting this specific mechanism, though related work on graphics program synthesis exists
- Break condition: If the image contains elements that cannot be decomposed into the defined set of drawing commands, or if the sequential nature of the program cannot capture necessary parallel operations.

### Mechanism 2
- Claim: The approach introduces a domain-specific language (DSL) that emulates artists' workflows with commands for creating layers, drawing lines and shapes, filling colors, and applying blending modes.
- Mechanism: The DSL provides a structured way to represent the drawing process, with commands for creating layers, drawing shapes, filling colors, and combining layers with blending modes. This allows the system to generate programs that are both executable and semantically meaningful.
- Core assumption: The defined DSL adequately captures the essential operations needed to represent the drawing process for geometric artworks.
- Evidence anchors:
  - [abstract] "introduces a domain-specific language (DSL) that emulates artists' workflows with commands for creating layers, drawing lines and shapes, filling colors, and applying blending modes"
  - [section] "We define a colored graphics program that emulates an artist's workflow... comprising several overlapping layers, each utilizing one of two distinct color blending modes"
  - [corpus] Weak evidence - the corpus contains related work on graphics program synthesis but not specifically on this DSL design
- Break condition: If the DSL lacks necessary commands to represent certain artistic techniques, or if the two-layer blending modes are insufficient for complex compositions.

### Mechanism 3
- Claim: Art2Prog achieves state-of-the-art reconstruction accuracy by directly synthesizing programs from image input without relying on differentiable rasterization.
- Mechanism: Unlike optimization-based methods, Art2Prog uses a trained program synthesizer to generate programs directly from images, which are then executed to reconstruct the image. This avoids the need for differentiable rasterization during training.
- Core assumption: A trained model can learn to map image features to program sequences without needing to backpropagate through a rasterization process.
- Evidence anchors:
  - [abstract] "Our experiments demonstrate that our program synthesizer, Art2Prog, can comprehensively understand complex input images and reproduce them using high-quality executable programs"
  - [section] "Different from most existing vectorization approaches, Art2Prog does not rely on differentiable rasterization. Instead, we directly synthesize a program from the image input"
  - [corpus] Moderate evidence - corpus contains related work on program synthesis and image vectorization that supports this general approach
- Break condition: If the mapping from image to program becomes too complex for the model to learn accurately, or if the lack of differentiable rasterization during training limits the model's ability to optimize program quality.

## Foundational Learning

- Concept: Domain-specific languages (DSLs) for graphics programming
  - Why needed here: The DSL provides the vocabulary and grammar for expressing drawing operations in a way that both the model can learn and humans can understand
  - Quick check question: Can you explain how the Create, Straight, Circle, and Fillcolor commands work together to build up a complex shape?

- Concept: Tokenization strategies for program synthesis
  - Why needed here: Tokenizing the graphics program allows the GPT-2 model to process it as a sequence, enabling sequence-to-sequence learning
  - Quick check question: How does the tokenization handle the hierarchical structure of the graphics program (layers containing drawing commands)?

- Concept: Image-to-program mapping in deep learning
  - Why needed here: This is the core challenge - learning to map image features to program sequences that can reconstruct the image when executed
  - Quick check question: What role does the ResNet encoder play in this mapping, and how does it interact with the GPT-2 decoder?

## Architecture Onboarding

- Component map:
  Input: 64×64 RGBA image -> ResNet-18 features -> GPT-2 decoder -> Token prediction -> Program update -> Non-differentiable rasterizer -> Intermediate image -> Repeat until 'ENDING' token

- Critical path:
  1. Image → ResNet features
  2. Features + partial program → GPT-2 prediction
  3. Predicted token → Program update
  4. Program execution → Intermediate image
  5. Repeat until 'ENDING' token

- Design tradeoffs:
  - Fixed vs. variable program length: Using 'ENDING' token allows variable-length programs but requires more complex inference
  - Two blending modes vs. more: Limits complexity but may not capture all artistic techniques
  - Non-differentiable rasterizer: Simplifies training but prevents end-to-end optimization

- Failure signatures:
  - Program fails to converge (no 'ENDING' token reached)
  - Generated program produces visually dissimilar output
  - Model overfits to training data (poor generalization)
  - Inference time exceeds timeout threshold

- First 3 experiments:
  1. Ablation study: Replace ResNet with simpler CNN encoder to measure impact on reconstruction accuracy
  2. Quantitative comparison: Measure IoU rgba improvement over LIVE and REPL on held-out test set
  3. Qualitative analysis: Visualize failure cases to understand limitations in handling complex layer compositions

## Open Questions the Paper Calls Out
The paper explicitly mentions that future work could extend the current DSL to a broader range of more complex graphics beyond the simplified geometric artwork currently handled. This indicates an open question about the model's ability to handle more sophisticated artistic scenarios and whether the current architecture can be extended to support these more complex cases.

## Limitations
- The current DSL is highly simplified compared to existing drawing software and may not capture all artistic techniques
- The model relies on synthetic data generation, which may not fully capture the complexity and variability of real-world artistic workflows
- The approach is limited to geometric artwork and has not been validated on more complex, real-world graphics

## Confidence

**High Confidence:**
- The core architectural design (ResNet + GPT-2) and the use of a DSL for graphics program synthesis are well-established approaches in the literature, supported by the experimental results showing significant improvements over baseline methods

**Medium Confidence:**
- The claim that programs can be "understood and edited by humans" is supported by the design of the DSL but lacks empirical validation through user studies or examples of human interaction with generated programs

**Low Confidence:**
- The scalability claims to more complex artistic scenarios (beyond geometric artwork) are not substantiated by experiments, as the evaluation focuses exclusively on synthetically generated geometric data

## Next Checks

1. **Generalization Test**: Evaluate Art2Prog on a dataset of real artist-created geometric artwork to assess performance degradation when moving from synthetic to real-world data.

2. **Human Evaluation**: Conduct a user study where artists attempt to modify generated programs to make small changes to the artwork, measuring the ease of understanding and editing.

3. **DSL Extension**: Implement additional blending modes and complex drawing primitives (e.g., curves, gradients) and measure the impact on reconstruction accuracy for more complex artwork types.