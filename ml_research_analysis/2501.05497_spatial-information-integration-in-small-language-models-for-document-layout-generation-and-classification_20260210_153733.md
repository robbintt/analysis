---
ver: rpa2
title: Spatial Information Integration in Small Language Models for Document Layout
  Generation and Classification
arxiv_id: '2501.05497'
source_url: https://arxiv.org/abs/2501.05497
tags:
- information
- layout
- document
- bounding
- data
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the scarcity of public datasets for training
  machine learning models on semi-structured documents like receipts. The authors
  propose a method using small language models (SLMs) to generate synthetic layout
  data, overcoming data limitations.
---

# Spatial Information Integration in Small Language Models for Document Layout Generation and Classification

## Quick Facts
- arXiv ID: 2501.05497
- Source URL: https://arxiv.org/abs/2501.05497
- Authors: Pablo Melendez; Clemens Havas
- Reference count: 40
- Primary result: Small language models trained on synthetic layout data achieve better bounding box accuracy than LayoutTransformer on receipt documents

## Executive Summary
This paper addresses the challenge of limited public datasets for training machine learning models on semi-structured documents like receipts. The authors propose using small language models (SLMs) to generate synthetic layout data, which overcomes data scarcity issues. They demonstrate that fine-tuning Llama3-8B on just 107 annotated receipt documents achieves superior performance compared to the LayoutTransformer baseline in terms of bounding box area size and inter-label dimensions. The study also explores text classification using SLMs with spatial information, finding that while adding bounding box coordinates improves BERT accuracy by 12%, the same spatial information does not significantly impact SLM accuracy through few-shot prompting.

## Method Summary
The authors employ a two-pronged approach to address document layout generation and classification challenges. First, they generate synthetic layout data using small language models to overcome the scarcity of annotated receipt datasets. The Llama3-8B model is fine-tuned on a small dataset of 107 annotated receipt documents. For text classification, they compare BERT with and without spatial coordinates (bounding box information) and test few-shot prompting with SLMs. The spatial information integration involves adding bounding box coordinates to the input features for BERT and incorporating them into few-shot prompts for SLMs. Performance is evaluated using standard metrics for bounding box accuracy and text classification accuracy.

## Key Results
- Llama3-8B fine-tuned on 107 receipt documents outperforms LayoutTransformer baseline in bounding box area size and inter-label dimensions
- Adding bounding box coordinates to BERT improves text classification accuracy by 12%
- Few-shot prompting with spatial information in SLMs does not significantly improve accuracy compared to standard prompting

## Why This Works (Mechanism)
The synthetic data generation approach works because small language models can learn to generate realistic document layouts from limited training examples, effectively augmenting the training data. By fine-tuning on 107 annotated receipts, the models learn the spatial relationships and layout patterns typical of receipts. The spatial information improves BERT's performance because the model can leverage positional context to better distinguish between text elements that might have similar content but different roles based on their location. However, the lack of improvement with SLMs using few-shot prompting suggests that current prompting strategies may not effectively utilize spatial information or that SLMs have different architectural limitations compared to BERT when processing spatial features.

## Foundational Learning
1. **Synthetic data generation for document layout**: Creating artificial training data when real annotated data is scarce. Needed to address the data limitation problem in receipt document processing. Quick check: Verify generated layouts follow realistic receipt structure patterns.
2. **Bounding box coordinate integration**: Incorporating spatial position information (x, y, width, height) into model inputs. Needed to provide spatial context for text classification. Quick check: Ensure coordinates are normalized and relative to document dimensions.
3. **Few-shot prompting**: Providing examples within prompts to guide model behavior with limited training data. Needed to test spatial information integration in SLMs without extensive fine-tuning. Quick check: Verify prompt format consistency across experiments.
4. **Layout generation metrics**: Evaluating generated layouts using bounding box area size and inter-label dimensions. Needed to quantify layout quality beyond simple pixel accuracy. Quick check: Confirm metric calculations align with established standards.
5. **Document layout structure**: Understanding typical receipt organization (header, items, totals, footer). Needed to generate realistic synthetic data and evaluate model outputs. Quick check: Compare generated layouts against real receipt templates.

## Architecture Onboarding

### Component Map
SLM Synthetic Data Generator -> Fine-tuning Pipeline -> Llama3-8B -> Layout Generation Model
BERT Classifier <- Spatial Coordinates <- Bounding Box Extractor

### Critical Path
1. Generate synthetic layout data using SLM
2. Fine-tune Llama3-8B on synthetic + real data (107 receipts)
3. Evaluate layout generation performance vs. LayoutTransformer
4. Extract bounding box coordinates from documents
5. Train/test BERT with and without spatial coordinates
6. Test SLM performance with few-shot spatial prompting

### Design Tradeoffs
The choice of using a small dataset (107 documents) prioritizes demonstrating effectiveness with limited data over achieving state-of-the-art performance on large datasets. Using Llama3-8B instead of larger models balances computational efficiency with sufficient model capacity. The decision to compare with LayoutTransformer provides a reasonable baseline but may not represent the most competitive contemporary approaches. The mixed results between BERT and SLM spatial integration suggest that different architectures may require different strategies for incorporating spatial information.

### Failure Signatures
Poor synthetic data quality would manifest as unrealistic layouts with incorrect spatial relationships between elements. BERT performance degradation with spatial coordinates could indicate improper coordinate normalization or feature scaling issues. SLM performance not improving with spatial few-shot prompting might suggest prompt engineering problems or architectural limitations in processing spatial features. Layout generation errors would appear as bounding boxes that are too large, too small, or incorrectly positioned relative to text elements.

### First 3 Experiments
1. Generate 1,000 synthetic receipt layouts using SLM and qualitatively assess realism
2. Fine-tune Llama3-8B on the 107 receipt dataset and measure bounding box accuracy improvements
3. Train BERT with and without normalized bounding box coordinates on a subset of receipts and compare classification accuracy

## Open Questions the Paper Calls Out
None specified in the provided content.

## Limitations
- Evaluation conducted on only 107 annotated receipt documents, limiting generalizability to other document types
- Comparison with LayoutTransformer lacks ablation studies and doesn't include more recent layout generation methods
- Text classification experiments have limited scope, testing only BERT and few-shot prompting without exploring alternative architectures or prompting strategies
- The discrepancy between BERT's improvement with spatial coordinates and SLM's lack of improvement raises questions about spatial information integration effectiveness

## Confidence
- Synthetic data generation using SLMs: High
- Layout generation performance vs. LayoutTransformer: Medium
- Spatial information integration in text classification: Medium

## Next Checks
1. Test the synthetic data generation approach on multiple document types (invoices, forms, contracts) beyond receipts to assess generalizability
2. Conduct extensive ablation studies comparing different spatial information integration methods (coordinate normalization, relative positioning, multi-modal embeddings) across various SLM architectures
3. Evaluate model performance on larger, more diverse real-world datasets with hundreds or thousands of annotated documents to verify scalability and robustness of the approach