---
ver: rpa2
title: Demonstration of effective UCB-based routing in skill-based queues on real-world
  data
arxiv_id: '2506.20543'
source_url: https://arxiv.org/abs/2506.20543
tags:
- algorithm
- customer
- payoff
- routing
- server
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper presents a modified UCB-based reinforcement learning
  algorithm for skill-based queueing systems, validated on real-world call center
  data. The algorithm learns optimal routing policies to maximize payoff (matching
  quality) while adapting to time-varying arrival rates and service capacities.
---

# Demonstration of effective UCB-based routing in skill-based queues on real-world data

## Quick Facts
- arXiv ID: 2506.20543
- Source URL: https://arxiv.org/abs/2506.20543
- Authors: Sanne van Kempen; Jaron Sanders; Fiona Sloothaak; Maarten G. Wolf
- Reference count: 37
- Primary result: Modified UCB-based reinforcement learning algorithm achieves over 70% improvement in payoff accumulation compared to static benchmarks on real-world call center data

## Executive Summary
This paper presents a modified UCB-based reinforcement learning algorithm for skill-based queueing systems, validated on real-world call center data. The algorithm learns optimal routing policies to maximize payoff (matching quality) while adapting to time-varying arrival rates and service capacities. Compared to static benchmarks like FCFS-ALIS and Greedy, the method achieves over 70% improvement in payoff accumulation and maintains stable performance across varying load conditions. A new heuristic routing rule significantly reduces customer waiting times while preserving high payoffs.

## Method Summary
The method uses Upper Confidence Bound (UCB) estimators for each customer-server pair to balance exploration and exploitation when learning unknown payoff parameters. At each episode, a linear program computes optimal routing rates that maximize expected payoff while enforcing stability constraints. The algorithm employs either virtual queues or a tree-based heuristic routing rule to execute decisions. Parameter estimators use UCB for payoffs, Holt's linear trend for arrivals, and empirical means for service rates. The approach is validated on a U.S. bank call center dataset spanning three months with 17 customer types and 47 agent groups.

## Key Results
- UCB-QR achieves over 70% improvement in cumulative payoff compared to static benchmarks
- Tree-based heuristic routing reduces customer waiting times by ~2× while maintaining near-optimal payoffs
- Algorithm maintains stable performance across varying load conditions with 0.7-1% loss versus oracle
- Successfully balances multiple objectives including payoff, fairness, and load balancing
- Computational complexity is comparable to static policies, making it practical for real-world implementation

## Why This Works (Mechanism)

### Mechanism 1
- Claim: UCB estimators enable efficient exploration-exploitation trade-offs when learning unknown payoff parameters across customer-server pairs.
- Mechanism: The algorithm maintains Upper Confidence Bound (UCB) estimators for each compatible line (ij), combining the empirical mean payoff θ̄ij with an exploration bonus √(ln(k)/Tij(k)). Lines with fewer samples receive larger bonuses, encouraging exploration of under-sampled connections while exploiting high-performing matches.
- Core assumption: Payoffs follow Bernoulli distributions with stationary (or slowly-varying) means θij ∈ [0,1].
- Evidence anchors: [Section 2, Eq. 5]: "ˆθij(k) = θ̄ij(k) + √(ln(k)/Tij(k)) if Tij(k) > 0"; [Section 1]: "integrates multi-armed bandit techniques and Upper Confidence Bounds (UCB) estimators"

### Mechanism 2
- Claim: A linear programming formulation computes optimal routing rates that maximize expected payoff while enforcing stability constraints.
- Mechanism: At each episode, Algorithm 1 solves LP(λ̂, μ̂, θ̂, ε) to determine routing rates xij. The objective maximizes ∑θij·xij subject to: (1b) all customers routed somewhere, and (1c) server load ∑xij/μij ≤ 1−ε. This couples payoff maximization with queue stability.
- Core assumption: Arrival and service rate estimates are sufficiently accurate; the LP remains feasible under true parameters.
- Evidence anchors: [Section 2, Eq. 1a-1c]: Full LP specification with objective and constraints; [Section 4.1]: "UCB–QR performs closely to the Oracle across all days"

### Mechanism 3
- Claim: A tree-based heuristic routing rule (Algorithm 3) approximates target routing rates while reducing customer waiting times compared to the virtual queue approach.
- Mechanism: Algorithm 3 exploits the spanning forest structure of LP solutions. Upon service completion, servers prioritize child queues before parent queues in the forest. This maintains approximate routing rates while enabling FCFS behavior within customer types, eliminating virtual queue reshuffling delays.
- Core assumption: The LP solution induces a valid spanning forest; approximate convergence to target rates is acceptable.
- Evidence anchors: [Section 4.2, Figure 10]: "UCB–QR–Tree achieves waiting times almost as low as those of FCFS–ALIS"

## Foundational Learning

- Concept: **Multi-armed bandit fundamentals (UCB, regret, exploration-exploitation)**
  - Why needed here: UCB–QR treats each customer-server line as a bandit arm; understanding why the exploration bonus shrinks as samples accumulate is essential.
  - Quick check question: If Tij(k) = 10 and k = 100, what is the UCB bonus term? (Answer: √(ln(100)/10) ≈ 0.46)

- Concept: **Linear programming feasibility and basic feasible solutions**
  - Why needed here: The algorithm's core computes BFSs; understanding why infeasibility triggers the fallback LPa is critical for debugging.
  - Quick check question: What happens if total arrival rate exceeds total service capacity? (Answer: LP (1) becomes infeasible; LPa (2) routes excess to the fictitious rejection server)

- Concept: **Queueing stability (utilization ρ < 1)**
  - Why needed here: Constraint (1c) ensures ρj ≤ 1−ε for stability; violating this causes unbounded queue growth.
  - Quick check question: Why does the LP include ε > 0 rather than allowing ρj = 1? (Answer: Ensures strict stability margin; prevents theoretical divergence under estimation errors)

## Architecture Onboarding

- Component map: Parameter Estimators -> LP Solver -> Routing Engine -> Episode Controller

- Critical path:
  1. Episode begins → update λ̂, μ̂, θ̂ from accumulated samples
  2. Solve LP(λ̂, μ̂, θ̂, ε) → obtain routing rates x*
  3. Execute routing via Algorithm 2 or 3 for duration h
  4. Collect payoff samples → update estimators → repeat

- Design tradeoffs:
  - **Episode length h**: Shorter episodes increase reactivity to arrival rate changes but raise computational overhead. Paper finds h = 2–10 minutes balances both (Table 4).
  - **Routing algorithm choice**: Algorithm 2 guarantees exact rate matching but higher delays; Algorithm 3 reduces delays ~2× but only approximates rates.
  - **Objective augmentation**: Adding fairness/latency terms (Eq. 11) improves secondary metrics but slightly reduces payoff (Figure 12).

- Failure signatures:
  - **High waiting times with overestimated μ̂**: If service rate estimators are initialized too high, the LP over-allocates to congested servers (Figure 16).
  - **Slow recovery after burst**: UCB–QR focuses on long-term optimization; sudden surges cause delayed waiting-time recovery compared to FCFS–ALIS (Section 4.4).
  - **LP infeasibility loops**: If arrival forecasts consistently exceed capacity, the fallback LPa repeatedly activates; check λ̂ calibration and α/β smoothing parameters.

- First 3 experiments:
  1. **Baseline validation**: Run UCB–QR on June 2001 data with h = 2 min, ε = 10⁻⁶; compare cumulative payoff to Oracle, Greedy, and FCFS–ALIS. Expected: 99%+ of Oracle payoff (Figure 5).
  2. **Routing rule comparison**: Run UCB–QR (Algorithm 2) vs. UCB–QR–Tree (Algorithm 3) on same data; measure waiting time reduction. Expected: Algorithm 3 achieves near-FCFS–ALIS waiting times with <1% payoff loss (Figure 10).
  3. **Sensitivity test**: Vary episode length h ∈ {1, 2, 5, 10, 20} minutes; plot waiting time vs. payoff tradeoff. Expected: h > 10 min causes significant waiting time spikes during traffic transitions (Figure 17).

## Open Questions the Paper Calls Out

### Open Question 1
- Question: Does the heuristic Tree-based routing rule (Algorithm 3) provably converge to the optimal routing rates $x_{ij}$ derived from the Linear Program?
- Basis in paper: [explicit] Section 4.2 states, "A theoretical analysis of the empirical routing rates remains a direction for future work" and notes that empirical rates converge close to, but not exactly to, target rates.
- Why unresolved: While simulations show approximate convergence, the authors provide a counter-example in Appendix D where empirical rates do not match the analytical solution exactly due to the structure of the spanning forest.
- What evidence would resolve it: A formal proof establishing bounds on the convergence error of Algorithm 3 or a modification of the algorithm that guarantees exact convergence.

### Open Question 2
- Question: How can UCB-QR be adapted to recover more quickly from customer surges or bursty arrival processes?
- Basis in paper: [explicit] Section 4.4 observes that UCB-QR-Tree recovers to pre-surge waiting times significantly slower than benchmark policies and concludes, "further research [is] required."
- Why unresolved: The current episodic update mechanism and rate estimators react too slowly to sudden, large deviations in arrival volume, causing the algorithm to optimize for outdated system states during the surge.
- What evidence would resolve it: A modified algorithm (e.g., using event-based updates or adaptive smoothing parameters) that demonstrates recovery times comparable to static benchmarks like FCFS-ALIS during simulated bursty scenarios.

### Open Question 3
- Question: Can the UCB-QR framework maintain stability and performance guarantees in systems with customer abandonments?
- Basis in paper: [explicit] Section 5 lists "considering applications with customer abandonments" as a primary direction for future research.
- Why unresolved: The current model and simulation setup explicitly neglect abandonments (assuming them to be rare in the specific dataset used), despite them being a fundamental feature of many real-world queueing systems.
- What evidence would resolve it: Theoretical analysis or simulation results showing that UCB-QR effectively balances payoff maximization with abandonment minimization without becoming unstable.

## Limitations

- Data generalization uncertainty: Algorithm's behavior in domains with extreme burstiness or non-stationary payoff distributions remains untested
- Computational scalability: Performance degradation at larger scales (thousands of types) is not reported
- Fairness metric limitations: Focus on server utilization equality doesn't address customer-type-specific waiting time equity

## Confidence

- **High confidence**: Payoff optimization mechanism (UCB estimators + LP routing), Algorithm 2 and 3 routing implementation, basic stability under normal loads
- **Medium confidence**: Multi-objective extensions (fairness/latency trade-offs), robustness to parameter estimation errors, performance under extreme load conditions
- **Low confidence**: Behavior in non-stationary environments with rapid payoff distribution changes, scalability to large-scale systems

## Next Checks

1. **Robustness test**: Evaluate UCB-QR performance when arrival rates have sudden 50% spikes or drops, measuring recovery time and payoff stability compared to static baselines.

2. **Multi-objective stress test**: Implement the extended objective (Eq. 11) with varying weights on fairness vs. payoff; quantify the Pareto frontier and identify breaking points where fairness improvements severely compromise payoff.

3. **Real-world deployment simulation**: Create a synthetic environment mimicking actual call center operations including agent breaks, training periods, and multi-skill requirements; measure practical implementation challenges beyond theoretical guarantees.