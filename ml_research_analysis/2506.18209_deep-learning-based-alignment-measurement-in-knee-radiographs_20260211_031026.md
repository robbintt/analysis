---
ver: rpa2
title: Deep Learning-based Alignment Measurement in Knee Radiographs
arxiv_id: '2506.18209'
source_url: https://arxiv.org/abs/2506.18209
tags:
- knee
- measurements
- radiographs
- post-operative
- clinical
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This study proposes a deep learning-based method for automated
  knee alignment (KA) measurement in anteroposterior (AP) knee radiographs using automatically
  localized knee anatomical landmarks. The method employs hourglass networks with
  attention gates to robustly localize over 100 knee landmarks, fully outlining knee
  shape.
---

# Deep Learning-based Alignment Measurement in Knee Radiographs

## Quick Facts
- arXiv ID: 2506.18209
- Source URL: https://arxiv.org/abs/2506.18209
- Reference count: 21
- Method achieves ICC=0.97 pre-operatively and ICC=0.86 post-operatively for knee alignment measurement

## Executive Summary
This study presents a deep learning-based automated method for measuring knee alignment (KA) in anteroposterior knee radiographs. The approach uses hourglass networks with attention gates to localize over 100 anatomical landmarks, enabling geometric measurement of the anatomical tibiofemoral angle (aTFA). The system demonstrates excellent agreement with clinical ground truth measurements, particularly in pre-operative cases, and outperforms previous methods in landmark localization accuracy.

## Method Summary
The method employs a two-stage approach using stacked hourglass networks. A global search stage (4-layer hourglass) identifies two reference points to establish a reference frame, followed by a local search stage (6-layer hourglass with attention gates) that localizes 134 pre-operative or 181 post-operative landmarks within the normalized crop. The anatomical tibiofemoral angle is calculated using derived femoral and tibial axes from landmark subsets. The system was trained on 566 pre-operative and 457 post-operative images from Stockport NHS Foundation Trust.

## Key Results
- Achieved ICC=0.97 pre-operatively and ICC=0.86 post-operatively for KA measurement agreement
- Mean absolute differences around 1° compared to clinical ground truth
- Successfully localized over 100 knee landmarks per image
- Demonstrated better performance than previous landmark localization methods

## Why This Works (Mechanism)

### Mechanism 1
- **Claim:** Attention gates filter irrelevant background features, improving landmark localization robustness in cluttered radiographs.
- **Mechanism:** The hourglass network passes features through attention gate blocks that learn to suppress activations in irrelevant regions while amplifying salient anatomical features.
- **Core assumption:** Irrelevant features in the receptive field degrade the precision of heatmap regression for small anatomical landmarks.
- **Evidence anchors:** [abstract] "incorporates an attention gate structure to enhance robustness and focus on key anatomical features."

### Mechanism 2
- **Claim:** A two-stage, coarse-to-fine hierarchy stabilizes localization by normalizing input variance before precise detection.
- **Mechanism:** The Global Search (4-layer hourglass) first identifies two rough reference points, establishing a reference frame that standardizes scale and rotation. The Local Search (6-layer hourglass) operates only on this normalized crop to place 100+ fine-grained landmarks.
- **Core assumption:** The global anatomical context is sufficient to localize approximate reference points even when precise landmarks are ambiguous.
- **Evidence anchors:** [section] Page 4: "The global search aims to narrow down the search area... The local model searches in the more confined reference frame."

### Mechanism 3
- **Claim:** Dense landmark outlines enable reliable geometric measurement (aTFA) even if individual points have minor noise.
- **Mechanism:** By defining the anatomical tibiofemoral angle (aTFA) using derived axes from specific subsets of landmarks, the system calculates angles based on structural lines rather than single points.
- **Core assumption:** The axes derived from the fitted lines are less sensitive to pixel-level localization error than direct angle measurement.
- **Evidence anchors:** [section] Page 5: "FNTS fits a blue line to the femur by connecting a shaft center point... to a femoral notch point."

## Foundational Learning

- **Concept:** Stacked Hourglass Networks
  - **Why needed here:** The architecture relies on repeated bottom-up, top-down processing to capture features at different scales.
  - **Quick check question:** How does the network handle spatial resolution loss during the "bottom-up" encoding phase, and how is it restored?

- **Concept:** Wing Loss
  - **Why needed here:** Standard MSE can be insensitive to small localization errors. Wing loss emphasizes small errors, which is critical when aiming for ~1° angular precision.
  - **Quick check question:** Why would a loss function that penalizes small deviations more heavily than linear MSE be preferred for high-precision landmark regression?

- **Concept:** Spatial Transformation / Reference Frames
  - **Why needed here:** The system maps coordinates from a "local search" patch back to the original image space.
  - **Quick check question:** If the Global Search estimates a rotation of 15°, how is this transformation applied to the input of the Local Search, and how are the output coordinates inversely mapped?

## Architecture Onboarding

- **Component map:** Input: AP Knee Radiograph -> Global HG (Depth 4, Width 32): Finds 2 Reference Points -> Transform: Crop/Rotate to Reference Frame -> Local HG (Depth 6, Width 256) + Attention Gates: Predicts Heatmaps for 134 (pre-op) or 181 (post-op) landmarks -> Logic Layer: Calculates femoral/tibial axes from landmark subsets -> Computes aTFA

- **Critical path:** The Global Search initialization. If the two reference points are mislocalized, the Local Search crops the wrong area, and the entire pipeline fails.

- **Design tradeoffs:**
  - **FTS vs. FNTS:** FTS (Shaft points) is robust but potentially less sensitive to fine rotation; FNTS (Notch + Shaft) is more accurate generally but may degrade in post-operative cases where the notch is modified.
  - **Pre-op vs. Post-op models:** Separate models are trained due to the visual domain shift (bone vs. metal implant).

- **Failure signatures:**
  - **Post-operative drop in ICC (0.86 vs 0.97):** Suggests the model struggles with implant boundaries or altered anatomy.
  - **Systematic Bias (>1°):** May indicate a mismatch between the "clinical" ground truth and the "geometric" automated method.

- **First 3 experiments:**
  1. **Global Search Validation:** Run the 4-layer network on the test set and visualize the 2 reference points. Verify they consistently bracket the correct ROI before enabling the local stage.
  2. **Ablation on Attention Gates:** Train the Local Search with and without AG blocks. Compare rP2P errors to quantify the specific precision gain from attention.
  3. **Calculation Method Comparison:** Compute aTFA using both FTS and FNTS methods on the same set of localized landmarks. Correlate with the clinical ground truth to determine which geometric heuristic better matches human expert assessment.

## Open Questions the Paper Calls Out

- **Question:** Can the trained models generalize to independent datasets from different clinical settings and imaging protocols?
- **Question:** Can automated KA measurements predict clinical outcomes such as revision surgery risk or chronic pain following TKR?
- **Question:** How does inter-clinician variability in KA measurement affect the ground-truth reference for automated systems?
- **Question:** Why does post-operative agreement consistently lag behind pre-operative agreement (ICC 0.81–0.86 vs. 0.95–0.99)?

## Limitations
- The method requires paired reference points to initialize the local search, making it vulnerable to failures in cases of severe deformity or missing anatomy
- The drop in ICC from 0.97 (pre-op) to 0.86 (post-op) indicates reduced reliability with implants
- The study uses data from a single institution (Stockport NHS), limiting external validity across different radiographic protocols and patient populations

## Confidence
- **High confidence:** Technical implementation of hourglass networks with attention gates, landmark localization accuracy metrics, and basic mechanism of two-stage coarse-to-fine approach
- **Medium confidence:** Clinical applicability of automated KA measurements, generalization across different imaging systems, and real-world workflow integration
- **Low confidence:** Performance in extreme anatomical variations, effectiveness in non-TKR populations, and long-term reliability across different manufacturers' implants

## Next Checks
1. Test the model on external datasets from different institutions with varying radiographic protocols to assess generalization performance and identify failure modes
2. Conduct radiologist reader study comparing automated KA measurements against clinical ground truth in both pre-operative and post-operative cases, including inter-rater reliability assessment
3. Evaluate model performance on knee radiographs with severe osteoarthritis, congenital deformities, and post-traumatic cases to determine robustness limits