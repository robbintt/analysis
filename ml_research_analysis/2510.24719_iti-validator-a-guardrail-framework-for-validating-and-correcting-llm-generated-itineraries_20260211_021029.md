---
ver: rpa2
title: 'Iti-Validator: A Guardrail Framework for Validating and Correcting LLM-Generated
  Itineraries'
arxiv_id: '2510.24719'
source_url: https://arxiv.org/abs/2510.24719
tags:
- time
- itinerary
- travel
- itineraries
- llms
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper introduces Iti-Validator, a guardrail framework that
  validates and corrects LLM-generated travel itineraries by checking them against
  real-world flight durations and enforcing temporal consistency rules. The framework
  uses the AeroDataBox API to obtain realistic flight times and applies rules such
  as no overlapping travel, minimum and maximum transit times, and minimum stay durations.
---

# Iti-Validator: A Guardrail Framework for Validating and Correcting LLM-Generated Itineraries

## Quick Facts
- arXiv ID: 2510.24719
- Source URL: https://arxiv.org/abs/2510.24719
- Authors: Shravan Gadbail; Masumi Desai; Kamalakar Karlapalem
- Reference count: 9
- Primary result: Deterministic rule-based correction outperforms LLM self-correction for validating travel itineraries

## Executive Summary
This paper introduces Iti-Validator, a guardrail framework that validates and corrects LLM-generated travel itineraries by checking them against real-world flight durations and enforcing temporal consistency rules. The framework uses the AeroDataBox API to obtain realistic flight times and applies rules such as no overlapping travel, minimum and maximum transit times, and minimum stay durations. Experiments with three LLMs (GPT-4o-mini, Gemini-2.0, LLaMA2-7B) show that raw itineraries often contain significant temporal inconsistencies, with up to 100% of LLaMA2-7B itineraries being invalid and 4.58 average issues per 6-city itinerary. The validator successfully corrects all detected issues, ensuring 100% temporal feasibility of itineraries. The deterministic, rule-based approach outperforms LLM self-correction and is scalable for practical deployment.

## Method Summary
The framework generates itineraries using three LLMs (GPT-4o-mini, Gemini-2.0, LLaMA2-7B) and validates them against real-world flight durations obtained from the AeroDataBox API. For each itinerary segment, the validator checks four rules: no overlapping travel times, minimum transit time (API duration + 4-hour buffer), maximum transit time (2×minimum), and minimum stay duration (48 hours). Violations are corrected deterministically by adjusting timestamps. The framework handles format errors through up to 3 retry prompts and skips segments where API data is unavailable after retries.

## Key Results
- Raw LLM itineraries show high invalidity rates: up to 100% for LLaMA2-7B, 63.7% for GPT-4o-mini, and 67.8% for Gemini-2.0
- Average issues per 6-city itinerary: 4.58 (LLaMA2-7B), 2.26 (GPT-4o-mini), 2.31 (Gemini-2.0)
- Deterministic correction achieves 100% temporal feasibility, outperforming LLM self-correction attempts
- Validation latency: 3-10 seconds per itinerary with AeroDataBox API integration

## Why This Works (Mechanism)

### Mechanism 1: External Knowledge Grounding via Real-World API
The framework queries AeroDataBox API to fetch minimum flight durations between city pairs (identified by IATA airport codes). Each itinerary segment's allocated travel time is compared against t_minimum (API duration + 4-hour buffer for airport logistics). If tB_arr - tA_dep < t_minimum, the segment is flagged. Core assumption: The AeroDataBox API returns accurate and complete flight duration data for queried city pairs.

### Mechanism 2: Deterministic Rule-Based Correction
For each violation type, the correction module applies fixed adjustments: (1) Too-short transit → set tB_arr := tA_dep + t_minimum; (2) Too-long transit → cap at 2 × t_minimum; (3) Overlap → shift subsequent schedule forward; (4) Insufficient stay → extend departure time to meet 2-day minimum. After adjustments, re-validate to confirm all constraints satisfied. Core assumption: A feasible itinerary exists within the temporal constraints.

### Mechanism 3: Model-Agnostic Post-Processing Architecture
The LLM generates a JSON itinerary with structured fields (place, arrival_time, departure_time). The validator parses this output independently, applies rules, and outputs corrected JSON. No feedback loop to LLM weights is required. Core assumption: LLM outputs can be parsed into structured timestamps (handled by retry logic for format errors).

## Foundational Learning

- **Temporal Consistency in Multi-Step Planning**: Understanding overlapping intervals, transit bounds, and stay constraints is essential to grasp what the validator checks. Quick check: Given arrival at City A on 2025-06-07 10:00 and departure at 2025-06-08 06:00, does this satisfy a 2-day (48-hour) minimum stay?

- **LLM Hallucination in Grounded Domains**: Recognizes why LLMs generate plausible-sounding but infeasible itineraries (e.g., non-existent flights, impossible travel times). Quick check: Why might an LLM suggest a direct flight from a small regional airport that has limited international service?

- **Rule-Based vs. Learned Correction**: The paper's key design choice—deterministic correction outperforms iterative LLM re-prompting. Quick check: What are the tradeoffs of using fixed time-shifting rules versus asking an LLM to regenerate an itinerary?

## Architecture Onboarding

- **Component map**: LLM Generator -> JSON Output -> Parser -> Validator Module -> AeroDataBox API Client -> Rule Application -> Correction Module -> Validated Itinerary
- **Critical path**: Prompt construction → LLM JSON output → Parse itinerary → API lookup for each segment → Rule validation → Correction (if needed) → Output validated/corrected itinerary
- **Design tradeoffs**: Rule-based correction guarantees validity but may produce suboptimal schedules; API dependency introduces latency and requires fallback for unavailable routes; modular rules allow extension but require domain-specific data sources
- **Failure signatures**: Format errors (malformed JSON or invalid timestamps → trigger retry with corrective prompt); API unavailability (null flight data after 3 retries → segment skipped); Infeasible constraints (trip duration too short for all constraints → not explicitly handled)
- **First 3 experiments**: 1) Baseline validation: Generate 100 itineraries each for 4, 5, 6 cities using GPT-4o-mini. Run validator without correction to measure raw invalidity rates and error types. 2) Ablation by rule: Disable one rule at a time to identify which constraints contribute most to invalidity. 3) Self-correction comparison: Implement iterative LLM re-prompting for a subset of invalid itineraries and compare final validity rates against deterministic correction.

## Open Questions the Paper Calls Out

1. **Multi-modal transport scaling**: Can the framework effectively scale to multi-modal transport (e.g., trains, driving) where transit schedules are less standardized than commercial flights? The current system relies heavily on the AeroDataBox API for fixed flight durations; ground transport involves more variable traffic conditions and routing options.

2. **Machine learning prediction for complex restructuring**: Can a machine learning model accurately predict when a rule-based time-shift correction is insufficient, thereby signaling the need for a full itinerary restructuring? The current deterministic correction adjusts timestamps but cannot handle fundamental logical flaws that require re-generation.

3. **Integration of non-temporal constraints**: How does the integration of non-temporal constraints, such as budget limits or visa requirements, impact the validator's ability to maintain itinerary feasibility? Financial and legal constraints introduce dependencies that may conflict with the current temporal optimization logic.

## Limitations

- **API dependency and coverage**: The framework's reliance on AeroDataBox API for flight duration data introduces uncertainty about coverage completeness and accuracy. The 4-hour buffer assumption for airport logistics may not generalize across all airports or regions.
- **Temporal constraint rigidity**: The deterministic correction approach guarantees validity but may produce suboptimal itineraries that extend beyond user preferences. The framework doesn't explicitly handle cases where total trip duration cannot accommodate all minimum constraints.
- **Model selection bias**: The experiments focus on three specific LLMs but don't explore the full spectrum of available models. The performance differences observed may reflect these particular model capabilities rather than general LLM limitations.

## Confidence

- **High Confidence**: The AeroDataBox API effectively grounds flight durations against LLM hallucinations; Deterministic rule-based correction reliably produces valid itineraries where LLM self-correction fails; LLM-generated itineraries contain significant temporal inconsistencies across all tested models
- **Medium Confidence**: The 4-hour buffer adequately covers airport logistics for all routes (assumed based on common practice); A single correction pass resolves all conflicts (observed in test cases but not formally proven); Format errors are rare enough that retry logic suffices (no quantitative error rate provided)
- **Low Confidence**: The framework scales efficiently for real-world deployment (latency measurements limited to 3-10 seconds per itinerary); The correction approach produces user-preferred itineraries, not just valid ones (no user preference evaluation); The validator generalizes to non-flight travel modes (train, car) without modification (not tested)

## Next Checks

1. **Coverage Analysis**: Quantify the percentage of route pairs for which AeroDataBox returns null data and assess whether this correlates with specific geographic regions or airport types.

2. **Constraint Feasibility Testing**: Systematically generate itineraries with progressively shorter total durations to identify the minimum trip length required for the validator to produce feasible schedules.

3. **User Preference Evaluation**: Conduct a user study comparing itineraries produced by deterministic correction versus those generated through iterative LLM refinement, measuring both validity and user satisfaction with schedule optimality.