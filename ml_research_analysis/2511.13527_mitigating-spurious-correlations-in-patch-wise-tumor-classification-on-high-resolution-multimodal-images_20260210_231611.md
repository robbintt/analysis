---
ver: rpa2
title: Mitigating Spurious Correlations in Patch-wise Tumor Classification on High-Resolution
  Multimodal Images
arxiv_id: '2511.13527'
source_url: https://arxiv.org/abs/2511.13527
tags:
- tissue
- tumor
- spurious
- patch
- classification
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: 'Patch-wise classification offers a computationally efficient alternative
  to pixel-wise segmentation for high-resolution multimodal images, especially when
  the task is to detect the presence of a class of interest rather than precisely
  delineate its boundaries. However, we show that this simplified formulation can
  introduce spurious correlations between patch composition and labels: tumor patches
  tend to contain larger tissue regions, whereas non-tumor patches often consist mostly
  of background with small tissue areas.'
---

# Mitigating Spurious Correlations in Patch-wise Tumor Classification on High-Resolution Multimodal Images

## Quick Facts
- arXiv ID: 2511.13527
- Source URL: https://arxiv.org/abs/2511.13527
- Reference count: 38
- Patch-wise classification offers computational efficiency but introduces spurious correlations between tissue quantity and class labels

## Executive Summary
This work identifies and mitigates spurious correlations in patch-wise tumor classification on high-resolution multimodal images. The authors demonstrate that converting pixel-wise labels to patch-level binary labels creates a systematic bias: tumor patches tend to contain larger tissue regions while non-tumor patches often consist mostly of background. This correlation causes standard empirical risk minimization (ERM) to learn a shortcut based on tissue size rather than true tumor morphology, leading to poor performance on minority groups (small-tissue tumors, large-tissue non-tumors). The proposed GERNE method uses gradient extrapolation to redirect learning away from this bias, achieving approximately 7% improvement in worst-group accuracy (WGA) compared to ERM.

## Method Summary
The approach converts pixel-wise segmentation masks to binary patch labels, computes tissue ratio per patch, and applies GERNE debiasing. GERNE constructs biased and less-biased batches to extrapolate gradients away from spurious correlations. The method uses a ResNet-50 backbone with cross-entropy loss, training with gradient extrapolation updates: g_ext = g_lb + β(g_lb - g_b). Performance is evaluated using worst-group accuracy across four groups defined by label and binarized tissue size.

## Key Results
- ERM achieves high balanced accuracy (93%) but poor worst-group accuracy (63-73%) due to spurious correlation exploitation
- GERNE improves worst-group accuracy by approximately 7% compared to ERM for two different tissue-size thresholds
- Model selection using worst-group accuracy versus balanced accuracy alone results in 10% difference in worst-group performance
- Minority groups (small-tissue tumor patches, large-tissue non-tumor patches) show higher error rates under ERM

## Why This Works (Mechanism)

### Mechanism 1: Spurious Correlation Emergence from Patch Binarization
Converting pixel-wise labels to patch-level binary labels introduces systematic correlations between tissue quantity and class labels. When a patch is labeled positive if it contains ≥1 tumor pixel, tumor patches tend to capture larger tissue structures while negative patches often fall in background regions. The spatial geometry of tumors combines with binary labeling to create a proxy signal.

### Mechanism 2: ERM Short-Circuit Learning via Spurious Features
Standard empirical risk minimization exploits tissue-size correlations as a shortcut, degrading performance on minority groups. ERM optimizes average loss, so when a simple heuristic (large tissue → tumor, small tissue → non-tumor) predicts well on the majority of samples, gradient descent converges to this solution before learning true tumor morphology.

### Mechanism 3: Gradient Extrapolation Redirects Learning Away from Bias
GERNE constructs two mini-batches: biased batch B_b and less-biased batch B_lb. The extrapolated gradient g_ext = g_lb + β(g_lb - g_b) emphasizes directions that improve on underrepresented groups. The extrapolation factor β controls debiasing strength.

## Foundational Learning

- **Spurious Correlations / Shortcut Learning**: Understanding that models can learn simple correlations instead of true causal features is essential. Quick check: If a classifier achieves 93% balanced accuracy but only 48% worst-group accuracy, what does this suggest about what the model learned?
- **Worst-Group Accuracy (WGA)**: The primary evaluation metric that reveals minority group performance. Quick check: Why might average accuracy increase while WGA decreases during training?
- **Group-Aware Debiasing**: GERNE requires discretizing the spurious attribute into groups to construct biased vs. less-biased batches. Quick check: What happens if your group threshold τ is set too high or too low relative to the true distribution of tissue sizes?

## Architecture Onboarding

- **Component map**: Input preprocessing -> Label generation -> Spurious attribute computation -> Backbone -> Loss -> Debiasing -> Evaluation
- **Critical path**: 1) Patch extraction and binary labeling, 2) Spurious attribute computation and binarization, 3) Batch construction for GERNE, 4) Gradient extrapolation update, 5) WGA-based model selection
- **Design tradeoffs**: 
  - Threshold τ choice affects minority-group boundaries
  - BCA vs WGA for model selection shows 10% WGA difference
  - β extrapolation factor requires validation tuning
- **Failure signatures**: 
  - High BCA, low WGA indicates spurious correlation exploitation
  - WGA doesn't improve with GERNE suggests batch construction issues
  - Large variance across trials indicates unstable group distributions
- **First 3 experiments**:
  1. Train ERM baseline and visualize error distribution vs. tissue ratio to confirm spurious correlation
  2. Test multiple τ thresholds and report group size and WGA changes
  3. Compare GERNE to ERM when both use WGA for model selection, reporting per-group accuracies

## Open Questions the Paper Calls Out

- **Open Question 1**: How does patch size variation affect the strength of spurious correlations and debiasing efficacy?
- **Open Question 2**: Can debiasing methods handle continuous or multiple spurious attributes without relying on binarization?
- **Open Question 3**: Do spurious correlations in patch classification transfer to or affect full pixel-wise segmentation tasks?
- **Open Question 4**: Do similar composition-label correlations exist in other high-resolution domains like remote sensing?

## Limitations

- Patch dimensions are not specified, which critically affects the strength and existence of the spurious correlation
- Training hyperparameters including β tuning strategy, batch sizes, and exact GERNE implementation details are missing
- The study uses fixed patch sizes, leaving sensitivity to spatial granularity unknown

## Confidence

- High confidence in the existence of spurious correlation between tissue size and patch labels
- Medium confidence in the mechanism by which ERM exploits this shortcut
- Medium confidence in GERNE's effectiveness (7% WGA improvement reported)
- Low confidence in generalizability across different patch sizes (unknown dimensions prevent validation)

## Next Checks

1. Determine patch dimensions from dataset files or contact authors; verify that the tissue-size correlation exists for those specific dimensions
2. Implement ERM baseline with WGA-based model selection and verify the characteristic pattern: high BCA (93%) paired with low WGA (63-73%)
3. Systematically vary τ threshold (0.03, 0.1, 0.2) and report how group sizes and WGA change to understand sensitivity to spurious-attribute definition