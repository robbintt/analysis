---
ver: rpa2
title: Spatially-Grounded Document Retrieval via Patch-to-Region Relevance Propagation
arxiv_id: '2512.02660'
source_url: https://arxiv.org/abs/2512.02660
tags:
- retrieval
- patch
- region
- regions
- document
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the challenge of document retrieval for retrieval-augmented
  generation (RAG) systems, where current approaches either operate at page-level
  granularity (missing precise context) or lack semantic grounding for relevance assessment.
  The authors propose a hybrid architecture that unifies late-interaction multimodal
  retrieval with OCR-based structured extraction by propagating ColPali's patch-level
  similarity scores to OCR-extracted regions through spatial coordinate mapping.
---

# Spatially-Grounded Document Retrieval via Patch-to-Region Relevance Propagation

## Quick Facts
- arXiv ID: 2512.02660
- Source URL: https://arxiv.org/abs/2512.02660
- Reference count: 6
- Key result: Achieves 59.7% hit rate at IoU@0.5 with 52.3% token savings versus full-page retrieval

## Executive Summary
This paper addresses the challenge of document retrieval for retrieval-augmented generation (RAG) systems, where current approaches either operate at page-level granularity (missing precise context) or lack semantic grounding for relevance assessment. The authors propose a hybrid architecture that unifies late-interaction multimodal retrieval with OCR-based structured extraction by propagating ColPali's patch-level similarity scores to OCR-extracted regions through spatial coordinate mapping. The method enables region-level retrieval without additional training, operating entirely at inference time.

Evaluated on BBox-DocVQA, the approach achieves 59.7% hit rate at IoU@0.5 with 52.3% token savings compared to full-page retrieval. The method reduces context tokens by 28.8% compared to all OCR regions and by 52.3% compared to full-page image tokens. The authors release Snappy, an open-source implementation, demonstrating practical applicability for RAG with improved precision and reduced context windows.

## Method Summary
The core method involves formalizing the mathematical correspondence between vision transformer patch grids and OCR bounding boxes, then propagating patch similarity scores to regions via IoU-weighted aggregation. This enables region-level retrieval without additional training, operating entirely at inference time. The approach builds on ColPali's late-interaction architecture by adding a spatial grounding layer that maps patch-level relevance to document regions, achieving precise retrieval while maintaining computational efficiency.

## Key Results
- Achieves 59.7% hit rate at IoU@0.5 on BBox-DocVQA benchmark
- Reduces context tokens by 28.8% compared to all OCR regions
- Reduces context tokens by 52.3% compared to full-page image tokens

## Why This Works (Mechanism)
The approach works by leveraging the spatial correspondence between vision transformer patch grids and OCR-extracted document regions. ColPali's patch-level similarity scores, which capture semantic relevance, are propagated to specific regions through intersection-over-union (IoU) weighted aggregation. This spatial grounding allows the system to identify precisely which document regions are most relevant to a query, rather than treating entire pages as retrieval units. The method effectively bridges the gap between semantic understanding (patch-level) and document structure (region-level) without requiring additional model training.

## Foundational Learning
- Vision Transformer Patch Grids: Understanding how ViTs divide images into patches for processing - needed to comprehend the patch-to-region mapping mechanism; quick check: verify patch size and overlap parameters in ColPali implementation
- Intersection-over-Union (IoU): Spatial overlap metric between bounding boxes - essential for weighted aggregation of patch scores; quick check: calculate IoU between sample bounding boxes to verify understanding
- Late-Interaction Models: ColPali's architecture that performs cross-modal retrieval - provides the foundation for semantic patch scoring; quick check: review ColPali's query-document interaction mechanism
- OCR Bounding Box Extraction: Structured text extraction with spatial coordinates - enables region-level retrieval; quick check: verify OCR coordinate system alignment with image coordinates
- IoU-Weighted Aggregation: Method for propagating patch scores to regions - core mechanism for spatial grounding; quick check: implement simple weighted aggregation with sample scores

## Architecture Onboarding

Component Map: Query -> ColPali Encoder -> Patch Embeddings -> Spatial Propagation -> OCR Regions -> Retrieved Context

Critical Path: The essential flow involves encoding the query through ColPali, computing patch-level similarities, mapping patches to OCR regions via spatial coordinates, and aggregating scores using IoU weighting to identify the most relevant regions for retrieval.

Design Tradeoffs: The approach trades some computational overhead (additional spatial mapping) for significant gains in retrieval precision and context reduction. While ColPali's computational cost remains, the spatial grounding eliminates the need for separate region-level models or additional training.

Failure Signatures: Performance degradation may occur with low-text-density documents where patch-to-region correspondence becomes sparse, documents with overlapping regions where spatial mapping is ambiguous, or when OCR quality is poor affecting coordinate accuracy.

First Experiments:
1. Verify patch-to-region mapping accuracy on a simple document with clear layout and known ground truth
2. Test IoU-weighted aggregation with synthetic patch scores and bounding boxes to validate the propagation mechanism
3. Benchmark token savings on a small document collection comparing full-page, all-regions, and spatially-grounded retrieval

## Open Questions the Paper Calls Out
None

## Limitations
- Evaluation scope restricted to single dataset (BBox-DocVQA), limiting generalizability across document types and layouts
- Method's performance characteristics in low-text-density documents or documents with overlapping regions remain unclear
- Approach inherits ColPali's computational overhead and storage requirements for patch embeddings

## Confidence

High confidence: The mathematical formulation of patch-to-region propagation and IoU-weighted aggregation
Medium confidence: The efficiency gains and token savings claims, pending broader dataset validation
Medium confidence: The assertion of no additional training requirements, as performance depends on ColPali model quality

## Next Checks

1. Evaluate the method on diverse document collections including forms, invoices, and scanned documents with varying layouts to assess generalizability
2. Test performance on documents with low text density and overlapping regions to understand edge case behavior
3. Conduct a controlled study measuring the impact of OCR quality on retrieval performance to validate robustness claims