---
ver: rpa2
title: 'RDDM: Practicing RAW Domain Diffusion Model for Real-world Image Restoration'
arxiv_id: '2508.19154'
source_url: https://arxiv.org/abs/2508.19154
tags:
- image
- rddm
- srgb
- domain
- sensor
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: RDDM introduces the first diffusion model for RAW-domain image
  restoration, bypassing lossy sRGB preprocessing to restore directly from sensor
  RAW data. The approach addresses the domain mismatch between sRGB and RAW via a
  RAW-domain VAE (RVAE) and a configurable multi-Bayer (CMB) LoRA module to handle
  heterogeneous Bayer patterns.
---

# RDDM: Practicing RAW Domain Diffusion Model for Real-world Image Restoration

## Quick Facts
- **arXiv ID:** 2508.19154
- **Source URL:** https://arxiv.org/abs/2508.19154
- **Reference count:** 16
- **Primary result:** Introduces the first diffusion model for RAW-domain image restoration, achieving state-of-the-art fidelity and perceptual quality by bypassing sRGB preprocessing and restoring directly from sensor RAW data.

## Executive Summary
RDDM introduces the first diffusion model for RAW-domain image restoration, addressing the domain mismatch between sRGB and RAW by training directly on sensor RAW data. The approach bypasses lossy sRGB preprocessing, restoring images directly from RAW inputs using a RAW-domain VAE (RVAE) and a configurable multi-Bayer (CMB) LoRA module to handle heterogeneous Bayer patterns. A scalable data synthesis pipeline generates synthetic RAW LQ-HQ pairs from sRGB datasets, enabling training without real RAW datasets. RDDM achieves state-of-the-art fidelity and perceptual quality, outperforming existing diffusion-based methods across real and synthetic RAW benchmarks with higher PSNR/SSIM, lower LPIPS/DISTS, and superior user preference.

## Method Summary
RDDM is an end-to-end RAW domain image restoration model that maps sensor RAW LQ inputs directly to high-quality linear domain images, replacing the traditional ISP → IR pipeline. The method uses a RAW-domain VAE (RVAE) trained in two stages: first reconstructing linear domain images, then adapting the encoder with LoRA for RAW inputs. A configurable multi-Bayer (CMB) LoRA module handles heterogeneous Bayer patterns. Training uses synthetic RAW LQ-HQ pairs generated from sRGB datasets via a pipeline involving Inverse Post Tone Processing (IPTP) and a Mosaic Noise Synthesizer (MNS). The diffusion model is built on Stable Diffusion 2.1 with CMB-LoRA and optimized using a dual-domain loss combining RAW latent loss and sRGB pixel loss via a differentiable PTP module.

## Key Results
- Achieves state-of-the-art fidelity with higher PSNR/SSIM and lower LPIPS/DISTS on real and synthetic RAW benchmarks.
- Demonstrates superior perceptual quality with better user preference scores compared to existing diffusion-based methods.
- Successfully handles heterogeneous Bayer patterns using the configurable multi-Bayer (CMB) LoRA module.
- Bypasses sRGB preprocessing, avoiding domain mismatch and enabling end-to-end RAW restoration.

## Why This Works (Mechanism)
The paper addresses the domain mismatch between sRGB and RAW by training directly on RAW data, avoiding lossy preprocessing steps. The RAW-domain VAE (RVAE) enables efficient latent representation of RAW data, while the configurable multi-Bayer (CMB) LoRA module adapts the model to different sensor patterns. The scalable data synthesis pipeline allows training without real RAW datasets, making the approach practical. The dual-domain loss ensures both fidelity and perceptual quality by optimizing in both RAW and sRGB spaces.

## Foundational Learning
- **RAW Domain Image Restoration:** Needed to bypass lossy sRGB preprocessing and restore images directly from sensor RAW data. Quick check: Verify the model can handle RAW Bayer patterns without color artifacts.
- **RAW-domain VAE (RVAE):** Enables efficient latent representation of RAW data for diffusion training. Quick check: Ensure the RVAE can reconstruct linear domain images from RAW inputs accurately.
- **Configurable Multi-Bayer (CMB) LoRA:** Adapts the model to heterogeneous Bayer patterns across different sensors. Quick check: Test the model on multiple Bayer patterns (RGGB, BGGR) to ensure cross-sensor generalization.
- **Data Synthesis Pipeline:** Generates synthetic RAW LQ-HQ pairs from sRGB datasets, enabling training without real RAW data. Quick check: Validate the realism of synthetic RAW inputs using noise parameters and mosaicking.
- **Dual-domain Loss:** Optimizes both RAW latent loss and sRGB pixel loss for fidelity and perceptual quality. Quick check: Confirm the differentiable PTP module correctly maps between RAW and sRGB spaces during training.

## Architecture Onboarding

**Component Map:** sRGB HQ → Inverse PTP → Linear HQ → Detail Degradation → Mosaic Noise Synthesizer → RAW LQ → RVAE Encoder → Diffusion U-Net (CMB-LoRA) → RVAE Decoder → Linear HQ

**Critical Path:** Data synthesis → RVAE training (2-stage) → Diffusion training with dual-domain loss → Inference

**Design Tradeoffs:** The use of synthetic RAW data enables training without real RAW datasets but relies on accurate synthesis. The RVAE 2-stage training ensures domain adaptation but adds complexity. The CMB-LoRA module handles Bayer patterns but requires careful configuration.

**Failure Signatures:** Mosaic artifacts or color shifts indicate incorrect RVAE training (e.g., failing to freeze the pre-trained decoder). Poor generalization across sensors suggests overfitting to a single Bayer pattern.

**First Experiments:**
1. **Data Synthesis Validation:** Implement and test the detail degradation and mosaicking steps to ensure realistic synthetic RAW LQ inputs.
2. **RVAE Training Verification:** Train the RVAE in two stages, ensuring the decoder is frozen during RAW domain adaptation.
3. **CMB-LoRA Cross-Pattern Test:** Validate the CMB-LoRA module switches weights correctly for different Bayer patterns (RGGB, BGGR).

## Open Questions the Paper Calls Out
None

## Limitations
- The paper does not fully specify the exact implementation of the "Detail Degradation" block used in the data synthesis pipeline, which could affect the quality of synthetic RAW LQ inputs.
- The configuration of the differentiable PTP/IPTP module is not detailed, which is critical for the dual-domain loss calculation and may lead to inconsistencies in training.
- The noise parameters (λ_shot, λ_read) used in the Mosaic Noise Synthesizer are not explicitly defined, which could impact the realism of synthetic RAW data.

## Confidence
- **High:** The claim that RDDM achieves state-of-the-art fidelity and perceptual quality across real and synthetic RAW benchmarks is supported by quantitative metrics (PSNR/SSIM, LPIPS/DISTS) and user preference studies.
- **Medium:** The effectiveness of the RAW-domain VAE (RVAE) and configurable multi-Bayer (CMB) LoRA module in handling domain mismatch and heterogeneous Bayer patterns is well-justified but relies on the correct implementation of the synthesis pipeline and training procedures.
- **Low:** The generalization of RDDM across different camera sensors is not fully validated, as the paper does not provide extensive cross-sensor testing or ablation studies.

## Next Checks
1. **Implement and validate the data synthesis pipeline:** Ensure the Detail Degradation block and Mosaic Noise Synthesizer are correctly implemented and produce realistic RAW LQ inputs.
2. **Verify RVAE training procedure:** Confirm that the 2-stage training (linear domain reconstruction followed by RAW domain adaptation) is executed as specified, with proper freezing of the pre-trained decoder.
3. **Test CMB-LoRA module across Bayer patterns:** Validate that the CMB-LoRA module correctly switches weights for different Bayer patterns (RGGB, BGGR, etc.) to ensure cross-sensor generalization.