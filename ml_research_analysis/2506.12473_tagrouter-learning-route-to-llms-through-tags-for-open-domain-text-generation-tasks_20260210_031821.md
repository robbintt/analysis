---
ver: rpa2
title: 'TagRouter: Learning Route to LLMs through Tags for Open-Domain Text Generation
  Tasks'
arxiv_id: '2506.12473'
source_url: https://arxiv.org/abs/2506.12473
tags:
- tagrouter
- routing
- performance
- system
- tags
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This work addresses the challenge of efficiently routing user queries
  to the most suitable large language models (LLMs) within a model system to maximize
  collective performance while minimizing costs. To tackle this, we propose TAGROUTER,
  a training-free model routing method that leverages self-aware tags to capture the
  semantic features of user queries and control the behavior of multiple models.
---

# TagRouter: Learning Route to LLMs through Tags for Open-Domain Text Generation Tasks

## Quick Facts
- arXiv ID: 2506.12473
- Source URL: https://arxiv.org/abs/2506.12473
- Reference count: 40
- Outperforms 13 baseline methods, achieving a 6.15% increase in accept rate and a 17.20% reduction in costs on the BCUQ dataset.

## Executive Summary
This work addresses the challenge of efficiently routing user queries to the most suitable large language models (LLMs) within a model system to maximize collective performance while minimizing costs. The proposed TAGROUTER method leverages self-aware tags to capture semantic features of user queries and control the behavior of multiple models. It achieves superior performance over existing methods in both accept rate and cost reduction without requiring additional training.

## Method Summary
TAGROUTER is a training-free model routing method that uses semantic tags to route user queries to the most appropriate LLM. It consists of three modules: TAGGENERATOR, which generates fine-grained tags for each query; TAGSCORER, which evaluates model performance on these tags; and TAGDECIDER, which selects the optimal model for inference based on computed scores and a cost-awareness threshold. The method is evaluated on the BCUQ dataset and shows significant improvements over 13 baseline methods.

## Key Results
- Achieves a 6.15% increase in the accept rate compared to baseline methods.
- Reduces costs by 17.20% while maintaining high performance.
- Demonstrates effective model routing without requiring additional training.

## Why This Works (Mechanism)
TAGROUTER works by generating fine-grained semantic tags for user queries and using these tags to evaluate and route queries to the most suitable LLM. The TAGGENERATOR module creates detailed tags that capture the semantic features of each query. The TAGSCORER module assesses the performance of different models on these tags, and the TAGDECIDER module selects the optimal model based on the scores and a cost-awareness threshold. This approach allows for efficient and scalable model ensembling in open-domain text generation tasks.

## Foundational Learning
- **Semantic Tags**: Used to capture the semantic features of user queries. Why needed: To provide a detailed representation of query characteristics. Quick check: Ensure tags accurately reflect query semantics.
- **Model Performance Evaluation**: Assesses how well different models perform on specific tags. Why needed: To identify the most suitable model for each query. Quick check: Verify performance scores align with actual model outputs.
- Submodular Function: Used in the TAGSCORER module to evaluate model performance. Why needed: To efficiently score models based on their performance on tags. Quick check: Confirm submodular function accurately ranks model performance.
- Cost-Awareness Threshold: Determines the optimal model selection based on cost considerations. Why needed: To balance performance and cost-effectiveness. Quick check: Ensure threshold effectively balances performance and cost.

## Architecture Onboarding

**Component Map**: TAGGENERATOR -> TAGSCORER -> TAGDECIDER

**Critical Path**: TAGGENERATOR generates tags -> TAGSCORER evaluates model performance on tags -> TAGDECIDER selects optimal model based on scores and cost threshold.

**Design Tradeoffs**: The method prioritizes cost reduction and performance improvement without requiring additional training, but relies on static model capabilities and may not adapt to model drift or performance shifts over time.

**Failure Signatures**: Potential failures include inaccurate tag generation, incorrect model performance evaluation, or suboptimal model selection due to cost threshold tuning.

**Three First Experiments**:
1. Evaluate TAGROUTER on multiple open-domain datasets beyond BCUQ to assess robustness across different domains and query styles.
2. Test the routing method with a broader set of model APIs, including open-source and fine-tuned variants, to measure adaptability across model families.
3. Conduct a longitudinal study to monitor tag-based routing performance under conditions of model performance drift or concept shift over time.

## Open Questions the Paper Calls Out
None

## Limitations
- Evaluation focuses on a single benchmark (BCUQ) and a limited set of 6 commercial APIs, constraining generalizability to other domains or model combinations.
- Relies on semantic tags as proxies for performance, but the stability and transferability of these tags across different model families or fine-tuned variants are not investigated.
- Cost-awareness mechanism depends on fixed threshold tuning without exploring dynamic or adaptive thresholding strategies.

## Confidence
- **High**: Core routing framework and demonstrated improvements in cost reduction and accept rate on the tested dataset.
- **Medium**: General applicability across diverse query types, model architectures, and real-world deployment conditions due to the limited scope of experiments.
- **Low**: Long-term stability and adaptability of the tag-based routing under dynamic model performance and evolving query distributions.

## Next Checks
1. Evaluate TAGROUTER on multiple open-domain datasets beyond BCUQ to assess robustness across different domains and query styles.
2. Test the routing method with a broader set of model APIs, including open-source and fine-tuned variants, to measure adaptability across model families.
3. Conduct a longitudinal study to monitor tag-based routing performance under conditions of model performance drift or concept shift over time.