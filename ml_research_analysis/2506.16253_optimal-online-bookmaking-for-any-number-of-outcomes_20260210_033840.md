---
ver: rpa2
title: Optimal Online Bookmaking for Any Number of Outcomes
arxiv_id: '2506.16253'
source_url: https://arxiv.org/abs/2506.16253
tags:
- lemma
- optimal
- loss
- proof
- follows
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper studies the online bookmaking problem, where a bookmaker
  dynamically adjusts betting odds to maximize profit while minimizing loss across
  multiple outcomes and betting rounds. The authors present a complete solution for
  any number of outcomes K and rounds T by showing that the optimal loss is the largest
  root of a simple polynomial.
---

# Optimal Online Bookmaking for Any Number of Outcomes

## Quick Facts
- arXiv ID: 2506.16253
- Source URL: https://arxiv.org/abs/2506.16253
- Authors: Hadar Tal; Oron Sabag
- Reference count: 40
- Primary result: Complete solution for online bookmaking with K outcomes showing optimal loss equals largest root of degree-K polynomial

## Executive Summary
This paper solves the fundamental problem of optimal online bookmaking for any number of outcomes K and betting rounds T. The authors show that the bookmaker's optimal loss is the largest root of an explicitly computable degree-K polynomial, independent of T's scale. They prove regret grows as √T and converges to the largest root of the K-th Hermite polynomial, demonstrating that bookmakers can be arbitrarily fair. The key technical innovation is the Bellman-Pareto frontier, which unifies dynamic programming with Pareto optimization for vector-valued games. The work provides an exact, computable characterization of optimal strategies in a complex repeated vector game—a rare result in online learning and game theory.

## Method Summary
The authors present a complete solution for online bookmaking with K outcomes and T rounds. They construct the Bellman-Pareto frontier that characterizes all achievable residual loss vectors, enabling forward-time optimal strategy computation. The optimal loss L*_{T,K} equals the largest root of a simple polynomial F_{H,s}(x) = Σ_{m=0}^K c_{H,m}(s) x^{K-m}, where coefficients depend on elementary symmetric polynomials of the state vector. Odds are computed using ratios of D-polynomials derived from the residual loss vector. The paper introduces opportunistic bookmaking that exploits suboptimal gambler behavior by recomputing optimal loss when non-decisive bets are observed. Algorithm 1 implements this approach with O(TK²) complexity.

## Key Results
- Optimal bookmaking loss L*_{T,K} equals largest root of degree-K polynomial, independent of T
- Regret grows as √T with asymptotic factor β_K = largest root of K-th Hermite polynomial
- Bellman-Pareto frontier unifies dynamic programming with Pareto optimization for vector-valued games
- Opportunistic bookmaking reduces loss when gamblers act suboptimally via water-filling analogy
- Efficient O(TK²) algorithm achieves optimal loss at all times

## Why This Works (Mechanism)

### Mechanism 1
- **Claim**: The optimal bookmaking loss L*_{T,K} equals the largest root of an explicitly computable degree-K polynomial, independent of T's scale.
- **Mechanism**: The loss polynomial P_{T,K}(x) = Σ_{m=0}^K (K choose m)(-T)^{K-m} x^m encodes the structure of the repeated vector game. The largest root captures the worst-case payout the bookmaker must guarantee across all K outcomes after T rounds. This reduces an exponentially complex game tree to a univariate root-finding problem.
- **Core assumption**: The gambler acts adversarially and bets "decisively" (on exactly one outcome per round), which Theorem 9 proves is optimal for the gambler without loss of generality.
- **Evidence anchors**: [abstract]: "the bookmaker's optimal loss is the largest root of a simple polynomial"; [section 3]: Theorem A and explicit polynomial in equation (8); closed-form solutions for K=2 and K=3 in equations (9) and (10).

### Mechanism 2
- **Claim**: The Bellman-Pareto Frontier characterizes all achievable residual loss vectors, enabling forward-time optimal strategy computation.
- **Mechanism**: The frontier P_{H,K} = {L*_{H,K}(s)·1_K - s | min(s) = 0} unifies dynamic programming (Bellman's value function VH) with Pareto optimization (trade-offs across K outcomes). Instead of solving the full game tree backward, one characterizes the set of all achievable future payout configurations.
- **Core assumption**: The value function VH is convex (proven by induction in Lemma 31) and satisfies coordinate-wise monotonicity (Lemma 29), ensuring the frontier is well-behaved.
- **Evidence anchors**: [abstract]: "the Bellman-Pareto frontier, which unifies dynamic programming updates... with the multi-criteria optimization framework"; [section 4.2]: Definition 11 and Theorem 12.

### Mechanism 3
- **Claim**: Opportunistic bookmaking reduces guaranteed loss when gamblers act suboptimally, analogous to a water-filling process with a dynamic water level.
- **Mechanism**: The state vector s tracks committed payouts per outcome. The "water level" L*_{H,K}(s) represents the total worst-case loss. When the gambler bets decisively (one outcome), only that outcome's "bar" rises, maintaining water level. When bets distribute across outcomes (suboptimal), all bars rise partially, and the water level can be lowered—the bookmaker exploits this by recomputing L* using the updated state with a reduced horizon.
- **Core assumption**: Past gambler behavior provides information about future behavior; the bookmaker cannot predict this but can opportunistically capitalize on revealed non-optimality.
- **Evidence anchors**: [abstract]: "opportunistic bookmaking... generalizes the setting... when the gambler's past behavior was not optimal"; [section 3.1]: Figure 1 and water-filling explanation.

## Foundational Learning

- **Concept: Dynamic Programming / Bellman's Equation**
  - Why needed here: The value function V_H(s) is defined recursively, analogous to MDP value functions but with vector-valued outcomes and delayed terminal rewards.
  - Quick check question: Given a state s and one remaining round (H=1), can you compute the optimal bookmaker action that equalizes losses across all K decisive gambler responses?

- **Concept: Elementary Symmetric Polynomials (ESPs)**
  - Why needed here: ESPs σ_m(s) = Σ_{I∈([K] choose m)} Π_{k∈I} s(k) appear throughout the polynomial constructions. Understanding their recurrence (Lemma 24) is essential for efficient computation.
  - Quick check question: For vector s = (2, 3, 4), what are σ_0(s), σ_1(s), σ_2(s), σ_3(s)?

- **Concept: Zero-Sum Game Theory / Nash Equilibrium**
  - Why needed here: Theorem 9 characterizes a Nash equilibrium where the bookmaker's unique optimal action equalizes the loss from any decisive gambler action. This is related to minimax but in a sequential setting with vector payoffs.
  - Quick check question: Why must the optimal bookmaker action r* satisfy V_H(s) = V_{H-1}(s + q⊘r*) for all q ∈ E_K (decisive gambler actions)?

## Architecture Onboarding

- **Component map**: State Manager -> Polynomial Builder -> Root Finder -> Residual Loss Calculator -> Odds Generator
- **Critical path**: Root finding → determines L* → enables residual vector v → feeds odds computation. The per-round bottleneck is polynomial construction and root finding, both O(K²).
- **Design tradeoffs**:
  - Exact vs. ε-approximate root finding: ε-approximation adds at most 2ε loss per non-decisive round; total O(Tε) overhead
  - Precomputation vs. on-demand: Binomial coefficients and ESP recurrence formulas can be precomputed; state-dependent ESPs require O(K²) per round
  - Numerical precision: For large T, polynomial coefficients involve rising factorials T^m which grow rapidly; consider scaling transformations
- **Failure signatures**:
  - Division by zero in odds computation: Occurs if residual vector v has negative components; indicates state s exceeded optimal loss water level
  - Non-convergence in root finding: The polynomial may have no real roots if state is corrupted or horizon H < 0
  - State vector overflow: For very large T, s components can exceed numerical limits
- **First 3 experiments**:
  1. **Validate K=2 case**: Implement for binary outcomes; verify L*_{T,2} = T + √T and that odds match closed-form solution from Bhatt et al. (2025)
  2. **Test opportunistic reduction**: Simulate gambler alternating decisive bets vs. distributed bets; verify loss reduces when gambler is non-decisive
  3. **Stress test scaling**: Run with K=40 and T=10,000; measure actual per-round complexity and verify it remains O(K²) ~ 1600 operations

## Open Questions the Paper Calls Out

- **Can the Bellman-Pareto frontier framework be extended to characterize optimal strategies under alternative loss functions (e.g., logarithmic, hinge losses) or constrained betting settings?**
  - Basis: [explicit] The Conclusion states: "Future work may consider extending our approach to alternative loss functions or constrained settings, building on the structure offered by the Bellman-Pareto framework."
  - Why unresolved: The current analysis relies on specific polynomial structures from the ratio-form loss that may not directly generalize to other loss functions.

- **Can the Bellman-Pareto frontier technique be applied to other vector-valued online learning and game theory problems beyond bookmaking?**
  - Basis: [explicit] The Conclusion states: "The key to our analysis was the characterization of the Bellman-Pareto frontier, which may have broader applications to vector-valued problems in online learning and game theory."
  - Why unresolved: While the technique unifies dynamic programming with Pareto optimization for this specific game structure, its transferability to other multi-objective sequential settings remains unexplored.

- **How does the optimal bookmaking strategy change when the overround parameter Γ is allowed to vary dynamically across rounds rather than remaining fixed?**
  - Basis: [inferred] The paper assumes a time-independent overround parameter Γ (Section 1, "assumed here to be time-independent"). Real-world bookmakers adjust margins based on accumulated exposure.
  - Why unresolved: The polynomial structure and Bellman-Pareto analysis depend on the fixed Γ assumption; time-varying margins introduce additional strategic dimensions.

## Limitations

- The Bellman-Pareto frontier construction lacks external validation as no corpus papers use this exact framework, creating uncertainty about broader applicability beyond bookmaking.
- Numerical stability for large K and T remains incompletely specified, particularly regarding polynomial root finding when coefficients involve rapidly growing rising factorials.
- The claim that decisive betting is optimal for the gambler relies on structural assumptions about the loss function that aren't tested against non-standard adversarial behaviors.

## Confidence

- **High Confidence**: The polynomial characterization of optimal loss and its closed-form solutions for small K are well-supported by explicit equations and verified against related work.
- **Medium Confidence**: The Bellman-Pareto frontier is theoretically sound but novel; its implementation details and numerical behavior require empirical validation.
- **Low Confidence**: Opportunistic bookmaking's practical advantage against sophisticated adversarial strategies is claimed but not stress-tested with strategic deviations from the decisive betting assumption.

## Next Checks

1. **Structural Validation**: Implement and verify the Bellman-Pareto frontier for K=2 and K=3 against closed-form solutions, ensuring the convex value function property holds numerically.

2. **Adversarial Stress Test**: Design gambler strategies that alternate between decisive and non-decisive betting to probe whether opportunistic adjustments can be exploited, measuring actual vs. guaranteed loss.

3. **Scaling Analysis**: Run comprehensive tests for K=20, T=10^6 to measure actual per-round complexity, numerical precision requirements for root finding, and verify regret scales as β_K·√T with β_K from Hermite polynomials.