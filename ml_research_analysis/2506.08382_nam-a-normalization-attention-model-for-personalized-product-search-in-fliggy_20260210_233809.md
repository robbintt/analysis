---
ver: rpa2
title: 'NAM: A Normalization Attention Model for Personalized Product Search In Fliggy'
arxiv_id: '2506.08382'
source_url: https://arxiv.org/abs/2506.08382
tags:
- item
- items
- user
- attention
- search
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: 'This paper addresses the problem of personalized product search
  in e-commerce platforms, specifically tackling the challenges of item popularity
  bias and heterogeneous user purchasing propensity. The proposed Normalization Attention
  Model (NAM) introduces two key innovations: a gating mechanism using Inverse Item
  Frequency (IIF) to determine when to personalize based on item popularity, and a
  global normalized attention mechanism that normalizes item similarities from a global
  perspective to address the Matthew effect.'
---

# NAM: A Normalization Attention Model for Personalized Product Search In Fliggy
## Quick Facts
- arXiv ID: 2506.08382
- Source URL: https://arxiv.org/abs/2506.08382
- Reference count: 26
- Key outcome: Proposed NAM model achieves 0.001 improvement in CTCVR AUC and 0.002 improvement in CTCVR GAUC over state-of-the-art baselines, with 0.8% conversion rate increase in online A/B testing

## Executive Summary
This paper introduces the Normalization Attention Model (NAM) to address two critical challenges in personalized product search for e-commerce: item popularity bias and heterogeneous user purchasing propensity. The model employs an innovative gating mechanism using Inverse Item Frequency (IIF) to determine when to personalize search results based on item popularity, combined with a global normalized attention mechanism that normalizes item similarities from a global perspective to mitigate the Matthew effect. Extensive offline experiments on Fliggy's industrial dataset demonstrate significant improvements over existing state-of-the-art models, while online A/B testing validates the practical effectiveness with a 0.8% increase in conversion rate.

## Method Summary
NAM tackles personalized product search by introducing two key innovations: an IIF-based gating mechanism that controls when personalization should be applied based on item popularity, and a global normalized attention mechanism that addresses the Matthew effect in e-commerce search. The IIF gating uses item frequency to decide whether to apply user preference modeling, while the global normalization ensures fair treatment of items regardless of their popularity by normalizing attention scores from a global perspective. This dual approach simultaneously addresses both the item popularity bias and heterogeneous user purchasing propensity problems that plague traditional personalized search systems.

## Key Results
- Achieved 0.001 improvement in CTCVR AUC and 0.002 improvement in CTCVR GAUC over state-of-the-art baselines in offline experiments
- Demonstrated 0.8% increase in conversion rate compared to existing production system in online A/B testing
- Successfully addressed item popularity bias and heterogeneous user purchasing propensity challenges in Fliggy's e-commerce platform

## Why This Works (Mechanism)
NAM works by addressing two fundamental problems in personalized e-commerce search: item popularity bias and heterogeneous user purchasing propensity. The IIF gating mechanism uses Inverse Item Frequency to determine when to apply personalization, effectively reducing the influence of extremely popular items that would otherwise dominate search results regardless of user preferences. The global normalized attention mechanism normalizes item similarities from a global perspective, ensuring that less popular items receive fair consideration and preventing the Matthew effect where popular items become increasingly dominant. Together, these mechanisms create a balanced search system that respects both item characteristics and user preferences while maintaining fairness across the item distribution.

## Foundational Learning
- **Inverse Item Frequency (IIF)**: Measures how rare or common an item is in the dataset; needed to distinguish between popular and niche items, quick check: verify IIF values correlate with actual item popularity
- **Matthew Effect**: The phenomenon where "the rich get richer" - popular items become increasingly visible while less popular items remain hidden; needed to understand the fairness problem in search ranking, quick check: measure popularity distribution skew
- **Global Normalization**: Normalizing attention scores across all items rather than locally; needed to ensure fair treatment of all items regardless of popularity, quick check: verify attention scores are properly scaled
- **Gating Mechanisms**: Control flow of information based on learned conditions; needed to dynamically switch between personalization modes, quick check: validate gate activation patterns
- **Conversion Rate Prediction**: Estimating probability of purchase conversion; needed as the primary optimization target for e-commerce search, quick check: compare predicted vs actual conversion rates
- **GAUC (Group AUC)**: Area under ROC curve calculated across user groups; needed to measure ranking quality across diverse user segments, quick check: verify GAUC improvements translate to real user satisfaction

## Architecture Onboarding
**Component Map**: Input Features -> IIF Gating -> User Preference Encoding -> Global Normalized Attention -> Ranking Score
**Critical Path**: User features and item features → IIF computation → Gating decision → Attention computation → Global normalization → Final ranking score
**Design Tradeoffs**: The IIF gating introduces additional computation but enables more intelligent personalization; global normalization requires maintaining global item statistics but ensures fairness
**Failure Signatures**: If IIF threshold is too high, personalization may be applied too frequently to popular items; if global normalization is too aggressive, it may suppress legitimate popularity signals
**First Experiments**: 1) Verify IIF values correctly identify popular vs niche items, 2) Test gating mechanism with synthetic popularity distributions, 3) Validate global normalization preserves ranking quality while reducing popularity bias

## Open Questions the Paper Calls Out
None

## Limitations
- Uses proprietary industrial data from Fliggy, preventing independent replication and verification
- Does not provide details about specific baseline models used for comparison
- Reported metrics (CTCVR AUC, CTCVR GAUC) are specific to conversion prediction task and may not generalize to other e-commerce scenarios

## Confidence
- **High Confidence**: Conceptual framework of using IIF gating and global normalization to address item popularity bias is theoretically sound
- **Medium Confidence**: Offline experimental results show improvements, but cannot be independently verified due to proprietary data
- **Low Confidence**: Online A/B test results are difficult to evaluate without experimental setup details

## Next Checks
1. Replicate NAM architecture using publicly available e-commerce datasets (e.g., Amazon product data) to verify effectiveness across different platforms
2. Conduct ablation studies to isolate contribution of each component (IIF gating, global normalization) and compare against wider range of baseline models
3. Perform sensitivity analysis on IIF threshold parameter and evaluate model's robustness across different popularity distributions and user segments