---
ver: rpa2
title: Challenges in Modelling and Solving Plotting with PDDL
arxiv_id: '2310.01470'
source_url: https://arxiv.org/abs/2310.01470
tags:
- planning
- number
- block
- plotting
- coloured
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: The paper models and solves Plotting, a tile-matching puzzle game,
  using PDDL and constraint programming. The authors highlight the challenges of modeling
  Plotting in PDDL due to limitations in handling numeric parameters, multi-valued
  variables, and conditional effects.
---

# Challenges in Modelling and Solving Plotting with PDDL

## Quick Facts
- arXiv ID: 2310.01470
- Source URL: https://arxiv.org/abs/2310.01470
- Reference count: 15
- Primary result: Constraint programming solvers outperform PDDL-based planners on Plotting puzzle instances due to grounding and expressiveness limitations in PDDL.

## Executive Summary
This paper models and solves Plotting, a tile-matching puzzle game, using both PDDL and constraint programming. The authors demonstrate that PDDL's limitations in handling numeric parameters, multi-valued variables, and conditional effects make modeling Plotting challenging and inefficient. Empirical results show that constraint programming solvers (Chuffed, Kissat, OR-Tools) significantly outperform the PDDL-based planner (Fast Downward) on 522 generated instances, with Fast Downward struggling with grounding due to the problem's complexity.

## Method Summary
The authors generated 522 Plotting instances with varying difficulties (8-49 blocks, 2-6 colors) and created both PDDL and constraint programming models. They then compared the performance of Fast Downward (a PDDL-based planner) with constraint programming solvers (Chuffed, Kissat, OR-Tools) in terms of instances solved and PAR2 score. The models were encoded to represent the game state, actions, and goal conditions, with the PDDL model requiring complex encodings to work around language limitations.

## Key Results
- Constraint programming solvers (Chuffed, Kissat, OR-Tools) outperform PDDL-based planner (Fast Downward) on Plotting instances
- Fast Downward struggles with grounding due to the problem's complexity and runs out of memory or times out on most instances
- PDDL's limitations in handling numeric parameters, multi-valued variables, and conditional effects necessitate complex encodings that increase model size and grounding complexity

## Why This Works (Mechanism)

### Mechanism 1
- Claim: PDDL's numeric and multi-valued variable limitations prevent efficient modeling of the Plotting game's state transitions.
- Mechanism: Plotting requires numeric indices for rows/columns and multi-valued variables to represent the block grid state. PDDL's restriction on numeric terms as parameters forces complex encodings with quantifiers and auxiliary predicates, increasing model size and grounding complexity.
- Core assumption: The model's expressivity limitations in PDDL directly impact grounding efficiency and solver performance.
- Evidence anchors:
  - [abstract] The paper highlights the challenges of modeling Plotting in PDDL due to limitations in handling numeric parameters, multi-valued variables, and conditional effects.
  - [section] "Fox and Long (2003) states: Numeric expressions are not allowed to appear as terms in the language... Functions in PDDL2.1 are restricted to be of type Objectn → R... In other words, no action, predicate or function can have a number as a parameter."

### Mechanism 2
- Claim: Grounding-based planners struggle with the Plotting model due to its high parameter arity and conditional effects.
- Mechanism: Fast Downward and similar planners rely on exhaustive grounding of all parameter combinations. Plotting's model requires many auxiliary predicates and quantified expressions to simulate arithmetic, causing combinatorial explosion in the grounding phase and exhausting memory.
- Core assumption: Grounding complexity is the primary bottleneck for planning solvers on Plotting.
- Evidence anchors:
  - [abstract] "Fast Downward struggling with grounding due to the problem's complexity."
  - [section] "Fast Downward runs out of memory for 249 and times out for 195. Further, when Fast Downward exceeds resource bounds, it always does so during grounding."

### Mechanism 3
- Claim: Constraint programming solvers outperform PDDL planners on Plotting because they natively support numeric reasoning and multi-valued variables.
- Mechanism: CP solvers like Chuffed and OR-Tools can encode the Plotting state as integer matrices and use native arithmetic constraints, avoiding the need for quantified encodings. This leads to more compact models and faster solving times.
- Core assumption: The CP approach's native language features map directly to the problem structure, reducing encoding overhead.
- Evidence anchors:
  - [abstract] "Empirical results show that constraint programming solvers (Chuffed, Kissat, OR-Tools) outperform the PDDL-based planner (Fast Downward) on these instances."
  - [section] "Constraint modelling languages can be used to express planning problems... These languages are more expressive than PDDL and permit a succinct lifted representation of Plotting, providing access to lifted solving approaches that don't need exhaustive grounding."

## Foundational Learning

- Concept: Grounding in classical planning
  - Why needed here: Understanding why Fast Downward fails requires knowing that grounding expands all action schemas over all parameter tuples, which explodes combinatorially for Plotting.
  - Quick check question: What is the difference between a lifted representation and a grounded one in planning?

- Concept: PDDL expressiveness limitations
  - Why needed here: The paper's core claim is that PDDL's restrictions (no numeric terms as parameters, no multi-valued variables) force awkward encodings. Knowing these limits is essential to evaluate the argument.
  - Quick check question: Which PDDL feature would most directly simplify the Plotting model?

- Concept: Constraint programming vs planning
  - Why needed here: The paper contrasts CP and PDDL solvers. Knowing how CP natively handles numeric variables and arithmetic helps explain why CP solvers succeed where PDDL fails.
  - Quick check question: In what way does a CP model avoid the grounding bottleneck that affects classical planners?

## Architecture Onboarding

- Component map:
  Instance generator -> Models (PDDL/CP) -> Solver (Fast Downward / Chuffed / Kissat / OR-Tools) -> Results aggregation

- Critical path:
  1. Generate Plotting instance (grid, colors, goal)
  2. Encode in PDDL and CP languages
  3. Run grounding (PDDL) or direct solving (CP)
  4. Measure time/memory, collect PAR2 score

- Design tradeoffs:
  - PDDL: More standardized but less expressive → larger models, grounding issues
  - CP: More expressive, avoids grounding but requires manual modeling effort
  - Instance generation: Symmetry breaking reduces instance count but may affect benchmark representativeness

- Failure signatures:
  - Fast Downward: Memory exhaustion during grounding, timeouts
  - CP solvers: May run out of memory if model is too large, but generally more robust here
  - Incorrect model: Invalid plans or unsatisfiable results

- First 3 experiments:
  1. Run Fast Downward on a minimal 3x3 Plotting instance to confirm grounding behavior
  2. Re-encode the same instance in Essence Prime and solve with Chuffed to compare model size and solve time
  3. Vary the number of colors in the instance and measure grounding time/memory growth for PDDL vs CP

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How can the grounding process for complex planning problems like Plotting be improved to handle the computational burden?
- Basis in paper: [explicit] The paper discusses the challenges of grounding the PDDL model for Plotting and suggests exploring models that are easier to ground, as well as improvements to grounding techniques like partial grounding and pruning-during-grounding.
- Why unresolved: The paper identifies the grounding issue as a significant challenge but does not provide a definitive solution, indicating that further research is needed.
- What evidence would resolve it: Development and testing of new grounding techniques or models that reduce computational load and improve the efficiency of the grounding process for complex planning problems.

### Open Question 2
- Question: Can more expressive planning languages, such as Functional STRIPS or Planning Modulo Theories, be effectively integrated into current planning systems to handle complex problems like Plotting?
- Basis in paper: [explicit] The paper mentions the limitations of PDDL for modeling Plotting and suggests that more expressive languages could alleviate these issues, but notes that such approaches are not actively maintained or released.
- Why unresolved: While the potential benefits of more expressive languages are acknowledged, practical implementation and integration into existing systems remain unexplored.
- What evidence would resolve it: Successful implementation and evaluation of these languages in current planning systems, demonstrating improved handling of complex problems like Plotting.

### Open Question 3
- Question: What are the potential benefits and limitations of using constraint programming models over PDDL for solving complex planning problems like Plotting?
- Basis in paper: [explicit] The paper compares the performance of constraint programming solvers (Chuffed, Kissat, OR-Tools) with the PDDL-based planner (Fast Downward), showing that CP solvers outperform the PDDL planner on Plotting instances.
- Why unresolved: The paper provides empirical evidence of CP solvers' superiority but does not explore the broader implications or limitations of using CP models for other complex planning problems.
- What evidence would resolve it: Comparative studies of CP models versus PDDL models across a wider range of complex planning problems, assessing both performance and practical considerations.

## Limitations
- The paper focuses on a single puzzle game (Plotting) and may not generalize to all planning domains
- The specific details of the PDDL and constraint programming models are not provided in the paper
- The paper does not explore alternative PDDL encodings or lifted solving approaches that might mitigate grounding issues

## Confidence
- Confidence: Medium - The paper provides empirical evidence for CP outperforming PDDL on Plotting, but the sample size (522 instances) and benchmark representativeness are unclear.
- Confidence: Medium - The paper attributes Fast Downward's failure primarily to grounding complexity, but other factors like heuristic quality or search space size are not ruled out.
- Confidence: Low - The paper does not explore alternative PDDL encodings or lifted solving approaches that might mitigate grounding issues.

## Next Checks
1. Generate a larger, more diverse set of Plotting instances (e.g., different grid sizes, block configurations) to test whether CP consistently outperforms PDDL across problem classes.
2. Formally verify the correctness of the PDDL and CP models against the Plotting rules to ensure no bugs in the encoding cause the observed performance differences.
3. Experiment with alternative PDDL encodings (e.g., using lifted representations or minimizing parameter arity) to determine if grounding can be made tractable without sacrificing model expressiveness.