---
ver: rpa2
title: MedDM:LLM-executable clinical guidance tree for clinical decision-making
arxiv_id: '2312.02441'
source_url: https://arxiv.org/abs/2312.02441
tags:
- clinical
- medical
- node
- tree
- flowchart
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper proposes a clinical decision-making framework using
  large language models (LLMs). It introduces LLM-executable clinical guidance trees
  (CGTs), a novel decision tree structure that enables LLMs to perform clinical reasoning.
---

# MedDM:LLM-executable clinical guidance tree for clinical decision-making

## Quick Facts
- arXiv ID: 2312.02441
- Source URL: https://arxiv.org/abs/2312.02441
- Reference count: 2
- Key outcome: Faster R-CNN model achieves 97% accuracy in basic shape detection for flowchart recognition

## Executive Summary
This paper introduces MedDM, a clinical decision-making framework that leverages large language models (LLMs) through LLM-executable clinical guidance trees (CGTs). The framework addresses the limitation of current medical LLMs by enabling structured clinical reasoning through natural language decision trees extracted from medical literature. By converting complex flowcharts into standardized CGTs and implementing a decision-retrieval based generation framework, the system guides multi-turn patient-LLM dialogues for improved medical diagnosis and treatment recommendations.

## Method Summary
The authors collect 5,000 medical literature sources and extract 1,202 clinical guidance trees from flowcharts using a multi-step pipeline. This includes layout analysis with PyMuPDF and PaddleOCR, Faster R-CNN shape detection (97% mAP), OpenCV contour detection with DBSCAN clustering for connector recognition, and CnOCR for text recognition. The flowchart recognition pipeline converts visual decision trees into standardized LLM-executable CGTs using an If-Elif-Else Tree structure. A Patient-LLM multi-turn dialogue system uses vectorization and cosine similarity to retrieve relevant CGTs based on patient information, guiding the LLM through clinical reasoning for differential diagnosis and treatment recommendations.

## Key Results
- Faster R-CNN model achieves 97% mAP accuracy in basic shape detection for flowchart recognition
- Pipeline successfully converts 1,202 clinical guidance trees from 5,000 medical literature sources
- Framework covers 12 hospital departments and over 500 diseases

## Why This Works (Mechanism)

### Mechanism 1
The LLM-executable clinical guidance tree (CGT) enables LLMs to perform structured clinical reasoning by translating decision logic into natural language prompts. Each condition node is expressed as a question or statement, and action nodes provide diagnostic or treatment outcomes. This format aligns with LLMs' language comprehension capabilities, allowing them to traverse the tree through multi-turn dialogue.

### Mechanism 2
The flowchart recognition pipeline converts complex clinical decision-making diagrams into standardized CGTs that LLMs can process. Using Faster R-CNN for shape detection, OpenCV for contour detection, and CnOCR for text recognition, the pipeline reconstructs flowcharts into decision trees through heuristic search algorithms.

### Mechanism 3
The decision-retrieval based generation framework retrieves relevant CGTs based on patient information and uses them to guide LLM responses in multi-turn dialogues. Patient information and dialogue history are vectorized and compared against a database of CGT vectors using cosine similarity, enabling context-aware guidance.

## Foundational Learning

- Concept: Decision tree structures and their application in clinical decision-making
  - Why needed here: Understanding how decision trees represent clinical reasoning is crucial for designing the LLM-executable CGT and the flowchart recognition pipeline.
  - Quick check question: What are the key components of a decision tree, and how are they used to represent clinical decision-making processes?

- Concept: Natural language processing and large language models
  - Why needed here: The LLM-executable CGT relies on the LLM's ability to interpret and reason over natural language node content, and the decision-retrieval framework uses vectorization and similarity measures.
  - Quick check question: How do LLMs process and generate natural language, and what are the key considerations for designing prompts that guide their reasoning?

- Concept: Computer vision and image processing for flowchart recognition
  - Why needed here: The flowchart recognition pipeline uses object detection, contour detection, and text recognition to convert flowcharts into CGTs.
  - Quick check question: What are the key steps in flowchart recognition, and how do techniques like Faster R-CNN, contour detection, and OCR contribute to accurate conversion?

## Architecture Onboarding

- Component map: Flowchart Recognition Pipeline (Faster R-CNN, OpenCV, CnOCR) -> CGT Construction (Heuristic search algorithm) -> Decision-Retrieval Framework (Vectorization, cosine similarity) -> LLM-Executable CGT Inference Engine (Prompt engineering, multi-turn dialogue)

- Critical path: 1. Flowchart Recognition Pipeline converts flowcharts to CGTs 2. CGTs are vectorized and stored in a database 3. Patient information is vectorized and compared to CGT vectors 4. Most relevant CGT is retrieved and used to guide LLM responses 5. LLM engages in multi-turn dialogue with patient based on CGT logic

- Design tradeoffs: Using natural language nodes in CGTs vs. structured rule-based representations: Natural language is more LLM-friendly but may be less precise. Vectorizing entire CGTs vs. individual nodes: Vectorizing entire trees captures context but may be computationally expensive.

- Failure signatures: Incorrect diagnoses or treatment recommendations, LLM asking irrelevant or repetitive questions, Flowchart recognition pipeline failing to accurately convert complex flowcharts

- First 3 experiments: 1. Test the flowchart recognition pipeline on a set of manually labeled flowcharts to measure shape detection and connector recognition accuracy 2. Evaluate the decision-retrieval framework by comparing the retrieved CGTs against a set of known relevant trees for a given patient case 3. Conduct a user study with medical professionals to assess the quality and accuracy of LLM responses guided by the LLM-executable CGT in simulated patient dialogues

## Open Questions the Paper Calls Out
- How effective is the LLM-executable CGT framework in handling rare or complex medical cases that require nuanced clinical reasoning beyond standard decision trees?
- Can the flowchart recognition pipeline accurately handle variations in flowchart styles and formats across different medical literature sources?
- How scalable is the LLM-executable CGT framework for handling a large number of medical conditions and guidelines?

## Limitations
- The paper lacks comprehensive evaluation of the end-to-end system's clinical accuracy and safety, with only flowchart recognition pipeline accuracy reported
- Reliance on natural language representations for decision logic introduces potential ambiguity that could lead to incorrect clinical reasoning
- The heuristic search algorithm for flowchart reconstruction is not fully specified, making it difficult to assess its robustness across diverse flowchart structures

## Confidence

- High Confidence: The technical feasibility of converting flowcharts to CGTs using computer vision techniques (Faster R-CNN, contour detection, OCR) is well-established and demonstrated through the 97% mAP result
- Medium Confidence: The concept of using natural language CGTs to guide LLM reasoning is sound, but the practical effectiveness depends heavily on prompt engineering quality and LLM interpretation accuracy, which are not fully validated
- Low Confidence: The decision-retrieval framework's ability to match patient cases with appropriate CGTs using cosine similarity lacks empirical validation, raising concerns about retrieval accuracy in real-world clinical scenarios

## Next Checks

1. Clinical Reasoning Accuracy Test: Design a comprehensive evaluation framework comparing the LLM's diagnostic accuracy using CGTs against both baseline LLMs and human experts across standardized clinical scenarios, measuring both diagnostic accuracy and clinical safety metrics.

2. Flowchart Recognition Robustness: Test the flowchart recognition pipeline on diverse flowchart styles, resolutions, and complex structures from different medical institutions to assess generalizability and identify failure patterns in shape detection and connector recognition.

3. Multi-turn Dialogue Quality Assessment: Conduct a controlled study with medical professionals to evaluate the quality of patient-LLM dialogues guided by CGTs, measuring factors such as question relevance, diagnostic progression, and avoidance of contradictory recommendations.