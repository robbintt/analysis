---
ver: rpa2
title: Computing Universal Plans for Partially Observable Multi-Agent Routing Using
  Answer Set Programming
arxiv_id: '2305.16203'
source_url: https://arxiv.org/abs/2305.16203
tags:
- agents
- goal
- other
- self
- policy
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper presents ASP-MAUPF, a system for computing universal
  policies for partially observable multi-agent pathfinding (MAPF). The system uses
  Answer Set Programming to encode and solve the problem of finding collision-free
  policies that guide agents to their goals based on local observations.
---

# Computing Universal Plans for Partially Observable Multi-Agent Routing Using Answer Set Programming

## Quick Facts
- arXiv ID: 2305.16203
- Source URL: https://arxiv.org/abs/2305.16203
- Reference count: 14
- Primary result: System computes universal policies for MAPF with up to 5 agents on 6x6 maps in reasonable time

## Executive Summary
This paper introduces ASP-MAUPF, a system that uses Answer Set Programming to compute universal policies for partially observable multi-agent pathfinding (MAPF). The system addresses the challenge of coordinating multiple agents with limited sensor range on grid maps, where each agent must reach its goal without collisions based only on local observations. The approach encodes the MAPF problem as an ASP program, enabling the computation of decentralized plans that work for all possible initial agent configurations. The authors demonstrate that range-2 sensors are sufficient for finding feasible policies on arbitrary maps, show how action preferences can optimize policies, and prove that no universal traffic rules exist that work independently of agent locations.

## Method Summary
The system encodes the MAPF problem as an ASP program that represents global states, transitions, local observations, and policies. The encoding includes collision detection, goal-reaching conditions, and optimization criteria. The Clingo ASP solver is used to find feasible policies, which are then extracted and formatted as output. The approach handles partial observability by defining local states based on sensor range and mapping these to action policies. Action preferences can be incorporated to prune the search space and optimize for criteria like sum-of-makespan. The system can handle maps with obstacles and arbitrary goal profiles, computing policies that guarantee collision-free paths to goals for all possible initial configurations.

## Key Results
- Sensors with range 2 are sufficient to find feasible policies for any goal profile on arbitrary maps
- Action preferences can prune the search space and find more efficient policies with improved sum-of-makespan
- No universal traffic rules exist that work for all configurations independent of agent locations
- System solves instances with up to 5 agents on 6x6 maps in reasonable time (e.g., 41 seconds for 2 agents on 6x6)

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Sensors with range 2 are sufficient to find feasible policies for any goal profile on arbitrary maps
- Mechanism: With range-2 sensors, each agent can detect all possible collision scenarios within two moves, enabling it to coordinate locally without global knowledge
- Core assumption: The map is finite and agents can use stop actions to resolve potential conflicts
- Evidence anchors:
  - [abstract] states "sensors of range 2 are sufficient to find feasible policies for any goal profile on arbitrary maps"
  - [section] reports experiments showing sensors of range 2 solve all tested goal profiles where range 1 fails
  - [corpus] shows related work on locally interdependent multi-agent MDPs, suggesting locality can be sufficient
- Break condition: If the map contains long channels or complex topologies where two-step visibility is insufficient to detect impending conflicts

### Mechanism 2
- Claim: Action preferences can be used to prune the search space and find more efficient policies
- Mechanism: By encoding action costs (e.g., Manhattan distance to goal) as ASP constraints, the solver is guided toward policies that prioritize progress toward goals
- Core assumption: The cost function accurately reflects desirable behavior and doesn't eliminate feasible policies
- Evidence anchors:
  - [section] describes how to axiomatize cost predicates and integrate them into policy constraints
  - [section] shows sum-of-makespan improvements when using action preferences vs. from-scratch optimization
  - [corpus] indicates related work on heuristic-guided planning, supporting the pruning concept
- Break condition: If the preference function is too restrictive, it may eliminate all feasible policies for certain configurations

### Mechanism 3
- Claim: No universal traffic rules exist that work for all configurations
- Mechanism: Traffic rules must depend on agent locations relative to boundaries; rules independent of location fail because agents behave differently near map edges
- Core assumption: The map has boundaries that create asymmetric situations not captured by purely relative rules
- Evidence anchors:
  - [section] states "no such traffic rule is found even if we does not force agents to follow default actions yet equip them with the most powerful sensors of range five"
  - [section] explains that boundary proximity creates different coordination needs
  - [corpus] shows related work on logically constrained MDPs, suggesting context-dependence is common
- Break condition: If the map is infinite or wraps around, location-independent rules might become sufficient

## Foundational Learning

- Concept: Answer Set Programming (ASP) encoding of multi-agent pathfinding
  - Why needed here: ASP allows declarative specification of constraints and optimization criteria for policy computation
  - Quick check question: How does ASP handle the exponential state space of multi-agent coordination differently from search-based methods?

- Concept: Partial observability and local state representation
  - Why needed here: Agents only see within their sensor range, requiring policies to map local observations to actions
  - Quick check question: How many local states does an agent have on a 4x4 grid with range-2 sensors and 3 other agents?

- Concept: Policy feasibility conditions (collision-free, goal-reaching, finite termination)
  - Why needed here: Ensures computed policies are practical for deployment in uncertain environments
  - Quick check question: What makes a goal profile "proper" and why is this condition necessary for feasibility?

## Architecture Onboarding

- Component map: Problem specification → ASP encoding → Clingo solver → Policy validation → Output formatting; Sensor model → Local state space → Policy constraints
- Critical path: Problem specification → ASP encoding → Solver execution → Policy validation → Output formatting
- Design tradeoffs: Complete enumeration of local states vs. computational tractability; strict action preferences vs. feasibility guarantees
- Failure signatures: Infeasible policies indicate either improper goal profiles or insufficient sensor range; optimization failures suggest need for better heuristics
- First 3 experiments:
  1. Run on 3x3 grid with 2 agents, range-1 sensors, verify feasibility computation time matches reported ~0.06s
  2. Test range-1 vs range-2 sensors on same configuration to observe feasibility difference
  3. Apply action preferences to simple configuration and measure sum-of-makespan improvement

## Open Questions the Paper Calls Out

### Open Question 1
- Question: What is the precise theoretical characterization of goal profiles that guarantee the existence of feasible policies for agents with sensors of range 2?
- Basis in paper: [explicit] The paper conjectures that sensors of range 2 are sufficient for any arbitrary map and goal profile, but leaves formal characterization as future work
- Why unresolved: The paper only provides experimental evidence and informal reasoning for this conjecture, without a formal proof or complete characterization
- What evidence would resolve it: A formal mathematical proof showing that any proper goal profile (as defined in the paper) on an arbitrary map can be solved by agents with sensors of range 2, or a counterexample demonstrating a case where range 2 sensors are insufficient

### Open Question 2
- Question: How can the system be scaled to handle large maps and swarms of robots, as required for real-world applications like warehouse automation?
- Basis in paper: [inferred] The paper acknowledges that scaling to large maps and many agents is intractable for the current system, and suggests potential directions like computing local policies for subregions
- Why unresolved: The paper only provides preliminary suggestions for scaling without implementing or evaluating these approaches
- What evidence would resolve it: Implementation and experimental evaluation of the suggested approaches (e.g., local coordination in subregions combined with single-agent planners) on large-scale problems, demonstrating improved scalability while maintaining solution quality

### Open Question 3
- Question: Are there universal traffic rules that can be discovered for agents to follow, independent of their specific locations on the map?
- Basis in paper: [explicit] The paper investigates whether traffic rules can be discovered and finds that location-dependent rules exist but location-independent rules do not, even with powerful sensors
- Why unresolved: The paper only tests a limited set of scenarios and sensor ranges, and does not provide a comprehensive analysis of when location-independent rules might exist
- What evidence would resolve it: A systematic exploration of different map types, agent configurations, and sensor ranges to determine the conditions under which location-independent traffic rules can or cannot be found, potentially leading to a theoretical understanding of their existence

## Limitations
- Theoretical sufficiency of range-2 sensors lacks formal proof and relies on experimental validation only
- Computational complexity for larger instances (beyond 5 agents on 6x6 maps) is not characterized
- Generalizability to non-grid maps or different action spaces is not established

## Confidence

- High confidence: The feasibility of computed policies on tested instances; the ASP encoding methodology; the experimental results for the specific configurations tested
- Medium confidence: The sufficiency of range-2 sensors for arbitrary maps; the effectiveness of action preferences in practice; the impossibility of universal traffic rules
- Low confidence: The scalability claims for larger instances; the theoretical bounds on computational complexity; the generalizability to non-grid domains

## Next Checks

1. Formal proof or counterexample for the claim that range-2 sensors are sufficient for all map topologies
2. Complexity analysis of the ASP encoding to establish computational limits for larger problem instances
3. Validation on non-grid maps (hexagonal, continuous, or 3D spaces) to test domain generality