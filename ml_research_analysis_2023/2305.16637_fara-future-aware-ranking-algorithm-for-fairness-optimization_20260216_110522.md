---
ver: rpa2
title: 'FARA: Future-aware Ranking Algorithm for Fairness Optimization'
arxiv_id: '2305.16637'
source_url: https://arxiv.org/abs/2305.16637
tags:
- ranking
- fairness
- exposure
- fara
- fair
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the problem of ranking relevance and fairness
  joint optimization in information retrieval systems. Most existing fair ranking
  algorithms are greedy and only optimize for the next immediate session, leading
  to suboptimal performance in the long term.
---

# FARA: Future-aware Ranking Algorithm for Fairness Optimization

## Quick Facts
- arXiv ID: 2305.16637
- Source URL: https://arxiv.org/abs/2305.16637
- Reference count: 40
- Key outcome: Proposes FARA, a future-aware ranking algorithm that jointly optimizes multiple ranklists to improve long-term fairness and relevance in information retrieval systems

## Executive Summary
This paper addresses the challenge of jointly optimizing ranking relevance and fairness in information retrieval systems. Most existing fair ranking algorithms use greedy approaches that optimize only for the immediate next session, leading to suboptimal long-term performance. The authors propose FARA (Future-aware Ranking Algorithm), which plans ahead by jointly optimizing multiple ranklists together and saving them for future sessions. FARA uses Taylor expansion to analyze how future ranklists influence overall fairness, then employs a two-phase optimization algorithm to solve an optimal future exposure planning problem and construct optimal ranklists.

## Method Summary
FARA addresses the limitation of greedy fair ranking algorithms by precomputing and jointly optimizing multiple ranklists across future sessions. The method consists of two phases: (1) solve an optimal future exposure planning problem using quadratic programming, and (2) construct optimal ranklists using a vertical allocation method. The algorithm uses Taylor expansion to convert the discrete ranking optimization problem into a continuous optimization problem, allowing for accurate estimation of how marginal exposure affects overall fairness. The vertical allocation method ensures optimal effectiveness at all prefix cutoffs while accurately allocating planned exposure across multiple ranklists.

## Key Results
- FARA significantly outperforms state-of-the-art fair ranking methods in terms of fairness and relevance joint optimization
- Experiments on three semi-synthesized datasets (MQ2008, MSLR-10k, Istella-S) demonstrate FARA's efficiency and effectiveness
- Theoretical analysis shows FARA is optimal for ranking relevance and fairness joint optimization

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Joint optimization of multiple ranklists reduces ranking conflicts between relevance and fairness by smoothing exposure allocation across sessions
- Mechanism: Instead of greedily optimizing one ranklist per session, FARA precomputes and jointly optimizes Œîùëá ranklists together, allowing items that are unfairly treated to be boosted gradually across multiple ranklists rather than being placed at the top in a single session
- Core assumption: The optimal ranklist sequence for relevance and fairness joint optimization can be precomputed and reused across multiple sessions for the same query
- Evidence anchors: The abstract states "FARA plans ahead by jointly optimizing multiple ranklists together and saving them for future sessions," and the paper discusses avoiding greedy optimization for immediate sessions
- Break condition: If user preferences or item relevance distributions change rapidly, precomputed ranklists may become suboptimal, requiring frequent recomputation

### Mechanism 2
- Claim: Taylor expansion of fairness objective allows accurate estimation of how future exposure influences overall fairness, enabling continuous optimization
- Mechanism: FARA uses Taylor expansion to analyze how marginal exposure Œîùê∏ affects fairness, converting the discrete ranking optimization problem into a continuous optimization problem solvable by quadratic programming
- Core assumption: The fairness objective in Eq. 8 is a polynomial of degree two in exposure, making Taylor expansion exact (not approximate) and enabling quadratic programming
- Evidence anchors: The paper states "Since (un)fairness in Eq. 8 is defined as a sum of squares, the second order derivative ùêª√ì is semi-definite. As an equality, Eq. 12 allows us to correctly estimate future fairness given marginal exposure Œîùê∏"
- Break condition: If the fairness objective becomes non-polynomial (e.g., includes higher-order interactions), Taylor expansion would no longer be exact

### Mechanism 3
- Claim: Vertical allocation method ensures optimal effectiveness at all prefix cutoffs while accurately allocating planned exposure
- Mechanism: Algorithm 1 fills ranklists column by column (rank by rank across sessions) rather than row by row, prioritizing items with higher relevance to fulfill their exposure planning at the highest possible ranks
- Core assumption: Items with higher relevance should be given priority to fulfill their exposure planning at top ranks to maximize cumulative NDCG across all cutoffs
- Evidence anchors: The paper states "In Algorithm 1, the proposed vertical allocation exactly follows the above greedy selection strategy to let item of greater relevance ùëÖ fulfill its exposure planning Œîùê∏ at the highest possible ranks"
- Break condition: If examination probabilities vary significantly across ranks, the greedy vertical allocation might not be optimal for certain exposure planning distributions

## Foundational Learning

- Concept: Positional bias and selection bias in user examination
  - Why needed here: Understanding how examination probability decreases with rank and how selection bias affects exposure allocation is crucial for modeling fairness and relevance
  - Quick check question: If position 1 has examination probability 1.0, position 2 has 0.7, and position 3 has 0.4, what fraction of users examining position 1 will also examine position 3, assuming no selection bias?

- Concept: Taylor series expansion and quadratic programming
  - Why needed here: Taylor expansion converts the discrete ranking problem into a continuous optimization problem, and quadratic programming solves for optimal exposure planning given the semi-definite Hessian matrix
  - Quick check question: Given a function f(x) = x¬≤ and its Taylor expansion around x=0, what is the coefficient of the x¬≤ term in the expansion?

- Concept: Rearrangement inequality in optimization
  - Why needed here: The vertical allocation algorithm uses the rearrangement inequality to prove that pairing higher relevance items with higher exposure positions maximizes cumulative NDCG
  - Quick check question: If you have two sequences (3, 1, 2) and (10, 5, 1), what is the maximum sum of products you can achieve by rearranging one sequence?

## Architecture Onboarding

- Component map: Query reception ‚Üí Relevance estimation (ùëÖ) ‚Üí Exposure planning (Phase 1 QP) ‚Üí Ranklist construction (Phase 2 vertical allocation) ‚Üí User feedback collection ‚Üí Relevance update
- Critical path: Query ‚Üí Get precomputed ranklists from cache ‚Üí Serve ‚Üí Collect feedback ‚Üí Update relevance ‚Üí Recompute ranklists when cache empty
- Design tradeoffs:
  - Precomputation vs. online optimization: Precomputing ranklists saves time but may be suboptimal if relevance changes rapidly
  - Exploration vs. exploitation: The slack variable ùë† encourages exploration but may reduce immediate fairness
  - Planning horizon Œîùëá: Larger Œîùëá provides better optimization but requires more memory and computation upfront
- Failure signatures:
  - Cache miss rate too high: Indicates relevance changes too frequently for precomputed ranklists to be useful
  - Exploration parameters set incorrectly: Too much exploration reduces fairness; too little exploration causes relevance estimation bias
  - Vertical allocation fails to allocate exposure accurately: Could indicate margin ùëÉùëüùëõùëò is too small or exposure planning Œîùê∏ is too small relative to examination probabilities
- First 3 experiments:
  1. Verify Taylor expansion is exact for the fairness objective by computing second derivatives of Eq. 8
  2. Test vertical allocation algorithm on synthetic data with known optimal solution to verify it achieves maximum cumulative NDCG
  3. Compare cache hit rate vs. relevance drift rate to determine optimal planning horizon Œîùëá

## Open Questions the Paper Calls Out

- Question: How can FARA be extended to handle recommendation tasks with personalized relevance?
  - Basis in paper: The paper states "However, the proposed method can be adapted to recommendation tasks by considering personal relevance, which we leave for future studies."
  - Why unresolved: The paper focuses on information retrieval tasks and does not explore the adaptation to recommendation systems
  - What evidence would resolve it: Empirical results showing FARA's effectiveness in recommendation tasks with personalized relevance, including comparison with existing fair recommendation algorithms

- Question: How does the performance of FARA scale with extremely large item sets (e.g., millions of items)?
  - Basis in paper: The paper evaluates FARA on datasets with up to 33k items and mentions time efficiency, but does not test with extremely large item sets
  - Why unresolved: The scalability of FARA to very large item sets is not investigated, which is important for real-world applications
  - What evidence would resolve it: Experiments with datasets containing millions of items, measuring FARA's time complexity and ranking performance in terms of fairness and effectiveness

- Question: Can FARA be extended to handle multi-sided fairness, considering fairness for both users and providers simultaneously?
  - Basis in paper: The paper focuses on provider-side fairness and does not address multi-sided fairness
  - Why unresolved: The paper's formulation and optimization are designed for provider fairness, and extending to multi-sided fairness would require a different approach
  - What evidence would resolve it: A modified version of FARA that incorporates user fairness metrics and demonstrates improved fairness for both users and providers in experiments

## Limitations
- The effectiveness of precomputed ranklists depends on stable relevance distributions, which may not hold in dynamic environments
- The quadratic programming approach requires solving a potentially large optimization problem, which could be computationally expensive for large-scale systems
- The paper lacks empirical validation on real-world datasets beyond the three semi-synthesized datasets mentioned

## Confidence
- **High confidence**: The theoretical foundation of Taylor expansion for fairness optimization
- **Medium confidence**: The vertical allocation method's optimality - theoretical proof exists but no empirical validation
- **Medium confidence**: The joint optimization approach - conceptually sound but dependent on stable relevance distributions

## Next Checks
1. Empirically verify the exact nature of Taylor expansion for the fairness objective by computing second derivatives on real data
2. Benchmark FARA's computational efficiency against baseline methods on datasets with varying sizes
3. Test FARA's performance when relevance distributions change over time to assess the robustness of precomputed ranklists