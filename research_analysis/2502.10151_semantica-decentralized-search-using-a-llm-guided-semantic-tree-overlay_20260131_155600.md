# Semantica: Decentralized Search using a LLM-Guided Semantic Tree Overlay

*Petru Neague; Quinten Stokkink; Naman Goel; Johan Pouwelse*

---

## Executive Summary

Decentralized peer-to-peer (P2P) search systems have historically struggled to bridge the efficiency gap with centralized search engines. The core challenge lies in query routing: without a central index, traditional decentralized networks must rely on inefficient flooding or random walks, which generates excessive network traffic and often fails to locate relevant content held by semantic peers. This paper addresses the critical trade-off between scalability and search relevance in distributed environments, highlighting the need for a mechanism that can align the logical network topology with the semantic meaning of the data stored across the network.

Semantica revitalizes the concept of Semantic Overlay Networks (SONs) by integrating Large Language Model (LLM) embeddings into a decentralized, trie-based structure. The system constructs a dynamic prefix tree where leaf nodes represent users and internal split nodes contain centroids derived via K-means clustering. Users are placed in the tree based on the vector embeddings of the documents they host, utilizing Euclidean distance for routing. To address the issue of semantic diversity—where a single user possesses documents spanning multiple topics—the authors introduce a "Soft-Cloning" mechanism. This innovation creates virtual clones of user identifiers within the tree, allowing a single physical peer to inhabit multiple semantic paths and be discoverable for various queries without requiring separate IP addresses.

In emulation tests using the AOL4PS dataset, Semantica demonstrated significant improvements over state-of-the-art decentralized baselines. The system identified up to 10 times more semantically similar users than existing approaches and retrieved more than two times the number of relevant documents while maintaining comparable network load. Specifically regarding recall performance, Semantica achieved a score of approximately 35 by round 10 (with $\Delta=0.001$), dwarfing the random baseline score of roughly 5. While the soft-cloning mechanism proved highly efficient—with the majority of users (~5100) unaffected at the lowest threshold—the analysis noted a sharp increase in computational burden as the threshold $\Delta$ increased.

This work represents a significant architectural shift in decentralized search, proving that modern LLM capabilities can be effectively leveraged to overcome the routing inefficiencies of traditional P2P networks. By successfully aligning network topology with semantic relevance, Semantica provides a viable blueprint for building robust, privacy-preserving search alternatives that do not rely on centralized indexing. The decision to release the source code as open source further amplifies this contribution, providing a reproducible foundation for future research into semantic clustering and decentralized information retrieval, despite current limitations regarding tree re-balancing.

---

### ⚡ Quick Facts: Project Metrics

| Metric | Detail |
| :--- | :--- |
| **Quality Score** | 8/10 |
| **References** | 35 Citations |
| **Evaluation Dataset** | AOL4PS (N=6980) |
| **Recall Performance** | ~35 at Round 10 (vs ~5 for Random) |
| **Efficiency Gain** | 10x similar users; 2x document retrieval |

---

## Key Findings

*   **Enhanced User Discovery:** Identifies up to **10 times more** semantically similar users compared to state-of-the-art decentralized approaches.
*   ** superior Retrieval:** Retrieves **more than two times** the number of relevant documents compared to existing baselines while maintaining the same network load.
*   **Effective Topology:** The prefix tree (trie) based on LLM embeddings effectively links users with semantically similar documents.
*   **Rapid Connection:** Emulation tests demonstrated rapid connection establishment with similar users.

## Methodology

The Semantica algorithm constructs a **Semantic Overlay Network** using a prefix tree (trie) structure. Instead of relying on keywords, the system leverages **LLM-generated embeddings** to capture document semantics.

*   **User Connection:** Users connect based on the embeddings of the documents they hold, aligning the network graph structure with semantic relevance.
*   **Handling Topic Diversity:** To accommodate users with diverse interests, the system spawns **'clone' user identifiers** within the tree. This allows single users to exist in multiple semantic contexts simultaneously.
*   **Evaluation:** The system was rigorously tested via emulation using a real-world workload to validate performance.

## Technical Details

The following table outlines the core technical specifications and architectural choices of the Semantica protocol:

| Component | Description |
| :--- | :--- |
| **Topology** | Dynamic semantic tree (trie-like structure). |
| **Node Types** | **Leaf Nodes:** Hold users (Capacity: M Split Nodes:** Hold centroids for routing (formed via K-means clustering, k=2). |
| **Data Representation** | Vector embeddings represent both users and documents. |
| **Routing Metric** | Normed Euclidean distance. |
| **Soft-Cloning** | Allows users to traverse multiple paths if centroid distance difference is below threshold $\Delta$, improving recall without new IPs. |
| **Decentralized Features** | Root bootstrapping, custodians for data maintenance, neighbor expansion (Algorithm 2). |
| **Current Limitations** | Lack of re-balancing mechanisms and a fixed k-value of 2. |

## Results

*   **Recall Performance:** Semantica significantly outperforms random baselines in recall, reaching approximately **35** vs ~5 for random at round 10 (with $\Delta=0.001$).
*   **Cloning Efficiency:** On the AOL4PS dataset, efficiency is high; roughly **5,100 users** remain unaffected at $\Delta=0.001$.
*   **Computational Cost:** Computational burden increases sharply with the $\Delta$ threshold, with mean clones exceeding 7.0 at $\Delta=5\times10^{-3}$.
*   **Overall:** Confirmed ability to identify 10x more similar users and retrieve 2x more relevant documents than baselines.

## Contributions

*   **Revitalization of SONs:** Modernizes Semantic Overlay Networks by integrating them with contemporary LLM capabilities to address the trade-off between centralized and decentralized search.
*   **Novel Protocol:** Introduces **Semantica**, a new decentralized search protocol that integrates LLM embeddings into a trie-based overlay network.
*   **Semantic Diversity Solution:** Provides a technical solution to the issue of user semantic diversity through the use of 'clone' identifiers.
*   **Open Source:** Released source code openly to facilitate reproducibility and future research.