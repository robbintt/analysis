---
title: 'MAC: Masked Agent Collaboration Boosts Large Language Model Medical Decision-Making'
arxiv_id: '2507.21159'
source_url: https://arxiv.org/abs/2507.21159
generated_at: '2026-02-03T13:06:29'
quality_score: 8
citation_count: 40
model_profiles_used:
- default
- fast
model_profiles:
  default:
    provider: cerebras
    name: zai-glm-4.7
    temperature: 0.9
    top_p: 0.95
    max_tokens: 150000
  fast:
    provider: cerebras
    name: zai-glm-4.7
    temperature: 0.9
    top_p: 0.95
    max_tokens: 150000
---

# MAC: Masked Agent Collaboration Boosts Large Language Model Medical Decision-Making

*Zhihao Peng; Liuxin Bao; Yixuan Yuan*

---

> **QUICK FACTS**
> * **Dataset:** NEJMQA (Obstetrics and Gynecology)
> * **Performance:** Outperformed MAS baseline by **16.55%** and GPT-4 by **9.35%**
> * **Optimal Temperature:** 0.7
> * **Optimal Masking:** 2 agents per layer
> * **Aggregator:** Openthinker 32B
> * **Time Complexity:** $O(lK^2L^3 + lKT_{infer})$
> * **Quality Score:** 8/10

---

## Executive Summary

Current Multi-Agent Systems (MAS) deployed for complex medical decision-making suffer from critical collaboration failures, primarily stemming from the lack of systematic agent construction and rigid, static interaction patterns. These systems often struggle to balance the trade-off between model capability and computational efficiency, leading to suboptimal performance in high-stakes environments. As medical reasoning requires both high accuracy and reliability, addressing these structural inefficiencies is essential to prevent the propagation of errors across agent networks.

To overcome these limitations, the authors introduce the **Masked Agent Collaboration (MAC)** framework, a novel approach to dynamic information propagation. MAC operates through a three-step pipeline:

1.  **Pareto-optimality analysis** to systematically construct a diverse, efficient team of agents.
2.  **Cross-Consistency Maximization (CCM)** to dynamically mask agents with the lowest pairwise semantic consistency.
3.  **Adaptive Progressive Propagation** to aggregate outputs only from unmasked agents.

Evaluated on the NEJMQA dataset, MAC demonstrated superior performance, outperforming standard MAS baselines by **16.55%** and surpassing **GPT-4 by 9.35%**. Notably, the framework achieved these accuracy gains while maintaining higher efficiency (lower memory and running time) than larger proprietary models. Qualitative analysis confirmed MAC's efficacy, correctly recalling all Ranson's criteria for pancreatitis where State-of-the-Art models failed.

---

## Key Findings

*   **Limitations of Current MAS:** Existing models suffer from collaboration failures due to a lack of systematic construction and static interaction patterns.
*   **Efficiency-Capability Balance:** Pareto-frontier analysis identifies optimal LLMs that effectively balance size, inference time, diversity, and throughput.
*   **Consistency Filtering:** Cross-consistency maximization successfully identifies and masks agents that produce semantically inconsistent outputs.
*   **Performance Enhancement:** The MAC framework significantly improves decision-making capabilities through adaptive progressive propagation.

---

## Methodology

The research implements a three-step framework known as **Masked Agent Collaboration (MAC)**:

1.  **Pareto-Optimal Agent Construction**
    *   Selects agents by analyzing LLMs via Pareto-frontier factors.
    *   Key metrics considered: Diversity score, model size, inference time, and throughput.

2.  **Cross-Consistency Maximization**
    *   Measures pairwise similarity between agent outputs.
    *   Masks the agent with the lowest consistency score to filter out low-quality reasoning.

3.  **Adaptive Progressive Propagation**
    *   Utilizes a layered structure where agents aggregate outputs exclusively from unmasked predecessors.

---

## Technical Details

The MAC framework optimizes Multi-Agent Systems for medical decision-making through two primary mechanisms:

### Optimization Factors
The framework selects optimal LLM subsets based on four critical dimensions:
*   **Model Size**
*   **Inference Time**
*   **Diversity Score**
*   **Throughput Ratio**

### Cross-Consistency Maximization (CCM)
*   The CCM mechanism masks agents with the lowest pairwise Cross-Consistency values in each layer.
*   Outputs are aggregated only from unmasked agents to ensure reliability.

### Algorithmic Complexity
The algorithm operates with a calculated time complexity of:
$$O(lK^2L^3 + lKT_{infer})$$

---

## Results

The MAC framework was rigorously evaluated, yielding the following outcomes:

*   **Benchmark Performance:**
    *   Outperformed MAS baseline by **16.55%**.
    *   Outperformed GPT-4 by **9.35%** on the NEJMQA dataset (Obstetrics and Gynecology).
*   **Efficiency Metrics:**
    *   Achieved higher efficiency with lower memory usage and reduced running time compared to larger models.
*   **Robustness:**
    *   The framework is robust to temperature variations, performing optimally at a temperature setting of **0.7**.
*   **Configuration Optimization:**
    *   The CC-driven masking strategy outperformed both random and sequence-based methods.
    *   Masking **2 agents per layer** was identified as the optimal configuration.
*   **Qualitative Analysis:**
    *   In a case study on pancreatitis, MAC correctly recalled all **Ranson's criteria**, whereas State-of-the-Art (SOTA) models failed to do so.

---

## Contributions

*   **The MAC Framework:** Introduces a novel framework for adaptive, dynamic information propagation among LLM agents.
*   **Systematic Agent Selection:** Proposes a data-driven pipeline utilizing Pareto-optimality for constructing agent teams.
*   **Robustness Mechanism:** Implements a masking strategy based on cross-consistency to significantly reduce collaboration failures.

---

**References:** 40 citations