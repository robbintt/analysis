---
ver: rpa2
title: 'SED2AM: Solving Multi-Trip Time-Dependent Vehicle Routing Problem using Deep
  Reinforcement Learning'
arxiv_id: '2503.04085'
source_url: https://arxiv.org/abs/2503.04085
tags:
- vehicle
- time
- sed2am
- each
- routing
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: The paper proposes SED2AM, a deep reinforcement learning approach
  to solve the Multi-Trip Time-Dependent Vehicle Routing Problem with maximum working
  hours constraints. The method introduces a temporal locality inductive bias to the
  encoder and a dual-decoder architecture with vehicle selection and trip construction
  decoders.
---

# SED2AM: Solving Multi-Trip Time-Dependent Vehicle Routing Problem using Deep Reinforcement Learning

## Quick Facts
- **arXiv ID**: 2503.04085
- **Source URL**: https://arxiv.org/abs/2503.04085
- **Reference count**: 40
- **Primary result**: SED2AM outperforms state-of-the-art DRL and metaheuristic baselines in total travel time on Edmonton and Calgary datasets while maintaining faster runtimes.

## Executive Summary
SED2AM is a deep reinforcement learning approach for the Multi-Trip Time-Dependent Vehicle Routing Problem with maximum working hours constraints. The method introduces a temporal locality inductive bias to the encoder and a dual-decoder architecture with vehicle selection and trip construction decoders. Experiments on real-world datasets demonstrate that SED2AM outperforms state-of-the-art DRL and metaheuristic baselines in terms of total travel time while maintaining faster runtimes. The method also generalizes well to larger-scale problem instances.

## Method Summary
SED2AM uses a deep reinforcement learning framework with a simultaneous encoder that processes time-dependent edge features separately for each time interval. The decoding module includes a vehicle selection decoder that selects a vehicle from the fleet, followed by a trip construction decoder that constructs routes for the selected vehicle. The policy model is equipped with fleet state and routing state representations, enabling effective route construction in the presence of maximum working hours constraints.

## Key Results
- SED2AM achieves 2-8% improvement in total travel time compared to state-of-the-art metaheuristics
- The method demonstrates superior generalization to larger problem instances (20→50 customers)
- Runtime is significantly faster than metaheuristic baselines while maintaining solution quality

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Processing time-dependent edge features separately for each time interval enables better capture of dynamic travel conditions.
- Mechanism: The simultaneous encoder independently embeds node and edge features for each time interval p ∈ TI. Edge embeddings are added to attention compatibility scores (Equation 10), and attention weights incorporate sigmoid-transformed edge features (Equation 11). This creates interval-specific node representations.
- Core assumption: Routing decisions depend primarily on traffic conditions during the specific travel interval, not all time periods (temporal locality inductive bias).
- Evidence anchors:
  - [abstract]: "introduces a temporal locality inductive bias to the encoding module of the policy networks, enabling it to effectively account for the time-dependency in travel distance/time"
  - [section 4.2.1]: "This design introduces a temporal locality inductive bias, meaning that each decision-making step depends solely on the traffic conditions during the specific interval in which the vehicle is traveling"
  - [corpus]: Moderate relatedness (avg FMR=0.399); no direct corpus papers validate this specific mechanism
- Break condition: If traffic conditions are highly correlated across adjacent time intervals (violating locality assumption), or if |TI| becomes very large making independent interval processing computationally infeasible.

### Mechanism 2
- Claim: Separating vehicle selection from trip construction enables proper trip-to-vehicle association, which is necessary for multi-trip routing under working hours constraints.
- Mechanism: The vehicle selection decoder first outputs a probability distribution over vehicles based on fleet state embeddings. The trip construction decoder then selects the next node for the chosen vehicle using context embeddings that include the vehicle's current state.
- Core assumption: Vehicles have heterogeneous states (varying remaining working hours, different current time-intervals, different locations) that must be explicitly modeled for optimal multi-trip assignment.
- Evidence anchors:
  - [abstract]: "decoding module includes a vehicle selection decoder that selects a vehicle from the fleet, effectively associating trips with vehicles for functional multi-trip routing"
  - [section 5.9/Table 10]: Ablation shows SED2AM with vehicle selection (1024.0 objective) outperforms random selection (1046.9) for MTTDVRP-50 Edmonton
  - [corpus]: Paper 20992 addresses multi-trip time-dependent VRP but doesn't validate dual-decoder specifically; mechanism evidence is internal to paper
- Break condition: If all vehicles have identical states and constraints (no fleet heterogeneity), or if fleet size f >> n causing excessive decoder complexity with minimal benefit.

### Mechanism 3
- Claim: Explicit fleet state representation with working hours tracking enables constraint-aware decision making that implicit approaches cannot achieve.
- Mechanism: Fleet state sF tracks per-vehicle: remaining capacity rc, current location V, remaining working hours τ, current time-interval p, and time left in current interval rt. Transition functions (Equations 1-5) update these states based on actions. Masking (Equation 34) uses these states to prune infeasible actions.
- Core assumption: Maximum working hours constraint fundamentally changes the decision space beyond capacity constraints alone, requiring explicit temporal tracking per vehicle.
- Evidence anchors:
  - [abstract]: "policy model is equipped with two classes of state representations, fleet state and routing state, providing the information needed for effective route construction in the presence of maximum working hours constraints"
  - [section 3/Equations 1-5]: MDP formulation explicitly defines state st = (sF, sR) with working hours τ and time-interval p updating per transition
  - [corpus]: Paper 80258 addresses finite time horizon VRP, suggesting time constraints are important; no direct validation of this specific state design
- Break condition: If maximum working hours T_max >> actual cumulative trip durations (constraint becomes inactive), or if time-dependency is negligible (static travel times).

## Foundational Learning

- Concept: Multi-head Attention with Edge-modulated Compatibility
  - Why needed here: The simultaneous encoder adds edge embeddings to dot-product compatibility scores. Understanding how attention weights are computed and modulated by edge features is essential for debugging the encoder.
  - Quick check question: Given Equation 10 (u = q·k/√dk + ε), how does adding a large positive edge embedding ε affect which nodes receive high attention weights?

- Concept: Markov Decision Processes with Factored States
  - Why needed here: The state combines fleet state (vehicle-specific) and routing state (problem-level). Understanding how these components interact through the transition function is critical for implementing state updates correctly.
  - Quick check question: When vehicle j visits node v_i at step t, which elements of the fleet state update only for vehicle j versus all vehicles?

- Concept: Policy Gradient with Greedy Rollout Baseline
  - Why needed here: Training uses REINFORCE with a greedy baseline for variance reduction. Understanding why this baseline works and when it might fail is essential for training stability.
  - Quick check question: Why does using a deterministic greedy rollout as baseline reduce gradient variance compared to using no baseline or a learned value function?

## Architecture Onboarding

- Component map:
Simultaneous Encoder -> Vehicle Selection Decoder -> Trip Construction Decoder -> Solution

- Critical path:
  1. **Temporal indexing**: Edge features E must be correctly indexed by (source, destination, time-interval); errors here propagate through all attention layers
  2. **State updates**: After each action, Equations 1-5 must correctly update remaining capacity, location, working hours, time-interval, and interval-remaining-time for the selected vehicle
  3. **Masking correctness**: Equation 34 conditions must prevent: revisiting nodes, depot-to-depot transitions, exceeding capacity, violating working hours (including return-to-depot time)

- Design tradeoffs:
  - **Temporal locality vs. computation**: Independent interval processing adds factor |TI| to encoder complexity but avoids entangled representations; |TI|=10 is used
  - **Dual-decoder complexity vs. trip association**: Vehicle selection decoder adds O(n·d·f) complexity but enables constraint-aware multi-trip routing
  - **Sampling vs. greedy decoding**: Sampling 1280 solutions improves objective by ~3-5% but increases runtime ~100x (Table 7: 4.5 mins vs. 0.51s for MTTDVRP-10)

- Failure signatures:
  - **All customers assigned to one vehicle** → Vehicle selection probabilities collapsed → Check VSD loss contribution and learning rate
  - **Working hours violations** → Masking condition 3 (Equation 34) not applied → Verify return-to-depot travel time is included in feasibility check
  - **Poor generalization to larger instances** → Encoder overfitting to training distribution → Check if mean-pooling for graph embedding is size-invariant
  - **Training instability** → Gating mechanism (Equations 13-18) not properly initialized → Verify gating weights use suggested uniform initialization

- First 3 experiments:
  1. **Reproduce baseline**: Run SED2AM(Greedy) on MTTDVRP-20 Calgary dataset; target objective ~793.9 with Gap ~5.87% per Table 7. This validates implementation correctness.
  2. **Ablate temporal encoder**: Replace simultaneous encoder with single time-interval encoder (use average travel times); expect objective degradation from 1024.0 to ~1079.5 on MTTDVRP-50 Edmonton per Table 9. This validates the temporal locality mechanism.
  3. **Test generalization**: Train on MTTDVRP-20, evaluate on MTTDVRP-50; compare objective (~1076.3 per Figure 7) against E-GAT baseline trained on same data. This validates out-of-distribution robustness.

## Open Questions the Paper Calls Out

### Open Question 1
- **Question:** Can SED2AM be effectively adapted to solve MTTDVRP variants involving mixed pickup and delivery demands?
- **Basis in paper:** [explicit] The authors explicitly state in the conclusion, "we will investigate solving variants of the MTTDVRP that involve mixed pickup and delivery."
- **Why unresolved:** The current model is tailored for standard delivery and does not account for the state dynamics, capacity fluctuations, or constraints introduced by simultaneous pickup and delivery tasks.
- **What evidence would resolve it:** A modified policy network that handles mixed PD constraints and experimental results on datasets reflecting these logistics (e.g., bottled beverage distribution).

### Open Question 2
- **Question:** How does the inclusion of strict customer time-window constraints impact the model's architecture and routing performance?
- **Basis in paper:** [explicit] The authors note the aim to "consider time-window constraints for customers’ demand" as a future direction, citing applications like food delivery.
- **Why unresolved:** The current state representation tracks maximum working hours but lacks the specific features and masking mechanisms necessary to enforce customer-specific time windows during the decoding process.
- **What evidence would resolve it:** Integration of time-window features into the state representation and decoder masking, followed by evaluation on MTTDVRP-TW benchmarks.

### Open Question 3
- **Question:** How does SED2AM compare to specific state-of-the-art hybrid metaheuristics, such as those by Zhao et al. and Pan et al.?
- **Basis in paper:** [explicit] The conclusion outlines a plan to "perform a comprehensive comparison with two important studies: Zhao et al. [37] and Pan et al. [25]."
- **Why unresolved:** The current experiments compare against ACO, GA, and DRL baselines, but omit these specific hybrid algorithms which are highly relevant to MTTDVRP.
- **What evidence would resolve it:** Benchmarking results showing optimality gaps and runtimes of SED2AM versus the algorithms by Zhao et al. and Pan et al. on identical problem instances.

## Limitations

- The temporal locality inductive bias may break down when traffic conditions across time intervals are highly correlated, reducing the effectiveness of independent interval processing.
- The dual-decoder architecture adds computational overhead that scales poorly with fleet size, potentially limiting applicability to very large fleets.
- The performance gains over metaheuristics, while consistent, remain moderate (typically 2-8% improvement) despite the more complex architecture.

## Confidence

- **High confidence** in the dual-decoder mechanism's contribution: Ablation results show clear objective improvement (1046.9→1024.0 on MTTDVRP-50) with statistical significance across datasets
- **Medium confidence** in temporal locality mechanism: The design is well-justified but lacks direct external validation; performance gains depend on traffic correlation structure
- **Medium confidence** in generalization claims: Results show consistent outperformance but test on only 2x larger instances; scaling to much larger problems remains unproven

## Next Checks

1. **Stress test temporal locality**: Run SED2AM on datasets with artificially correlated time intervals (e.g., shift all intervals by constant offset) and measure objective degradation to quantify the mechanism's robustness
2. **Fleet scaling experiment**: Systematically vary fleet size f from 5 to 100 vehicles while holding n constant to identify the scaling threshold where dual-decoder complexity outweighs benefits
3. **Time-dependency sensitivity**: Compare SED2AM performance on the same routing instances with static travel times versus time-dependent travel times to isolate the value of time-dependency modeling