---
ver: rpa2
title: An AI-driven framework for rapid and localized optimizations of urban open
  spaces
arxiv_id: '2501.08019'
source_url: https://arxiv.org/abs/2501.08019
tags:
- urban
- visibility
- building
- shap
- https
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This study introduces an AI-driven framework integrating machine
  learning models and explainable AI techniques to optimize Sky View Factor (SVF)
  and visibility in urban open spaces. Unlike global optimization methods, the framework
  enables localized adjustments with lower computational costs.
---

# An AI-driven framework for rapid and localized optimizations of urban open spaces

## Quick Facts
- arXiv ID: 2501.08019
- Source URL: https://arxiv.org/abs/2501.08019
- Reference count: 10
- Primary result: AI framework with XGBoost and CFX achieves 15-30x faster urban space optimization than GA with 5% RMSE error

## Executive Summary
This study presents an AI-driven framework for optimizing Sky View Factor (SVF) and visibility in urban open spaces through localized adjustments rather than global redesign. The framework integrates machine learning models for prediction, SHAP for interpretability, and counterfactual explanations via KD-tree search for rapid optimization. Unlike traditional Genetic Algorithms that require 15-30 minutes across multiple generations, the CFX approach delivers optimized solutions in approximately 1 minute while maintaining accuracy within 5% RMSE. The methodology was validated using 1,152 simulated urban configurations based on Tehran's morphology, demonstrating practical utility for urban retrofitting strategies.

## Method Summary
The framework generates synthetic urban block configurations using Rhino/Grasshopper and Ladybug tools, extracting geometric parameters as features. Five machine learning models were trained and tested, with XGBoost selected for its superior accuracy (R² ≈ 0.90 for SVF, F1 ≈ 0.85 for visibility classification). SHAP analysis identifies feature importance, revealing building width, park area, and surrounding building heights as critical for SVF, while southern building distances most impact visibility. Counterfactual explanations using KD-tree search provide rapid optimization by finding nearest feasible configurations meeting target objectives, achieving significant computational speedups compared to Genetic Algorithms.

## Key Results
- XGBoost achieved R² scores of 0.903 and 0.908 for SVF and visibility predictions respectively
- CFX optimization completed in 1 minute versus 15-30 minutes required by Genetic Algorithms
- SHAP analysis identified building width as most impactful feature for visibility, while eastern building height most influenced SVF
- Framework maintained 5% RMSE error across optimization scenarios

## Why This Works (Mechanism)

### Mechanism 1
- Claim: Gradient boosting models (specifically XGBoost) can predict spatial metrics from urban morphology parameters with high accuracy.
- Mechanism: XGBoost constructs decision tree ensembles that learn non-linear relationships between input features (building heights in 8 directions, distances, park area, street width, orientation) and target metrics (SVF, visibility). The ensemble approach captures complex interactions between spatial parameters that influence sky openness and visual access.
- Core assumption: The urban morphology parameters in the dataset sufficiently represent the geometric factors determining SVF and visibility, without requiring vegetation or dynamic elements.
- Evidence anchors:
  - [abstract] "Simulations tested five MLMs, identifying XGBoost as the most accurate"
  - [section 4.1] "XGBRegressor... exhibit high scores of 0.903 and 0.908... indicating they capture substantial variance"
  - [corpus] Related work on urban microclimate prediction using ML (Paper 23040) supports geometric-feature-based prediction approaches, though for different targets (airflow/temperature).
- Break condition: Performance degrades when applied to urban configurations with significantly different morphology patterns (e.g., non-grid layouts, irregular parcel shapes) or when vegetation substantially affects visibility/SVF.

### Mechanism 2
- Claim: SHAP values provide spatially-interpretable feature importance that aligns with domain knowledge about urban geometry.
- Mechanism: SHAP computes Shapley values (Equation 1) by evaluating feature contributions across all possible feature subsets. This game-theoretic approach assigns contribution scores to each input feature (e.g., hE, dS, park area) for individual predictions, enabling directional interpretation (positive/negative influence).
- Core assumption: Feature importance rankings from SHAP transfer to actionable design guidance; the model-agnostic nature preserves accurate attribution despite XGBoost's tree ensemble structure.
- Evidence anchors:
  - [section 3.3] "SHAP calculates feature importance using... Shapley values to assess feature contributions"
  - [section 4.2] "The distance from the southern building stands out as the most impactful feature [for visibility]... east building height (hE) has the highest impact on SVF"
  - [corpus] Paper 41717 applies SHAP to urban exercise inequality with spatial features, suggesting cross-domain applicability of SHAP for spatial interpretation.
- Break condition: SHAP explanations may be unreliable if features are highly collinear (e.g., building heights across adjacent directions correlated due to zoning) or if the model learns spurious correlations not present in held-out configurations.

### Mechanism 3
- Claim: Counterfactual explanations using KD-tree search achieve rapid optimization by finding nearest feasible configurations in parameter space.
- Mechanism: CFX with KD-tree partitions the parameter space to efficiently locate the closest valid scenario meeting target objectives (e.g., SVF > 75%). Unlike GA's global search requiring population evolution across generations, CFX performs directed search toward the nearest counterfactual, minimizing computational distance in feature space.
- Core assumption: The parameter space contains sufficiently dense feasible solutions; minimal adjustments (few parameter changes) can achieve meaningful improvements without requiring global redesign.
- Evidence anchors:
  - [abstract] "CFX approach achieved optimized results in 1 minute with a 5% RMSE error" vs "Genetic Algorithms... required 15-30 minutes"
  - [section 3.3] "KD-tree... divides the space to quickly search for and locate the closest feasible point that meets the objective"
  - [corpus] No direct corpus evidence for CFX in urban optimization; related work on GA-based urban optimization (Talami et al., 2020, cited in paper) provides comparison baseline.
- Break condition: CFX fails or provides poor solutions when: (a) target objective requires multi-step path through parameter space (non-local solution), (b) constraints make the feasible region sparse, or (c) multiple conflicting objectives require Pareto-optimal trade-offs rather than single-target counterfactuals.

## Foundational Learning

- Concept: Sky View Factor (SVF)
  - Why needed here: SVF is the primary target metric being optimized; understanding its geometric determinants is essential for interpreting SHAP results and validating CFX recommendations.
  - Quick check question: Given a 10-story building 15m east of a park vs. a 5-story building 20m east, which configuration likely yields higher SVF at the park center, assuming all else equal?

- Concept: Shapley Values / Feature Attribution
  - Why needed here: The entire interpretability layer depends on correctly reading SHAP plots; misunderstanding directional effects (red vs. blue points, positive vs. negative SHAP values) leads to incorrect design guidance.
  - Quick check question: If a SHAP summary plot shows "building width" with red points clustered at negative SHAP values, what does this imply about the relationship between building width and the target metric?

- Concept: Counterfactual Explanations vs. Optimization
  - Why needed here: CFX is proposed as an alternative to GA; understanding when minimal-change counterfactuals are appropriate vs. when global optimization is needed determines framework applicability.
  - Quick check question: For a retrofitting scenario where only 2 of 8 surrounding buildings can be modified, would CFX or GA be more appropriate, and why?

## Architecture Onboarding

- Component map:
  - Data Generation Layer: Rhino/Grasshopper + Ladybug → 1,152 urban block configurations → SVF/visibility labels
  - Prediction Layer: XGBoost (regression for SVF, classification for visibility classes 0/1/2)
  - Interpretation Layer: SHAP (global feature importance + individual prediction explanations)
  - Optimization Layer: CFX via KD-tree search (generates 5 strategies per configuration)
  - Validation Layer: Grasshopper re-simulation of CFX recommendations → RMSE calculation

- Critical path:
  1. Dataset curation: Ensure urban morphology parameters span target deployment context (current study: Tehran grid patterns, 3-10 floors, FAR 4.5-6.5)
  2. Model training: 80/20 split, evaluate XGBoost with R² (SVF) and F1-score (visibility); target R² > 0.85, F1 > 0.80
  3. SHAP validation: Verify top features align with domain expectations (e.g., building heights affect SVF)
  4. CFX configuration: Define actionable vs. non-actionable features (orientation/street width typically fixed in retrofit)
  5. Accuracy check: Re-simulate CFX recommendations; if RMSE > 10%, debug model or expand training data

- Design tradeoffs:
  - Speed vs. optimality: CFX provides 15-30x speedup over GA but may not reach global optimum; acceptable for rapid retrofit screening, not final design
  - Interpretability vs. accuracy: XGBoost selected over potentially higher-accuracy deep learning for SHAP compatibility; assumption is R² ≈ 0.90 is sufficient
  - Single-objective vs. multi-objective: Current framework optimizes SVF or visibility independently; simultaneous optimization not supported (noted as future work)

- Failure signatures:
  - SHAP values show counterintuitive rankings (e.g., orientation more important than building height) → check for data leakage or spurious correlations
  - CFX suggestions require >3 parameter changes to achieve modest improvement → feasible region may be too sparse; expand training data
  - RMSE > 10% on validation → model extrapolation beyond training distribution; verify deployment context matches training morphology
  - CFX suggests non-actionable changes (e.g., "rotate block 40°") → constraint definitions incorrect

- First 3 experiments:
  1. Reproduce XGBoost training on provided dataset (or synthetic equivalent): Verify R² ≈ 0.90 for SVF, F1 ≈ 0.85 for visibility; confirm feature importance ranking matches paper (east/west heights for SVF, southern distance for visibility).
  2. Implement SHAP analysis on trained model: Generate summary plots; validate that reducing building width increases visibility (per paper findings); test on single prediction to verify individual explanation coherence.
  3. Build minimal CFX prototype using KD-tree: For one urban configuration, generate counterfactuals targeting SVF increase; measure wall-clock time; compare CFX suggestion quality (SVF improvement / number of changes) against single-generation GA baseline.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How can the framework be adapted to perform simultaneous, multi-objective optimizations for conflicting spatial metrics?
- Basis in paper: [explicit] The conclusion states, "Future research should explore simultaneous optimization of multiple metrics... for a more comprehensive analysis of urban configurations."
- Why unresolved: The current study treats Sky View Factor (SVF) and visibility as separate optimization targets. While the methodology works for individual metrics, urban planning often requires balancing trade-offs between competing objectives (e.g., maximizing density while maintaining visibility) within a single run.
- What evidence would resolve it: A study applying the CFX methodology to a multi-output model or a weighted objective function, demonstrating how the framework negotiates trade-offs between SVF, visibility, and other metrics like energy consumption.

### Open Question 2
- Question: How does the inclusion of natural elements, specifically trees and vegetation, alter the feature importance rankings and counterfactual recommendations?
- Basis in paper: [explicit] The text notes that "incorporating vegetation would add complexity" and assumptions excluded trees, but concludes that future research should "include natural elements like trees."
- Why unresolved: The model currently isolates the impact of built structures (building height, width, distance). However, vegetation is a critical component of urban open spaces that significantly alters SVF and visibility. It is unclear if building width will remain the most critical feature when canopy coverage is introduced.
- What evidence would resolve it: A comparative analysis of SHAP values and CFX strategies generated from datasets that include vegetation parameters (e.g., tree height, canopy density) versus the current built-only dataset.

### Open Question 3
- Question: Can the XGBoost model trained on Tehran-specific morphological rules maintain high accuracy when applied to urban contexts with drastically different geometric constraints?
- Basis in paper: [inferred] While the paper claims the metrics are location-independent, the training data was generated based on Tehran's master plan (e.g., specific street widths of 6-12m, 3-10 story heights).
- Why unresolved: The model learned relationships based on the specific distributions of the generated 1152 urban blocks. It is uncertain if the model would extrapolate well to cities with radically different typologies (e.g., high-rise central business districts or organic medieval street patterns) without retraining.
- What evidence would resolve it: Validation metrics (R², RMSE) resulting from testing the current pre-trained XGBoost model on simulation data derived from urban configurations in different climatic or cultural regions (e.g., Europe or East Asia).

### Open Question 4
- Question: Can the CFX approach be refined to minimize the 5% RMSE error observed in scenarios requiring large-scale physical adjustments?
- Basis in paper: [inferred] The results section notes that while general accuracy was good, "RMSE values revealed slight deviations in certain scenarios, particularly where large adjustments in building heights or distances were recommended."
- Why unresolved: The KD-tree optimization approach used for CFX searches for the closest feasible point. In cases requiring significant retrofitting (large parameter changes), the "minimal change" logic may fail to capture non-linearities in the simulation environment, leading to prediction errors that exceed the 5% RMSE threshold.
- What evidence would resolve it: The development of a hybrid optimization approach that allows for larger search radii or multi-step counterfactual generation, resulting in lower RMSE values in stress-test scenarios involving major morphological shifts.

## Limitations
- Framework performance outside Tehran-specific morphology (grid patterns, 3-10 floors, FAR 4.5-6.5) remains untested and may degrade significantly
- Comparison between CFX and GA focuses on speed rather than solution quality beyond RMSE, leaving global optimality of CFX solutions unestablished
- SHAP explanations assume feature independence and may be unreliable when urban parameters exhibit strong correlations due to zoning regulations

## Confidence

- **High Confidence**: XGBoost prediction accuracy (R² ≈ 0.90 for SVF, F1 ≈ 0.85 for visibility) based on reported cross-validation results
- **Medium Confidence**: SHAP interpretability validity; while the method is well-established, feature collinearity in urban morphology could distort attribution
- **Medium Confidence**: CFX computational advantage; speed improvement is clearly demonstrated, but practical feasibility of recommended changes requires domain expert validation

## Next Checks

1. **Domain Transfer Test**: Apply the trained models to urban configurations from different cities (e.g., European medieval patterns, American suburban layouts) and measure performance degradation in R²/F1 scores
2. **Multi-Objective Extension**: Implement simultaneous optimization of SVF and visibility using Pareto front analysis to assess framework limitations for complex design requirements
3. **Constraint Integration**: Modify CFX to respect real-world retrofitting constraints (maximum building height, preservation requirements) and evaluate impact on solution quality and computation time