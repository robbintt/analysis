---
ver: rpa2
title: Differentially private ratio statistics
arxiv_id: '2505.20351'
source_url: https://arxiv.org/abs/2505.20351
tags:
- ratio
- noise
- privacy
- sensitivity
- theorem
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper studies differentially private ratio statistics, such
  as relative risk and odds ratios, which are widely used in hypothesis testing and
  fairness analysis. Ratio statistics pose challenges for differential privacy because
  small changes in counts can lead to large changes in the ratio, resulting in high
  or even unbounded sensitivity.
---

# Differentially private ratio statistics

## Quick Facts
- arXiv ID: 2505.20351
- Source URL: https://arxiv.org/abs/2505.20351
- Reference count: 40
- This paper demonstrates that adding Laplace or Gaussian noise to counts before computing ratios provides excellent privacy, accuracy, and low bias, even at small sample sizes.

## Executive Summary
This paper addresses the challenge of computing differentially private ratio statistics (e.g., relative risk, odds ratios) where small changes in counts can cause large changes in the ratio. The authors show that a simple approach—adding noise to individual counts and then computing the ratio—provides excellent privacy and accuracy. They prove consistency of the private ratio estimator and develop valid confidence intervals. Empirical results demonstrate that bias is small and confidence intervals achieve good coverage, making this method practical for private machine learning pipelines.

## Method Summary
The core method, LaplaceNoisedCountsₑ, adds independent Laplace noise (scale 2/ε) to both counts X and Y, then computes the ratio while clamping the denominator to avoid division by zero (using max(Ỹ, 1)). This provides (ε, 0)-differential privacy through basic composition. For confidence intervals, the paper uses Theorem 4.5 which adds a variance term σ² to ensure coverage, particularly important at small sample sizes. The method works under binomial assumptions where X ~ Bin(nₓ, pₓ) and Y ~ Bin(nᵧ, pᵧ), with known (non-private) sample sizes.

## Key Results
- The private ratio estimator is consistent (Theorem 4.2)
- Confidence intervals achieve approximately 95% coverage when using the conservative approach
- Bias is negligible when εY > 10 (Section 3.2)
- Simple noise-addition methods work well even at small sample sizes

## Why This Works (Mechanism)
The method works by leveraging the stability of ratios when sufficient noise is added relative to the counts. By clamping the denominator to a minimum of 1, the method prevents division by zero while maintaining differential privacy. The variance adjustment in confidence intervals accounts for noise-induced uncertainty, ensuring valid coverage even when asymptotic approximations might fail.

## Foundational Learning

**Differential Privacy (ε,δ):** Mathematical framework ensuring individual data points minimally affect output distribution. Needed to quantify privacy guarantees. Quick check: Verify Laplace mechanism satisfies (ε,0)-DP via sensitivity analysis.

**Sensitivity Analysis:** Measures maximum change in function output when one data point changes. Needed to determine appropriate noise scale. Quick check: Confirm ratio function has infinite sensitivity without clamping.

**Exponential Integral (Ei):** Special function appearing in bias calculations for Gaussian mechanisms. Needed for precise bias quantification. Quick check: Implement numerical approximation for bias formula evaluation.

## Architecture Onboarding

**Component Map:** Input Counts → Noise Addition (Laplace/Gaussian) → Denominator Clamping → Ratio Computation → Confidence Interval Construction

**Critical Path:** The most sensitive part is the denominator clamping (max(Ỹ, 1)), which prevents undefined ratios but introduces bias when Y is small relative to noise scale.

**Design Tradeoffs:** Equal privacy budget split between numerator and denominator vs. optimized allocation; exact vs. conservative confidence intervals; Laplace vs. Gaussian mechanisms for privacy-accuracy tradeoffs.

**Failure Signatures:** Under-coverage of confidence intervals at small sample sizes; large apparent bias when εY is small; undefined ratios without denominator clamping.

**3 First Experiments:**
1. Implement LaplaceNoisedCountsₑ with equal ε/2 allocation and denominator clamping
2. Test sample accuracy for (X,Y) ∈ {(100,100), (50,100), (100,50), (100,30)} with α=0.1, ε∈{0.5,1.0,2.0}
3. Validate conservative confidence intervals using Theorem 4.5 with variance adjustment

## Open Questions the Paper Calls Out

**Open Question 1:** How can valid confidence intervals be constructed for differentially private ratio statistics when X and Y have distributional assumptions beyond binomial, including cases with dependence between them? The paper notes that different modeling would require additional methods to construct valid CIs.

**Open Question 2:** What is the optimal allocation of privacy budget ε between numerator and denominator counts to minimize estimation error in private ratio statistics? The paper suggests this could improve results but leaves it unexplored.

**Open Question 3:** How can the undercoverage of Gaussian mechanism-based confidence intervals at small sample sizes be corrected while maintaining DP guarantees? The paper identifies this as an issue due to the non-negligible effect of δ.

## Limitations
- Method relies on small-count stability through denominator clamping, introducing bias at small sample sizes
- Analysis assumes independence between noise additions and exact knowledge of sample sizes
- Conservative confidence intervals trade accuracy for coverage guarantees
- Exponential integral computation requires numerical methods not fully specified

## Confidence
- **High Confidence:** DP guarantee derivation; consistency proof; bias formula; empirical coverage results
- **Medium Confidence:** Exact numerical constants for Gaussian mechanism; bias approximation accuracy; conservative CI coverage claims
- **Low Confidence:** Practical impact of Ei computation errors; sensitivity to PRNG choice; real-world performance with unknown sample sizes

## Next Checks
1. Implement and verify LaplaceNoisedCounts with equal ε/2 allocation, denominator clamping, and confirm (ε,0)-DP via composition theorem
2. Test sample accuracy for configurations (X,Y) ∈ {(100,100), (50,100), (100,50), (100,30)} with α=0.1, ε∈{0.5,1.0,2.0}, running 10,000+ trials per setting
3. Validate conservative confidence intervals using Theorem 4.5 with variance adjustment, testing nₓ=nᵧ=150, (pₓ,pᵧ) ∈ {(1/3,2/3), (0.5,0.5), (2/3,1/3)}, ε=1, α=0.05 to verify coverage ≈0.95