---
ver: rpa2
title: Ideal Registration? Segmentation is All You Need
arxiv_id: '2509.15784'
source_url: https://arxiv.org/abs/2509.15784
tags:
- registration
- image
- segmentation
- segreg
- dice
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper introduces SegReg, a segmentation-driven registration
  framework that transforms complex medical image registration into simpler region-wise
  alignment tasks. The key innovation is leveraging anatomical segmentation to decompose
  registration into locally smooth sub-tasks while naturally preserving discontinuities
  at tissue boundaries.
---

# Ideal Registration? Segmentation is All You Need

## Quick Facts
- arXiv ID: 2509.15784
- Source URL: https://arxiv.org/abs/2509.15784
- Reference count: 26
- Primary result: Transforms medical image registration into region-wise alignment tasks using segmentation, achieving 98.23% Dice with ground truth segmentation

## Executive Summary
SegReg introduces a segmentation-driven registration framework that decomposes complex deformable medical image registration into simpler region-wise alignment tasks. The key innovation is leveraging anatomical segmentation to create locally smooth sub-tasks while naturally preserving discontinuities at tissue boundaries. By employing an Euclidean Distance Transform (EDT) loss, SegReg ensures smooth transitions between regions while maintaining sharp boundaries. The framework demonstrates that segmentation quality is the primary limiting factor in registration performance, achieving near-perfect alignment with ground truth segmentation and outperforming state-of-the-art methods by 2-12% across cardiac, abdominal, and lung imaging scenarios.

## Method Summary
SegReg transforms deformable registration into a region-wise alignment problem by decomposing images into labeled anatomical regions and registering each region independently. The framework uses a standard 4-layer UNet encoder-decoder to predict velocity fields for individual regions, which are then composed into a final deformation field. A novel EDT loss ensures smooth transitions between regions while preserving discontinuities at tissue boundaries. During training, random region pairs are selected per iteration, and inference composites sub-fields using label masks. The total loss combines velocity field regularization, image similarity (NCC), and EDT-based distance preservation, with the EDT loss weighted 100x higher than the Dice loss to emphasize boundary preservation.

## Key Results
- Achieves 98.23% Dice similarity coefficient with ground truth segmentation
- Outperforms state-of-the-art methods by 2-12% across three clinical scenarios (cardiac, abdominal, lung)
- Demonstrates near-linear dependence of registration accuracy on segmentation quality
- Maintains high performance even with automated segmentation (nnUNet/Swin-UNETR)

## Why This Works (Mechanism)
SegReg works by decomposing the complex non-rigid registration problem into simpler locally smooth sub-tasks. By treating each anatomical region independently and using EDT to enforce smooth transitions while preserving discontinuities at boundaries, the framework reduces the complexity of the registration problem. The EDT loss acts as a regularizer that penalizes abrupt changes between regions while allowing natural discontinuities where tissue boundaries exist. This approach transforms registration from a global optimization problem into a series of local alignment tasks, making it more tractable and robust.

## Foundational Learning
- **Euclidean Distance Transform (EDT):** Converts binary masks into distance maps where each pixel contains its distance to the nearest boundary. Needed to provide smooth distance-based gradients for boundary preservation. Quick check: Verify EDT maps range from 0 (boundary) to positive values (center).
- **Region-wise decomposition:** Breaking registration into independent sub-tasks per anatomical label. Needed to reduce problem complexity and enable local smoothness constraints. Quick check: Confirm each region's deformation field is computed independently.
- **Composite field integration:** Combining multiple partial deformation fields using label masks. Needed to reconstruct global deformation while preserving region-specific properties. Quick check: Validate sum of masked partial fields produces continuous deformation.
- **Multi-scale training:** Training on different region sizes and combinations. Needed to ensure model generalizes across various anatomical scales. Quick check: Monitor performance across different region sizes during training.
- **Loss weighting strategy:** 100x EDT loss weight relative to Dice. Needed to prioritize boundary preservation over region overlap. Quick check: Verify EDT loss dominates during training without causing instability.

## Architecture Onboarding

**Component Map:**
Input images + segmentations -> Region sampling -> UNet encoder -> Velocity field prediction -> Spatial transformation -> Composite deformation -> EDT loss + similarity loss -> Training update

**Critical Path:**
Region sampling → UNet prediction → Composite field composition → EDT loss calculation → Parameter update

**Design Tradeoffs:**
- **Pros:** Reduces complex registration to locally smooth problems, naturally preserves tissue boundaries, demonstrates segmentation quality as primary bottleneck
- **Cons:** Requires accurate segmentation as input, EDT loss scaling is sensitive to implementation, composite field integration can create artifacts if not handled carefully

**Failure Signatures:**
- Gradient explosion when EDT normalization not properly implemented
- Physical "rips" or discontinuities in deformation field at region boundaries
- Poor registration performance indicating segmentation quality issues

**First Experiments:**
1. Implement synthetic test case with two labeled regions to verify composite field integration produces smooth transitions
2. Test different EDT normalization schemes (global vs. per-instance) to determine impact on loss scaling
3. Compare registration accuracy using perfect GT vs. automated segmentation on single dataset

## Open Questions the Paper Calls Out
None

## Limitations
- Performance critically depends on segmentation quality, which may be challenging in clinical practice
- EDT loss implementation requires careful normalization (global vs. per-instance) that is not fully specified
- Composite field integration method details (e.g., scaling & squaring steps) are not provided
- The 100x EDT loss weighting is sensitive to distance map scaling and can cause training instability

## Confidence
- Claims about segmentation quality being primary limiting factor: **High**
- Claims about achieving 98.23% Dice with ground truth segmentation: **Medium** (implementation details missing)
- Claims about 2-12% improvement over state-of-the-art: **Medium** (depends on exact implementation and baselines used)

## Next Checks
1. Implement a small-scale validation with synthetic data (two labeled regions) to verify composite field integration produces smooth transitions without discontinuities at boundaries
2. Test different EDT normalization schemes (global vs. per-instance) to determine their impact on loss scaling and training stability
3. Compare registration accuracy when using different segmentation qualities (perfect GT vs. automated) on a single dataset to validate the near-linear dependence claim