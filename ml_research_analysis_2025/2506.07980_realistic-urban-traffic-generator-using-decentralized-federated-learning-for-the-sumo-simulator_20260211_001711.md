---
ver: rpa2
title: Realistic Urban Traffic Generator using Decentralized Federated Learning for
  the SUMO simulator
arxiv_id: '2506.07980'
source_url: https://arxiv.org/abs/2506.07980
tags:
- traffic
- learning
- data
- urban
- sumo
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: The paper presents a decentralized framework called DesRUTGe that
  uses federated reinforcement learning to generate realistic urban traffic patterns
  for the SUMO simulator. The key innovation is a fully decentralized architecture
  where each traffic detector and its corresponding urban zone operates as an independent
  learning node, training local DRL models and exchanging parameters with neighboring
  zones to collaboratively refine performance.
---

# Realistic Urban Traffic Generator using Decentralized Federated Learning for the SUMO simulator

## Quick Facts
- arXiv ID: 2506.07980
- Source URL: https://arxiv.org/abs/2506.07980
- Reference count: 40
- Primary result: Decentralized federated PPO reduces MAE by nearly threefold versus centralized methods

## Executive Summary
This paper introduces DesRUTGe, a decentralized framework that uses federated reinforcement learning to generate realistic urban traffic patterns for the SUMO simulator. The key innovation is a fully decentralized architecture where each traffic detector and its corresponding urban zone operates as an independent learning node, training local DRL models and exchanging parameters with neighboring zones to collaboratively refine performance. Evaluated using real-world data from Barcelona, DesRUTGe significantly outperforms existing methods such as SUMO's RouteSampler and a centralized approach, reducing mean absolute error by nearly threefold. The geographic neighbor-sharing strategy showed the best results, and the approach enhances privacy, scalability, and robustness by eliminating central coordination. Overall, DesRUTGe provides a more accurate and adaptable solution for generating realistic 24-hour traffic profiles across diverse urban environments.

## Method Summary
DesRUTGe partitions a city map into Voronoi zones, with each zone operating as an independent PPO agent in a decentralized federated learning setup. Agents interact with SUMO via TraCI, injecting vehicles based on learned policies and receiving rewards based on the error between simulated and target detector flows. After local training, agents exchange and average model parameters with geographic neighbors using FedAvg aggregation. The system generates traffic hour-by-hour, adjusting targets based on residual vehicles from previous hours to maintain temporal consistency across the 24-hour period.

## Key Results
- DesRUTGe reduces MAE by nearly threefold compared to SUMO's RouteSampler and a centralized approach
- Geographic neighbor-sharing strategy outperformed affinity-based clustering in reducing Average Relative Error
- The decentralized approach achieved high accuracy while enhancing privacy and scalability compared to centralized methods

## Why This Works (Mechanism)

### Mechanism 1
- **Claim:** Closed-loop Deep Reinforcement Learning (DRL) calibrates vehicle injection rates to match target detector intensities more accurately than static OD-matrix sampling.
- **Mechanism:** A Proximal Policy Optimization (PPO) agent interacts with the SUMO environment. It observes the current vehicle injection estimate (s), applies a multiplicative action (a) to adjust the count, and receives a reward based on the absolute error between the simulated detector output and the real-world target.
- **Core assumption:** The simulator's internal physics (car-following, routing) sufficiently approximate reality such that an agent learning to minimize error in simulation will produce valid real-world proxies.
- **Evidence anchors:**
  - [abstract] Mentions DRL agents generate realistic patterns by interacting with SUMO.
  - [Section IV-B] Defines the MDP tuple (State, Action, Reward) specifically for traffic calibration.
  - [corpus] Corpus supports RL for traffic control (e.g., *Robustness of Reinforcement Learning-Based Traffic Signal Control*), but evidence for *traffic generation* via RL is less established in neighbors.
- **Break condition:** If the simulator fails to model congestion spillback accurately, the agent learns a biased policy that over/under-injects vehicles to meet local targets, ignoring downstream effects.

### Mechanism 2
- **Claim:** Decentralized Federated Learning (DFL) using geographic neighbors improves model convergence and stability compared to centralized or affinity-based clustering.
- **Mechanism:** Each traffic zone (agent) trains locally. Instead of sending gradients to a central server, agents exchange model parameters only with Voronoi neighbors (zones sharing a border). This leverages the spatial correlation of traffic (e.g., a congested zone affects adjacent zones).
- **Core assumption:** Traffic dynamics are spatially correlated; therefore, parameter averaging among physically adjacent zones yields a more robust generalized policy than averaging across the entire city or non-adjacent "similar" zones.
- **Evidence anchors:**
  - [abstract] Highlights that geographic neighbor-sharing showed the best results.
  - [Section VI-B] Experimental results show Geographic Neighbors outperform Volume and Pattern Similarity strategies in reducing Average Relative Error (ARE).
  - [corpus] *Privacy-Preserving Federated Learning* supports FL for efficiency/privacy, but does not validate the specific geographic constraint for generation tasks.
- **Break condition:** In cities with "patchy" urbanization (e.g., a highway cutting through a residential area with distinct flow logic), geographic adjacency might enforce irrelevant parameter correlations, degrading performance.

### Mechanism 3
- **Claim:** Sequential hourly generation with residual traffic subtraction maintains temporal consistency across a 24-hour period.
- **Mechanism:** The system generates traffic hour-by-hour. After generating hour h, it calculates a "residual" vector representing vehicles still active in the network. This residual is subtracted from the target for hour h+1, preventing cumulative over-injection.
- **Core assumption:** Traffic flow is a continuous process where vehicles injected in previous time steps significantly impact current detector counts.
- **Evidence anchors:**
  - [Section IV-C-2] Algorithm 2 explicitly details the target adjustment equation: AdjustedTarget_h = Target_h - Residual_h.
  - [Section VI-A] Validation shows close alignment over 24 hours, implying the residual mechanism effectively chains hourly states.
- **Break condition:** If simulation runs are not strictly deterministic or if route duration estimates diverge from reality, the "residual" calculation will accrue error, leading to drift in later hours of the day.

## Foundational Learning

- **Concept: Proximal Policy Optimization (PPO)**
  - **Why needed here:** This is the core learning algorithm. Unlike standard Q-learning, PPO handles continuous action spaces (injecting N vehicles) and is robust to the noisy, non-stationary environment of traffic simulation.
  - **Quick check question:** Can you explain why a clipped surrogate objective (used in PPO) is safer for training than a standard policy gradient in a complex simulator like SUMO?

- **Concept: Voronoi Tessellation**
  - **Why needed here:** This defines the spatial topology for the decentralized system. Understanding it is critical to implementing the "Geographic Neighbor" sharing strategy.
  - **Quick check question:** How does partitioning a city map by detector proximity ensure that federated averaging creates meaningful spatial consensus?

- **Concept: Decentralized Federated Averaging (FedAvg)**
  - **Why needed here:** This is the "glue" of the system. You must understand how nodes aggregate weights (coordinate-wise averaging) without a central server to debug convergence issues.
  - **Quick check question:** In a fully decentralized graph, how does the lack of a central coordinator change the synchronization requirements compared to standard Federated Learning?

## Architecture Onboarding

- **Component map:**
  - OpenStreetMap (OSM) data -> SUMO network (.net.xml) -> Voronoi partitioning -> 10 PPO agents -> SUMO instances (via TraCI) -> Model exchange (P2P) -> FedAvg aggregation

- **Critical path:**
  1. **Preprocessing:** Download OSM, convert to SUMO network (.net.xml), partition into TAZs using Voronoi.
  2. **Initialization:** Spawn N agents (one per TAZ).
  3. **Training Loop:**
     - Agent injects vehicles based on policy.
     - SUMO steps simulation.
     - Detectors measure flow -> Calculate Reward.
     - PPO updates local model.
     - **Federation Step:** Exchange weights with Voronoi neighbors -> Aggregate -> Synchronize.

- **Design tradeoffs:**
  - **Runtime vs. Privacy:** The paper notes a significant runtime increase (3.34h vs 1.4h for centralized) due to higher local intensities and communication overhead. This is the cost of eliminating the central server and respecting local data bounds.
  - **Topology Strategy:** Choosing "Geographic" vs. "Affinity" neighbors. Geographic is empirically better here, but affinity might scale better in non-contiguous urban sprawls (untested assumption).

- **Failure signatures:**
  - **Multiprocessing Deadlocks:** The paper explicitly mentions migrating from multithreading to multiprocessing to handle concurrent SUMO calls. Expect IPC issues if using standard thread-based pools.
  - **Detector Mismatch:** If OSM edges do not align perfectly with real detector coordinates, the reward signal becomes noise.
  - **Residual Drift:** If MAE stays low for 0600h but spikes at 1700h, the residual subtraction mechanism is failing to account for long-duration trips.

- **First 3 experiments:**
  1. **Single-Zone Sanity Check:** Isolate one TAZ. Run the 1h-TGA (Algorithm 1) against a known static target. Verify if the agent can reduce error to < 0.001 without federation.
  2. **Topology Ablation:** Run the full DFL setup with 3 agents. Compare "Geographic" vs "Random" neighbor selection to verify that spatial proximity is actually driving the performance gain.
  3. **Residual Stress Test:** Run a 24h generation for a high-density zone. Plot the "Adjusted Target" vs. "Original Target" to visualize how much residual correction is occurring during peak hours.

## Open Questions the Paper Calls Out

### Open Question 1
- **Question:** How can advanced DFL aggregation techniques be integrated to mitigate performance degradation caused by non-IID data distributions and potential Byzantine attacks?
- **Basis in paper:** [explicit] The conclusion states future research "should explore advanced DFL aggregation techniques to improve robustness against non-IID data distributions and potential Byzantine behaviors."
- **Why unresolved:** The current study prioritizes functionality using FedAvg and assumes generally cooperative nodes, leaving the system's robustness against malicious actors or highly heterogeneous data untested.
- **What evidence would resolve it:** Simulation results comparing standard FedAvg against Byzantine-robust aggregators (e.g., trimmed mean, coordinate-wise median) in scenarios with adversarial nodes or statistically diverse traffic zones.

### Open Question 2
- **Question:** To what extent can rapid information dissemination protocols, such as Gossip, reduce the communication overhead and digital carbon footprint of the decentralized framework?
- **Basis in paper:** [explicit] The authors note that "decentralizing the federation process requires sharing more intermediate models," increasing overhead, and explicitly state they "will consider adopting rapid information dissemination techniques using protocols such as Gossip in future work."
- **Why unresolved:** The current implementation exchanges models directly, which increases energy consumption, but alternative lightweight protocols were not implemented or evaluated in this study.
- **What evidence would resolve it:** A comparative analysis of bandwidth usage and energy consumption between the current direct exchange method and a Gossip-based implementation on the same network topology.

### Open Question 3
- **Question:** Does replacing static Voronoi-based partitioning with dynamic Traffic Analysis Zone (TAZ) definitions improve the accuracy of traffic generation?
- **Basis in paper:** [explicit] The future work section explicitly includes "exploring dynamic TAZ definitions" as a necessary next step beyond the static Voronoi diagrams used in the experiments.
- **Why unresolved:** The current methodology relies on static geographic partitions which may not accurately reflect fluid traffic boundaries or demand shifts throughout the day.
- **What evidence would resolve it:** Performance metrics (e.g., MAE) comparing the static Voronoi approach against a model using time-varying zone boundaries based on real-time traffic density or flow.

## Limitations

- **Single-city validation:** The approach is validated only on Barcelona data (45 km², 10 detectors), with no testing on different urban topologies or traffic cultures.
- **Runtime overhead:** The decentralized approach takes 3.34 hours versus 1.4 hours for centralized, representing a significant efficiency trade-off.
- **Privacy claims unquantified:** While the paper claims privacy benefits from eliminating a central server, it does not analyze whether exchanging full model weights could still leak local traffic information.

## Confidence

- **High confidence:** The claim that DFL with geographic neighbor-sharing outperforms both centralized and affinity-based strategies is well-supported by the experimental results (Section VI-B), which show consistent improvements in ARE across all tested hours.
- **Medium confidence:** The assertion that the residual subtraction mechanism maintains 24-hour temporal consistency is supported by the visual alignment in Section VI-A, but the paper does not provide statistical tests or error propagation analysis to quantify cumulative drift risk.
- **Low confidence:** The paper claims the approach is "privacy-preserving" due to the lack of a central server, but it does not analyze whether exchanging full model weights (not just gradients) could still leak information about local traffic patterns, nor does it compare against privacy-preserving aggregation techniques like differential privacy or secure multi-party computation.

## Next Checks

1. **Generalization test:** Apply the trained DesRUTGe model to a different urban area (e.g., a 45 km² zone in a different city) and measure MAE degradation to assess spatial transferability.
2. **Privacy audit:** Implement a membership inference attack on the exchanged PPO weights to quantify the actual information leakage in the geographic neighbor-sharing strategy.
3. **Runtime-efficiency trade-off:** Systematically vary the federation frequency (e.g., exchange weights every 1, 3, or 5 rounds) and measure the Pareto frontier between MAE and total training time to identify optimal settings for different use cases.