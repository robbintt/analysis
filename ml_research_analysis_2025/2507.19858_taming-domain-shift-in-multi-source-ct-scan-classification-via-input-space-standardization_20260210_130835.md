---
ver: rpa2
title: Taming Domain Shift in Multi-source CT-Scan Classification via Input-Space
  Standardization
arxiv_id: '2507.19858'
source_url: https://arxiv.org/abs/2507.19858
tags:
- domain
- feature
- across
- ssfl
- standardization
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: ''
---

# Taming Domain Shift in Multi-source CT-Scan Classification via Input-Space Standardization

## Quick Facts
- **arXiv ID:** 2507.19858
- **Source URL:** https://arxiv.org/abs/2507.19858
- **Reference count:** 40
- **Primary result:** Input-space standardization (SSFL++ + KDS) reduces inter-source variance from 3.49/1.76 to 0.87/0.51 while achieving 77.6% macro F1 on hidden test set.

## Executive Summary
This paper addresses the challenge of domain shift in multi-source CT-scan classification by proposing a preprocessing pipeline that standardizes input data before model training. The method combines spatial standardization (SSFL++) to isolate lung regions and remove institutional artifacts, with temporal alignment (KDS) to ensure consistent slice sampling across varying scan lengths. Applied to a COVID-19 CT dataset from four medical institutions, the approach achieves superior cross-source consistency compared to baseline methods while maintaining competitive classification performance.

## Method Summary
The method employs a two-stage preprocessing pipeline: SSFL++ uses morphological filtering and adaptive thresholding to extract lung regions, followed by cropping to a consistent anatomical frame. KDS then samples eight slices at fixed percentiles (0.05-0.95) based on lung tissue density distributions, ensuring anatomically aligned temporal coverage. The preprocessed slices are fed to an EfficientNet-B3 backbone with slice-wise feature extraction and average pooling aggregation. Training uses Adam optimizer with BCE loss and 5-fold cross-validation.

## Key Results
- Inter-source variance reduction from 3.49/1.76 to 0.87/0.51 compared to raw data
- Macro F1-score of 77.6% on hidden competition test set
- Ablation study shows SSFL++ + KDS combination provides synergistic benefits beyond individual components

## Why This Works (Mechanism)

### Mechanism 1: Spatial Standardization via Lung-Centric Framing
Enforcing a consistent field-of-view reduces spatial domain shift by eliminating non-diagnostic background variance through lung extraction and cropping.

### Mechanism 2: Temporal Alignment via Density-Based Sampling
Kernel-density-based sampling ensures consistent anatomical coverage across varying scan lengths by sampling slices at fixed percentiles of lung tissue density distributions.

### Mechanism 3: Synergistic Variance Reduction
The combination of spatial and temporal standardization produces a synergistic effect that reduces inter-source variance more effectively than either component alone.

## Foundational Learning

- **Domain Shift vs. Covariate Shift:** Why needed to understand that performance drops are systematic domain shifts from institutional protocols rather than random noise. Quick check: Does variation between sources come from data distribution (X) or labeling process (Y)?
- **Inductive Bias via Preprocessing:** Why needed to understand that constraining input space is more effective than complex post-hoc algorithms for medical imaging. Quick check: Why would cropping/sampling be safer than adding a loss term during training?
- **Feature Space Analysis (t-SNE/PCA):** Why needed to validate methods not just with accuracy but by visualizing feature embeddings for cross-source consistency. Quick check: In t-SNE plots, should a robust model cluster by Source or by Class?

## Architecture Onboarding

- **Component map:** Raw CT Volume -> SSFL++ (Morphological Filter → Adaptive Threshold → Bounding Box → Crop) -> KDS (Lung Area → KDE → Percentile Selection) -> EfficientNet-B3 (Slice-wise features) -> Average Pooling -> Linear Layer -> Sigmoid
- **Critical path:** Accuracy of lung mask extraction, as incorrect crops affect both spatial consistency and density-based sampling.
- **Design tradeoffs:** Preventive vs. reactive alignment (hard preprocessing vs. soft feature-space adaptation), fixed vs. adaptive sampling (fixed percentiles vs. fixed slice count).
- **Failure signatures:** Source-specific clustering in t-SNE plots, high inter-source variance metrics (>1.5).
- **First 3 experiments:**
  1. Ablation study: Raw data vs. SSFL++ only vs. SSFL++ + KDS to verify F1-score gains correspond to variance reduction.
  2. Density curve visualization: Plot selected slice indices vs. lung density curves to verify anatomical alignment.
  3. Architecture swap: Replace EfficientNet with Transformer to confirm gains are data-pipeline-dependent.

## Open Questions the Paper Calls Out

- **KDS robustness for focal pathologies:** Whether density-based sampling captures localized anomalies that don't significantly alter global density distributions, as validation is limited to diffuse COVID-19 disease.
- **Comparison to generative harmonization:** How the heuristic pipeline compares to GAN-based standardization methods (e.g., STAN-CT) that were mentioned but not benchmarked.
- **Theoretical limits of standardization:** Whether the observed trade-off between local discriminability and cross-source consistency represents an inherent constraint of input-space standardization approaches.

## Limitations
- Morphological filtering and adaptive thresholding parameters for lung extraction are underspecified, risking inconsistent implementation.
- KDE bandwidth selection and lung tissue area calculation methods are not explicitly defined, affecting sampling consistency.
- Highly imbalanced per-source dataset sizes (e.g., Source 2 has only 39 COVID scans) may bias cross-source variance estimates.

## Confidence
- **High:** Core hypothesis supported by quantitative metrics and ablation study results.
- **Medium:** Synergistic effect claim supported by Table 1 but mechanism relies on unverified assumptions.
- **Low:** Generalizability of density-anatomy correlation across all pathologies and patient populations is not rigorously tested.

## Next Checks
1. **Parameter sensitivity analysis:** Systematically vary morphological kernel sizes and adaptive threshold algorithms to quantify impact on lung extraction accuracy.
2. **Pathology-agnostic density alignment:** Apply KDS to non-COVID CT datasets to verify density-anatomy correlation holds across pathologies.
3. **Extreme imbalance testing:** Train on balanced subsets of each source to determine if variance reduction is driven by source size or true cross-institutional alignment.