---
ver: rpa2
title: 'VIGIL: A Reflective Runtime for Self-Healing Agents'
arxiv_id: '2512.07094'
source_url: https://arxiv.org/abs/2512.07094
tags:
- vigil
- agent
- runtime
- reflective
- prompt
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: "VIGIL introduces a reflective runtime for self-healing LLM agents\
  \ that operates outside the agent\u2019s core loop, using behavioral logs, affective\
  \ appraisal, and stage-gated diagnostics to detect and repair failures. It maintains\
  \ a decaying emotional memory (EmoBank) to surface soft failures, diagnoses behavior\
  \ into Roses/Buds/Thorns (RBT), and generates targeted prompt and code patches."
---

# VIGIL: A Reflective Runtime for Self-Healing Agents

## Quick Facts
- **arXiv ID**: 2512.07094
- **Source URL**: https://arxiv.org/abs/2512.07094
- **Reference count**: 10
- **Primary result**: VIGIL reduces average delay from 97s to 8s and eliminates all frustration events in a reminder-agent case study through self-healing diagnostics.

## Executive Summary
VIGIL introduces a reflective runtime for self-healing LLM agents that operates outside the agent's core loop. Using behavioral logs, affective appraisal, and stage-gated diagnostics, it detects and repairs failures while maintaining a decaying emotional memory (EmoBank) to surface soft failures. The system diagnoses behavior into Roses/Buds/Thorns (RBT) and generates targeted prompt and code patches. In a reminder-agent case study, VIGIL identified premature toasts, latency spikes, and timestamp inconsistencies, demonstrating significant performance improvements and meta-procedural self-repair capabilities when its own diagnostic tool failed.

## Method Summary
VIGIL functions as an external supervisor that periodically reflects on a target LLM agent's behavior through behavioral logs. It operates as a state-gated pipeline with deterministic appraisal heuristics mapping events to emotions, storing them in a decaying emotional memory (EmoBank), and classifying behaviors into RBT categories. The system generates prompt patches and code diffs for remediation, enforcing explicit error boundaries to prevent invalid tool sequences. When internal tools fail, VIGIL can diagnose its own failures and propose fixes through fallback mechanisms, demonstrating meta-procedural self-repair capabilities.

## Key Results
- Reduced average delay from 97s to 8s in reminder-agent case study
- Eliminated all frustration events through targeted remediation
- Successfully repaired its own schema mismatch failure through meta-procedural self-repair

## Why This Works (Mechanism)

### Mechanism 1: Decaying Affective Memory for Soft Failure Detection
Accumulating emotional appraisals with exponential decay surfaces latent behavioral degradation that exception-based monitoring misses. Events pass through deterministic appraisal heuristics (success→relief, delay→anxiety), deposit into EmoBank with intensity scaling, then decay via I_decayed = I · 0.5^(Δt/h). Coalescing prevents noise amplification; rebound injection models recovery.

### Mechanism 2: Stage-Gated Pipeline with Explicit Error Boundaries
Enforcing deterministic state transitions prevents the LLM from improvising invalid tool sequences, maintaining structural coherence. Pipeline progresses through start → eb_updated → diagnosed → prompt_done → diff_done. Each stage gates subsequent tool calls; illegal transitions raise explicit exceptions rather than allowing improvisation.

### Mechanism 3: Meta-Procedural Self-Repair via Fallback Diagnosis
When internal diagnostic tools fail, the system can diagnose its own failures, propose fixes, and resume via degraded fallback paths. Internal tool failure → capture Python traceback → parse error signature → classify as internal schema conflict Thorn → emit remediation guidance → fallback to cached EmoBank state for provisional diagnosis → re-run post-fix.

## Foundational Learning

- **Affective Appraisal Mapping**: Understanding how events map to structured emotions (valence, intensity, cause) is prerequisite to debugging EmoBank behavior and tuning thresholds. *Quick check*: Given an event with status="delay" and delayed_by_sec=180, what emotion, valence, and intensity would the appraisal engine produce?

- **State Machine Enforcement**: The stage-gated pipeline is a finite state machine; understanding transitions and illegal states is essential for extending or debugging orchestration. *Quick check*: What error is raised if build_prompt_patch is called immediately after start, skipping eb_updated and diagnosed?

- **Unified Diff Generation**: Code proposals are emitted as unified diffs; reading and validating diffs is required to assess patch quality before integration. *Quick check*: A diff proposes adding wait_for_receipt() before toast emission. What semantic guarantee does this introduce, and what could break if the backend never responds?

## Architecture Onboarding

- **Component map**: Log ingestion → Appraisal → EmoBank deposit → RBT diagnosis → Prompt patch + Code diff emission
- **Critical path**: Log ingestion → Appraisal → EmoBank deposit → RBT diagnosis → Prompt patch + Code diff emission. Any stage failure should surface explicit error or fallback diagnosis.
- **Design tradeoffs**: Batch vs. real-time: Current design is episodic (manual trigger); extensible to streaming but requires safety gates for live patching. Isolation vs. coupling: External supervision preserves production stability but limits immediate intervention. Deterministic vs. LLM-driven: Appraisal, decay, thresholds are deterministic; LLM used only for high-level reasoning and diff synthesis.
- **Failure signatures**: Schema mismatch in tool calls (produces Thorn with internal.* cause), Missing or malformed event logs (ingestion fails silently if ts/kind missing), Threshold violations in emotional intensity (false positives if intensity scaling is miscalibrated), Core identity mutation attempt (prompt patch aborted if CORE IDENTITY block modified)
- **First 3 experiments**: 1) Run VIGIL against a synthetic agent with injected delay events; verify EmoBank accumulates frustration/anxiety and RBT produces Thorn with correct cause. 2) Trigger a schema mismatch in diagnose_rbt(); confirm fallback diagnosis executes and remediation guidance is emitted. 3) Apply a generated code diff to a test repo; validate that receipt gating eliminates premature toasts and latency metrics improve as reported (97s → 8s in case study).

## Open Questions the Paper Calls Out

- Can learned appraisal functions trained on user feedback or downstream utility signals outperform VIGIL's current deterministic rule-based emotional mappings?
- How should priority resolution and cross-agent causal inference function when VIGIL supervises multiple agents simultaneously?
- What latency bounds are achievable for streaming reflection without compromising the safety guarantees of stage-gated execution?
- How robust is VIGIL's meta-procedural self-repair when its own remediation proposals introduce regressions rather than fixes?

## Limitations
- Decay parameter generalization across diverse agent behaviors remains untested
- Emotional signature universality may not capture idiosyncratic real-world failure patterns
- Stage-gated pipeline rigidity may struggle with non-linear diagnosis requirements
- Meta-procedural self-repair coverage is unproven against cascading failures

## Confidence
- **High Confidence**: Stage-gated pipeline mechanism and its role in preventing invalid tool sequences
- **Medium Confidence**: Decaying emotional memory (EmoBank) effectiveness across diverse agent types
- **Medium Confidence**: Meta-procedural self-repair robustness against diverse internal failure types

## Next Checks
1. Apply VIGIL to three distinct agent types with injected soft failures to measure EmoBank sensitivity and specificity across decay parameters
2. Design scenarios requiring backtracking or parallel tool orchestration to test linear pipeline limitations
3. Inject multi-stage internal failures to evaluate fallback mechanism maintenance of diagnostic coherence