---
ver: rpa2
title: Smooth Quadratic Prediction Markets
arxiv_id: '2505.02959'
source_url: https://arxiv.org/abs/2505.02959
tags:
- market
- prediction
- smooth
- quadratic
- dcfmm
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper introduces the Smooth Quadratic Prediction Market (SQPM),
  a novel automated market maker that replaces the Bregman divergence fee of the Duality-based
  Cost Function Market Maker (DCFMM) with a simpler quadratic "fee." The SQPM maintains
  key properties like no-arbitrage, bounded worst-case loss, and expressiveness while
  improving worst-case monetary loss for Arrow-Debrett securities compared to DCFMM.
  The authors show that traders are incentivized to implement general steepest descent,
  converging to their belief distribution at rate 1/t.
---

# Smooth Quadratic Prediction Markets

## Quick Facts
- **arXiv ID:** 2505.02959
- **Source URL:** https://arxiv.org/abs/2505.02959
- **Reference count:** 37
- **Primary result:** SQPM replaces DCFMM's Bregman divergence fee with a quadratic upper bound, improving worst-case loss while maintaining key properties.

## Executive Summary
This paper introduces the Smooth Quadratic Prediction Market (SQPM), an automated market maker that replaces the Bregman divergence fee of the Duality-based Cost Function Market Maker (DCFMM) with a simpler quadratic "fee." The SQPM maintains key properties like no-arbitrage, bounded worst-case loss, and expressiveness while improving worst-case monetary loss for Arrow-Debrett securities compared to DCFMM. The authors show that traders are incentivized to implement general steepest descent, converging to their belief distribution at rate 1/t. The work examines trading behavior under budget constraints and buy-only markets, demonstrating convergence in both cases. Additionally, the paper proposes an approach to facilitate adaptive liquidity by decreasing the smoothness parameter as trading volume increases, though further theoretical justification is needed for this extension.

## Method Summary
The SQPM implements a payment function PayL(qt, rt) = ⟨∇C(qt), rt⟩ + (L/2)||rt||², where C is a CIIP cost function and L is the smoothness constant. The market state updates via qt+1 = qt + rt. Traders optimize their bundles to maximize ⟨μ, r⟩ - Pay, which under the quadratic fee structure implements a steepest descent step towards their belief μ. The method generalizes across p-norms and supports various CIIP cost functions including softmax and sparsemax. For budget-constrained traders, the optimization problem becomes min_{rt} ⟨∇C(qt)-μ, rt⟩ + (L/2)||rt||² subject to ⟨rt, ∇C(qt)⟩ ≤ B.

## Key Results
- SQPM guarantees strictly better worst-case monetary loss than DCFMM for the same cost function.
- Traders collectively implement general steepest descent, achieving O(1/t) convergence to their belief distribution.
- The market maintains no-arbitrage properties and bounded loss while using a simpler quadratic fee structure.
- Adaptive liquidity mechanisms are proposed but require further theoretical validation.

## Why This Works (Mechanism)

### Mechanism 1
- **Claim:** Replacing Bregman divergence fees with a quadratic upper bound increases market maker revenue while preserving "No Arbitrage."
- **Mechanism:** The SQPM charges Pay = ⟨∇C(qt), rt⟩ + (L/2)||rt||², which upper bounds the DCFMM fee D_C(qt+rt, qt) by L-smoothness. Since the SQPM always charges at least as much as DCFMM for the same trade, it collects more revenue.
- **Core assumption:** The cost function C is L-smooth with respect to the chosen norm.
- **Evidence anchors:** Theorem 4 shows SQPM has better worst-case loss than DCFMM; the abstract states SQPM "improves worst-case monetary loss relative to DCFMM."
- **Break condition:** If C is not L-smooth, the quadratic upper bound may not hold, breaking the revenue guarantee.

### Mechanism 2
- **Claim:** Expectation-maximizing traders collectively implement a general steepest descent algorithm, driving the market price toward their collective belief.
- **Mechanism:** A trader solving max_r ⟨μ, r⟩ - Pay with Pay = ⟨∇C(qt), r⟩ + (L/2)||r||² effectively implements the update qt+1 = qt + r where r minimizes ⟨∇C(qt)-μ, r⟩ + (L/2)||r||², equivalent to a gradient descent step.
- **Core assumption:** Traders are risk-neutral expectation maximizers sharing consistent beliefs.
- **Evidence anchors:** Theorem 6 proves convergence of ∇C(qt) → μ at rate 1/t; the abstract states SQPM "incentivizes agents to collectively implement general steepest gradient descent."
- **Break condition:** Budget constraints or heterogeneous beliefs may degrade convergence from O(1/t) to slower rates.

### Mechanism 3
- **Claim:** Adaptive liquidity can be facilitated by decoupling the fee structure from the price update rule.
- **Mechanism:** The Volume-Parameterized Market adjusts the liquidity fee based on trading volume v_t, allowing the smoothness parameter to decrease as volume increases, reducing price sensitivity without rewriting core pricing logic.
- **Core assumption:** The proposed liquidity fee effectively approximates risk change without introducing arbitrage.
- **Evidence anchors:** Section 5 defines VPM payment but states "further work is required to prove bounded loss"; the abstract notes this approach "needs further theoretical justification."
- **Break condition:** Poorly tuned volume update functions may fail to scale liquidity correctly, leading to stagnant markets or excessive maker risk.

## Foundational Learning

- **Concept: Bregman Divergence & L-Smoothness**
  - **Why needed here:** SQPM replaces Bregman divergence fees with quadratic upper bounds; understanding L-smoothness is essential to verify the approximation holds.
  - **Quick check question:** For a strictly convex function C, does the quadratic upper bound always over-estimate or under-estimate the Bregman divergence?

- **Concept: Incentive Compatibility (Axiom 5 vs. Axiom 6)**
  - **Why needed here:** SQPM trades strict Incentive Compatibility for Incremental Incentive Compatibility; this distinction is critical for understanding trader behavior.
  - **Quick check question:** Why might a market designer accept "incremental" convergence rather than instant convergence?

- **Concept: Norms (ℓ₁, ℓ₂, ℓ∞) in Optimization**
  - **Why needed here:** The paper generalizes to arbitrary p-norms, changing the geometry of steepest descent paths traders take.
  - **Quick check question:** If using an ℓ₁ norm for the quadratic fee, what kind of sparsity might you expect in the resulting trade bundles?

## Architecture Onboarding

- **Component map:** Cost Function Module → Gradient Calculator → Fee Engine → Payment Calculator → State Keeper
- **Critical path:** 1) Receive trade bundle request rt 2) Calculate instantaneous price ∇C(qt) 3) Calculate quadratic fee (L/2)||rt||² 4) Sum to determine Pay 5) Update qt+1 ← qt + rt
- **Design tradeoffs:**
  - Profitability vs. Incentives: SQPM guarantees higher maker revenue than DCFMM but relaxes strict incentive compatibility to "incremental" compatibility.
  - Norm Selection: ℓ₂ norms yield standard gradient descent paths; ℓ₁ norms may induce sparse updates.
- **Failure signatures:**
  - Arbitrage opportunity: If fee calculation relative to norm is incorrect, Axiom 3 (no arbitrage) may fail.
  - Non-convergence: Budget constraints may degrade the O(1/t) convergence rate significantly.
- **First 3 experiments:**
  1. Replicate Figure 1: Implement SQPM with Softmax C and ℓ₂ norm; verify market state path converges to belief vector μ.
  2. Worst-Case Loss Comparison: Run adversarial trades against both SQPM and DCFMM to confirm SQPM collected revenue is strictly higher.
  3. Budget Constraint Stress Test: Implement budget-bounded trader logic and measure convergence speed relative to budget size B.

## Open Questions the Paper Calls Out

- **Open Question 1:** Does the adaptive liquidity mechanism satisfy bounded worst-case loss, information incorporation, and incentive compatibility?
  - **Basis:** Section 5 states proving these properties "becomes challenging due to the non-convexity of the expected return."
  - **Why unresolved:** Non-convex optimization prevents direct application of standard convex analysis.
  - **What evidence would resolve it:** Formal proofs demonstrating the payment function upholds missing axioms, or a counter-example showing where guarantees fail.

- **Open Question 2:** Can SQPM be generalized to support combinatorial or infinite outcome spaces?
  - **Basis:** Appendix A identifies generalizing "beyond AD securities" as feasible future direction.
  - **Why unresolved:** Current work focuses specifically on Arrow-Debreu securities over finite outcomes.
  - **What evidence would resolve it:** Theoretical construction maintaining quadratic fee structure and O(1/t) convergence for combinatorial outcomes.

- **Open Question 3:** How does the market converge when agents have heterogeneous or time-varying beliefs?
  - **Basis:** Appendix A proposes analyzing convergence under varying beliefs via stochastic gradient descent reduction.
  - **Why unresolved:** Main convergence theorems rely on agents sharing the same belief μ.
  - **What evidence would resolve it:** Proof of convergence or regret bounds under random selection of traders with conflicting beliefs.

## Limitations

- The adaptive liquidity extension lacks rigorous theoretical justification for maintaining bounded worst-case loss and other key properties.
- Experiments for budget-constrained traders only demonstrate qualitative convergence without quantitative bounds on degradation of the O(1/t) rate.
- Numerical implementation details for solving budget-constrained optimization are not specified, making exact reproduction difficult.

## Confidence

- **High Confidence:** Core SQPM mechanism and its O(1/t) convergence properties are mathematically rigorous with clear proofs.
- **Medium Confidence:** Worst-case loss improvement over DCFMM is proven but relies on L-smoothness assumption.
- **Low Confidence:** Adaptive liquidity mechanism and its theoretical properties are not fully developed or proven.

## Next Checks

1. **Prove or disprove:** For a given CIIP cost function C, verify whether it is L-smooth for some finite L and what that value is (particularly for sparsemax).
2. **Benchmark convergence:** Implement budget-constrained trader logic and quantitatively measure convergence rate degradation as a function of budget size B, comparing against unconstrained O(1/t) rate.
3. **Stress-test adaptive liquidity:** Design simulation where volume parameter v_t increases rapidly and observe whether market maintains no-arbitrage properties and bounded loss, identifying failure conditions.