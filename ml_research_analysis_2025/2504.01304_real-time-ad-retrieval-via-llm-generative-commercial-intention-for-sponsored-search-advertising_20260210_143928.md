---
ver: rpa2
title: Real-time Ad retrieval via LLM-generative Commercial Intention for Sponsored
  Search Advertising
arxiv_id: '2504.01304'
source_url: https://arxiv.org/abs/2504.01304
tags:
- retrieval
- commercial
- rare
- search
- query
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper introduces RARE, a real-time ad retrieval framework
  using LLM-generated Commercial Intentions (CIs) as intermediate semantic representations.
  Unlike existing methods that rely on numeric IDs or heavy document identifiers,
  RARE employs a knowledge-injected and format-fine-tuned LLM to generate CIs from
  ad content and user queries.
---

# Real-time Ad retrieval via LLM-generative Commercial Intention for Sponsored Search Advertising

## Quick Facts
- arXiv ID: 2504.01304
- Source URL: https://arxiv.org/abs/2504.01304
- Reference count: 18
- RARE framework achieves 5.04% increase in consumption, 6.37% rise in GMV, 1.28% improvement in CTR, and 5.29% increase in shallow conversions in online A/B testing

## Executive Summary
This paper introduces RARE, a real-time ad retrieval framework that uses LLM-generated Commercial Intentions (CIs) as intermediate semantic representations for sponsored search advertising. Unlike traditional methods relying on numeric IDs or heavy document identifiers, RARE employs a knowledge-injected and format-fine-tuned LLM to generate lightweight CIs from ad content and user queries. The system has been deployed in a large-scale online environment handling hundreds of millions of daily searches and demonstrates significant improvements over ten competitive baselines in both online and offline evaluations.

## Method Summary
RARE addresses the challenge of real-time ad retrieval by introducing Commercial Intentions as semantic tokens that serve as intermediate representations between user queries and advertisements. The framework uses a knowledge-injected LLM that has been format-fine-tuned to generate CIs from ad content and user queries. These CIs establish a one-to-many relationship with ads, enabling efficient retrieval through constrained beam search. To ensure real-time performance, RARE implements caching for high-frequency queries and leverages the semantic richness of CIs to improve ad relevance. The system has been deployed in a production environment serving hundreds of millions of daily searches, demonstrating both scalability and effectiveness.

## Key Results
- Online A/B testing shows 5.04% increase in consumption, 6.37% rise in GMV, and 1.28% improvement in CTR
- Offline experiments demonstrate superior performance over ten competitive baselines across HR@500, MAP, and ACR metrics
- 5.29% increase in shallow conversions achieved in production deployment

## Why This Works (Mechanism)
RARE works by introducing a semantic abstraction layer between queries and ads through Commercial Intentions. The knowledge-injected LLM generates contextually rich CIs that capture the commercial intent behind both user queries and ad content. This semantic bridging allows for more accurate matching than traditional keyword-based or ID-based retrieval methods. The one-to-many relationship between CIs and ads enables efficient indexing and retrieval, while constrained beam search ensures generation quality. The caching mechanism for frequent queries addresses the real-time performance requirement, making the system practical for large-scale deployment.

## Foundational Learning
- **LLM fine-tuning for commercial domains**: Required to adapt general-purpose LLMs to understand advertising-specific language and intent patterns. Quick check: Evaluate fine-tuned model's performance on domain-specific benchmarks.
- **Constrained beam search**: Needed to ensure generated CIs remain within acceptable semantic boundaries while maintaining diversity. Quick check: Compare retrieval quality with unconstrained generation approaches.
- **Knowledge injection techniques**: Essential for incorporating domain expertise and advertising rules into the LLM. Quick check: Measure performance impact with and without knowledge injection.
- **Semantic token mapping**: Critical for establishing efficient one-to-many relationships between CIs and ads. Quick check: Analyze index size and retrieval latency with different mapping strategies.
- **Real-time caching strategies**: Required to handle high-frequency queries without generating CIs repeatedly. Quick check: Measure cache hit rates and their impact on end-to-end latency.

## Architecture Onboarding

**Component Map**
LLM Generator -> CI Cache -> Ad Index -> Retrieval Engine -> Ranking System

**Critical Path**
User Query → CI Generation (or Cache Lookup) → Ad Retrieval via CI → Ranking → Results Display

**Design Tradeoffs**
- Semantic richness vs. generation latency in CI creation
- Cache size vs. freshness of ad relevance
- One-to-many mapping flexibility vs. index complexity
- Knowledge injection depth vs. generation efficiency

**Failure Signatures**
- High cache miss rates indicate poor query pattern prediction
- Degraded CTR suggests CI generation quality issues
- Increased latency points to scaling problems in the ad index
- Low retrieval diversity may indicate overly constrained beam search

**3 First Experiments**
1. Measure end-to-end latency from query receipt to ad retrieval with and without caching enabled
2. Conduct ablation study removing knowledge injection to quantify its specific contribution
3. Test system performance under simulated peak traffic loads to identify scalability constraints

## Open Questions the Paper Calls Out
None identified in the provided content.

## Limitations
- Lack of detailed computational overhead analysis for CI generation and potential latency introduction
- No quantitative evaluation of caching strategy effectiveness (cache hit rates, freshness impact)
- Limited discussion of edge cases where ad relevance might suffer due to CI abstraction
- Missing analysis of CI quality degradation over time and LLM update frequency requirements

## Confidence

**High confidence**: The mathematical framework for CI generation using constrained beam search and the one-to-many mapping relationship between CIs and ads is clearly articulated and technically sound.

**Medium confidence**: The offline experimental results showing RARE outperforming ten baselines across multiple metrics (HR@500, MAP, ACR) are compelling, but baseline implementation details are not fully specified.

**Medium confidence**: The online A/B testing results showing substantial improvements in CTR (1.28%), GMV (6.37%), and consumption (5.04%) are significant, though experimental setup details and statistical significance testing are not provided.

## Next Checks

1. Conduct ablation studies removing the knowledge injection component to quantify its specific contribution to performance gains
2. Measure end-to-end latency from query receipt to ad retrieval with and without caching, including CI generation time
3. Test system performance under simulated peak traffic loads to identify scalability constraints and potential failure modes