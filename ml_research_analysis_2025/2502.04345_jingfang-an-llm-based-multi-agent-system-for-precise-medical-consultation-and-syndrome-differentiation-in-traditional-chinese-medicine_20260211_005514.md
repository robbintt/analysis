---
ver: rpa2
title: 'Jingfang: An LLM-Based Multi-Agent System for Precise Medical Consultation
  and Syndrome Differentiation in Traditional Chinese Medicine'
arxiv_id: '2502.04345'
source_url: https://arxiv.org/abs/2502.04345
tags:
- consultation
- syndrome
- agent
- differentiation
- medical
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: JingFang is an LLM-based multi-agent system designed to address
  limitations in existing TCM-oriented models, particularly their rigid consultation
  frameworks and lack of syndrome differentiation rigor. The system introduces a Multi-Agent
  Collaborative Consultation Mechanism (MACCM) that integrates TCM Specialist Agents
  to emulate real-world diagnostic workflows, enabling personalized, patient-tailored
  consultations.
---

# Jingfang: An LLM-Based Multi-Agent System for Precise Medical Consultation and Syndrome Differentiation in Traditional Chinese Medicine

## Quick Facts
- arXiv ID: 2502.04345
- Source URL: https://arxiv.org/abs/2502.04345
- Reference count: 2
- Key outcome: JingFang significantly improves syndrome differentiation precision by at least 124% compared to existing TCM models and 21.1% compared to state-of-the-art LLMs.

## Executive Summary
JingFang is an LLM-based multi-agent system designed to address limitations in existing TCM-oriented models, particularly their rigid consultation frameworks and lack of syndrome differentiation rigor. The system introduces a Multi-Agent Collaborative Consultation Mechanism (MACCM) that integrates TCM Specialist Agents to emulate real-world diagnostic workflows, enabling personalized, patient-tailored consultations. Additionally, a Syndrome Differentiation Agent fine-tuned on a structured dataset and a Dual-Stage Recovery Scheme (DSRS) within the Treatment Agent are developed to enhance diagnostic accuracy and treatment precision. Comprehensive evaluations demonstrate that JingFang significantly improves syndrome differentiation precision by at least 124% compared to existing TCM models and 21.1% compared to state-of-the-art LLMs.

## Method Summary
JingFang implements three core modules: (1) a MACCM with Manager, Specialist, General, Record, Evaluation, Optimization, and Consultation Agents that iteratively refine questions through structured negotiation; (2) a Syndrome Differentiation Agent fine-tuned via LoRA on Qwen2.5-7B-Instruct using TCM-SD dataset preprocessed with Ten Questions Song framework; (3) a Treatment Agent using DSRS with syndrome-based filtering followed by hybrid sparse-dense retrieval with RRF fusion. The system was trained on 43,000 structured syndrome differentiation cases and evaluated on 8,699 test cases across 170 syndrome types.

## Key Results
- Syndrome differentiation precision improved by 124% compared to existing TCM models and 21.1% compared to SOTA LLMs
- MACCM framework achieved 89/100 expert preference over ablation models
- DSRS retrieval scheme outperformed single-stage matching in 85/100 cases

## Why This Works (Mechanism)

### Mechanism 1: Multi-Agent Collaborative Consultation (MACCM)
Iterative evaluation-optimization between specialized agents improves consultation comprehensiveness and pertinence over single-agent approaches. A Manager Agent assembles a patient-specific team from Specialist Agents plus a General Agent. Each round involves agents proposing questions, Evaluation Agent scoring via Ten Questions Song similarity and case-specific relevance, and Optimization Agent aggregating modification suggestions until consensus or max turns. Core assumption: TCM diagnostic reasoning can be decomposed into specialty-specific inquiry patterns that aggregate productively through structured negotiation. Evidence: MACCM emulation of real-world TCM diagnostic workflows (abstract), Equations 8-10 formalizing evaluation-optimization loop, Table 4 showing 89/100 preference for MACCM. Break condition: When patient presentations span multiple specialties with conflicting inquiry priorities, the optimization loop may converge slowly or produce generic questions.

### Mechanism 2: Ten Questions Song-Guided Data Preprocessing + Fine-Tuning
Structuring training data around the classical TQS framework improves syndrome differentiation accuracy by aligning model inputs with canonical diagnostic reasoning patterns. Raw TCM records contain noise; an LLM-based preprocessing pipeline extracts TQS-relevant information, producing 43,000 structured cases. The Syndrome Agent is then fine-tuned on this cleaned dataset. Core assumption: TQS provides sufficient coverage of TCM diagnostic dimensions; removing non-TQS information reduces distractors without losing critical signal. Evidence: Syndrome Differentiation Agent fine-tuned on structured dataset (abstract), TQS-guided preprocessing description, Table 1 showing JF-RoBERTa achieves 0.8185 weighted precision vs. 0.6757 for Claude-Opus-4.5. Break condition: If TQS framework does not capture domain-specific nuances, preprocessing may over-prune relevant signals.

### Mechanism 3: Dual-Stage Retrieval Scheme (DSRS) for Treatment
Two-stage retrieval with hybrid sparse-dense ranking improves prescription relevance over single-stage symptom matching. Stage 1 filters candidate prescriptions by syndrome attributes (etiology, affected organ, type). Stage 2 encodes candidates using both sparse lexical and dense semantic embeddings, then fuses rankings via Reciprocal Rank Fusion (RRF) to output Top-3 prescriptions. Core assumption: Relevant prescriptions share both lexical markers and semantic similarity to patient presentations; syndrome-based pre-filtering reduces semantic interference from different syndromes with similar symptoms. Evidence: DSRS substantially improves treatment precision (abstract), formalizes two-stage process, Figure 5 shows DSRS outperforms single-stage in 85/100 cases. Break condition: When syndrome attribution is ambiguous or multi-factorial, Stage 1 filtering may exclude valid candidates before semantic re-ranking can recover them.

## Foundational Learning

- **LoRA (Low-Rank Adaptation) fine-tuning**
  - Why needed here: Syndrome Agent uses LoRA (rank=64, α=16) to efficiently adapt Qwen2.5-7B without full parameter updates
  - Quick check question: Can you explain why LoRA reduces memory footprint compared to full fine-tuning, and what the rank parameter controls?

- **Reciprocal Rank Fusion (RRF)**
  - Why needed here: DSRS uses RRF to combine sparse and dense retrieval rankings into a unified prescription ordering
  - Quick check question: Given two ranked lists R1=[A, B, C] and R2=[B, A, C], what is the RRF score for item A with k=60?

- **Ten Questions Song (TQS) framework**
  - Why needed here: TQS is the canonical TCM inquiry structure guiding both consultation evaluation and data preprocessing
  - Quick check question: What are the primary diagnostic dimensions covered by TQS (e.g., cold/heat, deficiency/excess)?

## Architecture Onboarding

- **Component map**: Manager Agent → Specialist Agents + General Agent → Record Agent → Evaluation Agent ↔ Optimization Agent → Consultation Agent; Preprocessed TQS-aligned dataset → LoRA-finetuned Qwen2.5-7B / RoBERTa classifier; DBTCM (80K prescriptions) → Stage 1 syndrome filter → Stage 2 hybrid retriever (sparse + dense) → RRF → Top-3 output
- **Critical path**: Patient chief complaint → MACCM (multi-round questions, 5-10 rounds typical) → final medical record Rf → Syndrome Agent inference → DSRS retrieval → treatment recommendations. Latency dominated by multi-agent iteration loops and dual-stage retrieval.
- **Design tradeoffs**: More Specialist Agents increase coverage but raise coordination overhead and potential question redundancy; aggressive TQS-based preprocessing improves signal-to-noise but may discard rare pattern information; DSRS Stage 1 filtering speeds retrieval but risks excluding cross-syndrome prescriptions.
- **Failure signatures**: Consultation terminates early (3-4 rounds) with incomplete information → likely missing General Agent or poor agent team selection; Syndrome differentiation produces low-confidence or generic outputs → check TQS preprocessing alignment and training data quality; Treatment retrieval returns semantically similar but syndrome-inappropriate prescriptions → Stage 1 filter may be too permissive; review syndrome attribute extraction.
- **First 3 experiments**: (1) MACCM ablation: Run 50-case consultation benchmark with and without General Agent; measure average consultation rounds and expert-rated comprehensiveness; (2) Foundation model sweep: Train Syndrome Agent on identical preprocessed data using Qwen-2.5-3B/7B/14B and GLM-4-9B; compare weighted F1 to validate method/data importance; (3) Retrieval scheme comparison: On 100 held-out cases, compare DSRS vs. single-stage symptom matching; measure prescription similarity to ground truth.

## Open Questions the Paper Calls Out

- **Integration of multimodal diagnostic technologies**: How can pulse diagnosis imaging, tongue image analysis, and other visual/tactile modalities be integrated into JingFang to enhance diagnostic precision in real clinical TCM settings? Current system operates solely on text-based consultation and lacks integration of essential TCM diagnostic modalities. Extension with multimodal inputs evaluated against text-only baseline would resolve this.

- **Generalization to rare syndrome types**: How does JingFang's performance generalize to rare or low-frequency syndrome types underrepresented in training data? Weighted metrics may mask poor performance on rare syndromes; per-syndrome performance breakdown or evaluation on curated rare-syndrome test set would resolve this.

- **Real-world clinical transferability**: To what extent do JingFang's capabilities transfer to real-world clinical interactions with human patients versus simulated LLM-based patient agents? Simulation-to-reality gap may affect consultation quality; clinical trial comparing real vs. simulated patient interactions would resolve this.

## Limitations
- Evaluation subjectivity: Expert preference judgments rely on single-round evaluations rather than longitudinal validation; clinical effectiveness over multiple patient visits remains unassessed.
- Generalizability: System performance evaluated only on structured TCM-SD dataset; real-world applicability to noisy clinical records and non-TCM co-morbidities unverified.
- General Agent dependency: MACCM ablation shows critical dependence on General Agent for maintaining consultation momentum; scaling to broader specialties may exacerbate coordination overhead.

## Confidence

- **High confidence**: Syndrome differentiation precision improvements (124% vs TCM models, 21.1% vs SOTA LLMs) based on quantitative metrics and controlled model ablations.
- **Medium confidence**: MACCM framework effectiveness supported by expert preferences and consultation length metrics, but limited to 100-case evaluation.
- **Medium confidence**: DSRS retrieval gains demonstrated via head-to-head comparison, though retrieval database schema and exact filtering criteria remain underspecified.

## Next Checks

1. **Cross-syndrome generalization**: Test syndrome differentiation on 200 mixed-pattern cases where symptoms span multiple classical syndromes; verify TQS preprocessing does not over-prune critical non-canonical features.

2. **Consultation completeness analysis**: Deploy MACCM on 100 cases with varying complexity; measure whether consultation rounds scale appropriately with symptom diversity and whether General Agent prevents premature termination.

3. **Real-world clinical pilot**: Conduct blinded evaluation of JingFang-generated treatment plans against experienced TCM practitioners on 50 real patient cases; assess clinical outcomes over 3-month follow-up period.