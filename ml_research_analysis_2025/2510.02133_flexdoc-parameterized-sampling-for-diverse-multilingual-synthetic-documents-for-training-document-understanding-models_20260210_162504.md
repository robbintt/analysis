---
ver: rpa2
title: 'FlexDoc: Parameterized Sampling for Diverse Multilingual Synthetic Documents
  for Training Document Understanding Models'
arxiv_id: '2510.02133'
source_url: https://arxiv.org/abs/2510.02133
tags:
- entity
- document
- documents
- group
- data
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: "FlexDoc addresses the challenge of scaling document understanding\
  \ models by generating synthetic, multilingual, and annotated semi-structured documents.\
  \ It combines Stochastic Schemas\u2014which define probabilistic layout and content\
  \ variations\u2014with Parameterized Sampling and a Dynamic Virtual Grid Algorithm\
  \ to ensure realistic, diverse, and well-structured outputs."
---

# FlexDoc: Parameterized Sampling for Diverse Multilingual Synthetic Documents for Training Document Understanding Models

## Quick Facts
- **arXiv ID:** 2510.02133
- **Source URL:** https://arxiv.org/abs/2510.02133
- **Reference count:** 28
- **Primary result:** FlexDoc-generated synthetic data boosts KIE F1 scores by up to 11% when augmenting real datasets while reducing annotation effort by >90%

## Executive Summary
FlexDoc addresses the challenge of scaling document understanding models by generating synthetic, multilingual, and annotated semi-structured documents. It combines Stochastic Schemas—which define probabilistic layout and content variations—with Parameterized Sampling and a Dynamic Virtual Grid Algorithm to ensure realistic, diverse, and well-structured outputs. Experiments on Key Information Extraction (KIE) tasks show that FlexDoc-generated data boosts absolute F1 scores by up to 11% when augmenting real datasets, while reducing annotation effort by over 90% compared to traditional hard-template methods. The framework supports multilingual generation using the same schema and is already deployed in enterprise settings to accelerate model development and cut data acquisition costs.

## Method Summary
FlexDoc generates synthetic semi-structured documents through a pipeline that begins with Stochastic Schema definitions in JSON format, which specify entity groups with probabilistic attributes for presence, layout, styling, and content. Parameterized Sampling then freezes these stochastic attributes into specific document permutations, while a Dynamic Virtual Grid Algorithm spatially arranges entity groups to minimize whitespace and prevent overlaps. The rendering engine (Pillow) draws the final document while recording bounding box annotations. For multilingual support, a single English schema can be reused across languages by switching Faker locales and applying machine translation to headers, enabling consistent annotation formats without per-language schema duplication.

## Key Results
- 10.2-11% absolute F1 improvement when augmenting DocILE with 5k synthetic samples
- 8.3-10.1% absolute F1 improvement on Spanish IDSEM validation set using English schema with locale switching
- >90% reduction in annotation effort compared to traditional hard-template approaches

## Why This Works (Mechanism)

### Mechanism 1: Stochastic Schema Variance
Probabilistic document specifications enable diverse, controlled generation from single definitions. Entity groups and entities are defined with probability distributions for presence, layout position, styling, and content. At runtime, sampling from these distributions creates distinct document permutations while maintaining structural coherence. This works because semi-structured documents follow identifiable patterns with quantifiable variation ranges.

### Mechanism 2: Dynamic Virtual Grid Spatial Coherence
Structured spatial placement significantly improves synthetic data utility for multimodal document models. Canvas divided into virtual grid cells; entity groups mapped to cells with dynamic row/column resizing to minimize whitespace while preventing overlaps. This works because spatial position carries semantic signal for document understanding.

### Mechanism 3: Locale-Aware Multilingual Generation
Schema reuse across languages with locale-switched value generation maintains annotation consistency. Single English schema + faker_locale parameter + machine translation for headers produces multilingual outputs without schema duplication per language. This works because entity types have locale-specific formats but universal semantic types.

## Foundational Learning

- **Semi-structured vs. fully structured documents**
  - Why needed here: FlexDoc targets documents with consistent entity types but variable layout (invoices, receipts). Hard-template approaches remain superior for fixed-layout IDs.
  - Quick check question: Does your document type have fewer than 100 layout variations globally? If yes, hard templates may be more efficient.

- **Multimodal document understanding architectures**
  - Why needed here: FlexDoc generates training data for models (LayoutLM, Phi-4) that jointly process text embeddings, bounding box coordinates, and visual features.
  - Quick check question: What three modalities does LayoutLM consume for each token? (Answer: text, 2D position, image patch)

- **KIE annotation format (IOB chunking)**
  - Why needed here: Paper evaluates using word-level IOB tags; annotations must include bounding boxes and class labels per entity.
  - Quick check question: How would "SecureTrust Insurance" be labeled for class "InsurerName"? (Answer: Both tokens tagged "InsurerName", B-/I- prefixes ignored in evaluation)

## Architecture Onboarding

- **Component map:** Stochastic Schema (JSON) → Parameterized Sampling → Fake Value Generator (Faker + custom class) → Dynamic Virtual Grid → Document Renderer (Pillow) → Annotation Export
- **Critical path:** Schema authoring (2.5 hrs) → Sampling loop → Grid placement → Rendering → Annotation validation
- **Design tradeoffs:**
  - Diversity vs. photorealism: Stochastic variation increases layout diversity but generates "clean" documents without real-world noise
  - Schema complexity vs. debuggability: More attributes = more permutations but harder to trace generation failures
  - Scale vs. semantic consistency: Current version lacks semantic value constraints (totals don't sum)
- **Failure signatures:**
  - Overlapping text elements → Grid cell sizing insufficient for entity group content
  - Low downstream F1 despite 5k+ synthetic samples → Schema probability distributions don't match target document population
  - Missing annotations in output → Rendering function not recording bounding boxes
- **First 3 experiments:**
  1. Generate 1k docs with vs. without Dynamic Virtual Grid, train LayoutLM on each, measure F1 delta on held-out real data
  2. Vary entity appearance probability (0.3, 0.5, 0.7, 1.0), compute pairwise similarity using LayoutLM embeddings, find diversity sweet spot
  3. Train on English synthetic only, evaluate zero-shot on Spanish IDSEM test split; quantify gap vs. Spanish synthetic + real training

## Open Questions the Paper Calls Out

- **Semantic value generators:** How would introduction of semantic value generators (ensuring cross-field consistency such as invoice totals summing correctly) impact downstream model performance on tasks requiring numerical reasoning? The current implementation relies on independent random value generation.

- **Fully structured document generation:** How can the framework be extended to generate fully structured, visually rich documents (e.g., passports, driving licenses) with complex background features without suffering from the fidelity loss inherent in hard-template white-out methods?

- **Cultural layout variations:** To what extent does the use of a single English-defined stochastic schema fail to capture cultural layout variations when generating documents in other languages? The current multilingual capability operates by translating headers and switching locales for fake values but doesn't adjust underlying layout probabilities.

## Limitations
- Not suitable for fully structured, visually rich documents (passports, driver's licenses) with minimal layout variation
- Generates "clean" documents without real-world noise like smudges or low-quality scans
- Doesn't account for cultural variations in document layouts across different regions

## Confidence

- **High confidence:** Core claim that FlexDoc reduces annotation effort by >90% compared to hard-template methods
- **Medium confidence:** Multilingual generation mechanism across languages beyond Spanish validation
- **Low confidence:** Exact implementation details of the Dynamic Virtual Grid Algorithm

## Next Checks

1. Implement the Dynamic Virtual Grid Algorithm based on paper description, generate 1,000 documents, and measure percentage with any text overlap or bounding box collision.

2. Systematically vary entity appearance probabilities (0.3, 0.5, 0.7, 1.0) across 10,000 generated documents, compute pairwise cosine similarity using LayoutLM embeddings, and identify probability range that maintains diversity while preserving layout coherence.

3. Train a model on English FlexDoc synthetic data only, then evaluate zero-shot performance on a third language (e.g., French or German) from the IDSEM dataset to quantify cross-lingual transfer limits beyond Spanish validation.