---
ver: rpa2
title: Unified Crew Planning and Replanning Optimization in Multi-Line Metro Systems
  Considering Workforce Heterogeneity
arxiv_id: '2509.14251'
source_url: https://arxiv.org/abs/2509.14251
tags:
- crew
- metro
- planning
- replanning
- time
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper addresses the crew planning and replanning challenges
  in multi-line metro systems by introducing a unified optimization framework that
  considers workforce heterogeneity. The core contribution is a hierarchical time-space
  network (HTSN) model that captures the entire crew action space, including cross-line
  operations at both interday and intraday scales.
---

# Unified Crew Planning and Replanning Optimization in Multi-Line Metro Systems Considering Workforce Heterogeneity

## Quick Facts
- **arXiv ID:** 2509.14251
- **Source URL:** https://arxiv.org/abs/2509.14251
- **Reference count:** 40
- **Primary result:** Hierarchical time-space network model with two-stage column generation achieves 11.21% cost reduction and 3.14% better task completion in multi-line metro crew scheduling

## Executive Summary
This paper introduces a unified optimization framework for crew planning and replanning in multi-line metro systems that explicitly accounts for workforce heterogeneity. The core innovation is a hierarchical time-space network (HTSN) model that captures the complete action space of crews across multiple days and lines, enabling efficient optimization of both initial planning and disruption response. Two computational methods are developed: a two-stage column generation approach for planning and a fast path adjustment heuristic for replanning, both leveraging the HTSN structure to achieve significant improvements in operational efficiency and resilience.

## Method Summary
The framework employs a hierarchical time-space network (HTSN) to model all possible crew actions, locations, and times as a directed graph. For planning, a two-stage column generation (TSCG) algorithm decomposes the problem into finding optimal crew paths (network flow) and assigning them to actual crew (assignment), using constrained shortest path algorithms to generate promising paths. For replanning during disruptions, a fast path adjustment heuristic (FPAH) constructs restricted subnetworks around affected areas and uses a greedy algorithm to find new paths. The model incorporates workforce heterogeneity through crew qualifications (single-line vs. dual-qualified) and preferred depots, with constraints ensuring feasible duty patterns including rest periods, meal breaks, and maximum working hours.

## Key Results
- Proposed methods achieve up to 11.21% cost reduction and 3.14% improvement in task completion compared to benchmark heuristics
- Cross-line operations via deadheading improve urgent task completion by up to 12.32% in disruption scenarios
- Computational efficiency enables solving problems with 1260 crew members and 3-day planning horizons within reasonable time
- Two-stage column generation outperforms one-step IP solvers for multi-line systems due to reduced memory requirements

## Why This Works (Mechanism)
The hierarchical time-space network provides a unified representation that captures all feasible crew actions across the entire planning horizon, enabling global optimization of cross-line operations. The two-stage decomposition in column generation makes the planning problem computationally tractable by separating path generation from crew assignment. The fast path adjustment heuristic exploits the restricted subnetwork structure during replanning to rapidly find solutions without solving the full problem, crucial for operational responsiveness during disruptions.

## Foundational Learning

- **Concept:** **Column Generation**
  - **Why needed here:** The core TSCG algorithm uses this technique to handle the immense number of possible crew duty paths (variables) without enumerating them all, making the planning problem computationally tractable.
  - **Quick check question:** Can you explain how the pricing problem (PP) uses dual variables from the master problem to identify which new duty paths (columns) should be added to improve the solution?

- **Concept:** **Time-Space Network**
  - **Why needed here:** This is the fundamental representational model (HTSN) for the problem. It maps all possible crew actions, locations, and times into a directed graph, which is the substrate for all optimization algorithms.
  - **Quick check question:** In a time-space network for crew scheduling, what do the vertices typically represent, and what do the arcs represent? How does this model capture the passage of time?

- **Concept:** **Integer Programming (IP) Formulation**
  - **Why needed here:** Both the planning (P) and replanning (RP) problems are formalized as integer programs. Understanding the objective function (minimizing cost, penalties) and constraints (labor rules, task coverage) is essential to grasp what the models are solving for.
  - **Quick check question:** What are the key components of the objective function in the crew planning problem P (equation 1)? What is the role of the binary decision variable x_γ?

## Architecture Onboarding

- **Component Map:** The framework consists of a central **Hierarchical Time-Space Network (HTSN)** model. For planning, the **Two-Stage Column Generation (TSCG)** module uses this network, decomposing the problem into a **Network Flow Optimizer** (finding paths) and an **Assignment Optimizer** (matching paths to crew). For replanning, the **Restricted Subnetwork Constructor** modifies the HTSN, and the **Fast Path Adjustment Heuristic (FPAH)** module finds new paths. Both modules consume timetable and crew data as inputs.

- **Critical Path:** The most critical path for achieving the main outcome (cost-effective planning and rapid replanning) is the design and construction of the HTSN. Its hierarchical structure directly enables the creation of restricted subnetworks, which is the linchpin for the FPAH's speed and the TSCG's tractability.

- **Design Tradeoffs:**
    - **Optimality vs. Speed (Planning):** The TSCG method trades some optimality for computational tractability by decomposing the problem into two stages and using a restricted set of columns.
    - **Optimality vs. Speed (Replanning):** The FPAH method trades global optimality for speed by using a greedy, sequential heuristic instead of re-solving the full integer program.
    - **Model Fidelity vs. Complexity:** The HTSN model must balance detailed representation of crew actions (fidelity) against network size and computational complexity.

- **Failure Signatures:**
    - **HTSN Construction Failure:** If operational rules cannot be mapped to network arcs/constraints, the generated plans will be infeasible. This would manifest as generated paths violating rules (e.g., insufficient rest).
    - **TSCG Non-convergence:** If the pricing problem (PP) cannot find paths with negative reduced cost, column generation will stall, potentially leaving tasks uncovered.
    - **FPAH Greedy Failure:** In a complex disruption, the greedy FPAH might make poor early assignments, leading to a failure to cover urgent tasks or a significant cost increase compared to a global optimum.

- **First 3 Experiments:**
    1.  **HTSN Path Validity Test:** Verify that the network correctly encodes all constraints. Randomly sample a set of feasible crew paths from the network and programmatically check if they satisfy all defined operational rules (e.g., rest, meal breaks, sign-in/out).
    2.  **TSCG Component Test on Small Instance:** Run the TSCG algorithm on a very small subset of the data (e.g., 2 lines, 1 day, 5 crew). Manually inspect the output of the first stage (selected paths) and the second stage (crew assignment) to confirm the decomposition logic is working as intended.
    3.  **FPAH Stress Test (Ablation):** Replicate the ablation study from the paper. Run the FPAH on a disruption scenario, then re-run it with intraday cross-line deadheading disabled (FPAH-N). Compare the "urgent task completion rate" (`Cvg_u`) to confirm the performance gain attributed to cross-line operations.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: How can the framework incorporate more diverse crew attributes beyond simple qualifications and depot preferences to better model workforce heterogeneity?
- Basis in paper: [explicit] The author states in the Conclusion that "the current model simplifies workforce heterogeneity... Diverse crew attributes can be incorporated for a more realistic representation."
- Why unresolved: The current mathematical formulation restricts heterogeneity to line qualifications and preferred depots, omitting other factors like seniority, fatigue, or varying contract types.
- What evidence would resolve it: An extended model formulation including additional constraints or objective terms for diverse attributes, validated by simulations showing maintained efficiency.

### Open Question 2
- Question: Can the hierarchical time-space network be integrated with cross-line strategies like express train scheduling and dynamic timetabling?
- Basis in paper: [explicit] The Conclusion suggests that future work should explore "cross-line strategies across different metro operational stages... such as express train scheduling and timetabling."
- Why unresolved: The current study treats the train timetable as a fixed input and does not optimize train operations (scheduling/routing) concurrently with crew planning.
- What evidence would resolve it: A unified model that simultaneously optimizes train timetables and crew rosters, demonstrating improved global optimality over the sequential approach.

### Open Question 3
- Question: How does the computational tractability of the exact one-step approach compare to the Two-Stage Column Generation (TSCG) as network complexity increases beyond five lines?
- Basis in paper: [inferred] The Optimality Analysis notes that for five lines, the one-step Gurobi solver failed because "computational RAM required exceeds the capacity," whereas TSCG succeeded.
- Why unresolved: It is unclear if TSCG will also face intractability issues with significantly larger networks (e.g., city-wide systems with >10 lines) or if the optimality gap remains acceptable at that scale.
- What evidence would resolve it: Performance benchmarks of TSCG on larger, full-network datasets (e.g., >10 lines) comparing solution time and quality against the current 3-5 line baselines.

## Limitations

- Computational tractability claims are based on experiments with n_r ≤ 1260; performance on systems with significantly larger crew sizes remains unverified
- Model relies on unpublished algorithmic details (pulse algorithm pruning, initial path construction) that are critical for faithful reproduction
- Framework treats train timetable as fixed input rather than optimizing train operations concurrently with crew planning

## Confidence

- **Methodological soundness:** High - Strong theoretical foundations and validation on real-world data
- **Computational efficiency claims:** Medium - Based on experiments with limited crew sizes, scalability unknown
- **Generalizability to larger systems:** Medium - Performance on networks beyond 5 lines unverified
- **Workforce heterogeneity benefits:** Medium - Experiments use fixed qualification ratios, real-world diversity may vary

## Next Checks

1. **Pulse Algorithm Implementation Test:** Implement and test the pulse algorithm for constrained shortest paths using small, verifiable examples to ensure correct handling of sign-in limits, deadhead constraints, and meal requirements.

2. **Scalability Stress Test:** Run the full planning pipeline (HTSN construction + TSCG) on synthetic datasets with increasing crew sizes (n_r up to 5000) to empirically verify the claimed computational efficiency.

3. **Disruption Scenario Ablation:** Create a more severe, multi-line disruption scenario than the paper's examples. Compare FPAH performance against a benchmark that uses a simplified network without cross-line deadheading to isolate the benefit of the proposed cross-line operations.