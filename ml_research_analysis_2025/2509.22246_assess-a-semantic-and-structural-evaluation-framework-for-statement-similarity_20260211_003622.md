---
ver: rpa2
title: 'ASSESS: A Semantic and Structural Evaluation Framework for Statement Similarity'
arxiv_id: '2509.22246'
source_url: https://arxiv.org/abs/2509.22246
tags:
- similarity
- transted
- semantic
- formal
- evaluation
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: ASSESS is a framework for evaluating the similarity between formal
  mathematical statements. It addresses the challenge of balancing semantic and structural
  information in statement evaluation, where existing metrics either ignore semantics
  (string-based) or are brittle and provide no graded score (proof-based).
---

# ASSESS: A Semantic and Structural Evaluation Framework for Statement Similarity

## Quick Facts
- arXiv ID: 2509.22246
- Source URL: https://arxiv.org/abs/2509.22246
- Reference count: 28
- Primary result: TransTED Similarity achieves 78.82% accuracy and 0.46 Kappa on EPLA-miniF2F, outperforming baselines

## Executive Summary
ASSESS addresses the challenge of evaluating similarity between formal mathematical statements by balancing semantic and structural information. The framework transforms statements into Operator Trees to capture syntactic structure, then computes similarity using TransTED Similarity, which enhances traditional Tree Edit Distance with semantic transformations. This approach outperforms existing metrics on EPLA, a new benchmark of 524 expert-annotated statement pairs, achieving state-of-the-art performance while maintaining computational efficiency.

## Method Summary
ASSESS operates in two stages: first, it parses formal Lean statements into Operator Trees (OPTs) using the Lean Language Server to capture syntactic structure; second, it computes TransTED Similarity by applying a heuristic search over curated transformation tactics to the equality goal formed by merging statement pairs. The search uses Tree Edit Distance as a heuristic to guide tactic selection, returning a graded similarity score between 0 and 1. The method is validated on EPLA, a benchmark with 524 pairs labeled for semantic provability and structural likeness.

## Key Results
- TransTED Similarity achieves 78.82% accuracy and 0.46 Kappa on EPLA-miniF2F
- Performance of 70.86% accuracy and 0.40 Kappa on EPLA-ProofNet
- Outperforms baseline metrics including BLEU and structural string metrics
- Robustness demonstrated through flat accuracy curves across threshold variations

## Why This Works (Mechanism)

### Mechanism 1
- **Claim:** Converting formal statements into Operator Trees isolates structural properties from surface-level formatting.
- **Mechanism:** The Lean Language Server parses statements into labeled, ordered trees where operators are nodes and operands are leaves, stripping redundant syntax like parentheses.
- **Core assumption:** Tree topology captures the essential shape of mathematical statements better than token sequences.
- **Evidence anchors:** Section 3.2.1 states parentheses are omitted since tree topology inherently encodes hierarchy; Abstract mentions transforming statements into Operator Trees to capture syntactic structure.
- **Break condition:** If the Lean parser fails or the statement is syntactically invalid, the OPT cannot be constructed.

### Mechanism 2
- **Claim:** Augmenting Tree Edit Distance with semantic transformations enables detection of equivalence between syntactically distinct trees.
- **Mechanism:** TransTED injects semantic awareness by allowing specific transformation operations derived from Lean tactics, constructing a unified equality goal and applying tactics to simplify it before calculating distance.
- **Core assumption:** A finite set of curated tactics is sufficient to bridge the majority of semantic gaps in autoformalization benchmarks.
- **Evidence anchors:** Section 3.3.2 describes transformation as the set of all tactics with a curated subset selected for practical efficacy; Abstract mentions enhancing TED by incorporating semantic awareness through transformations.
- **Break condition:** If the necessary transformation tactic is not in the curated list, the metric may return a high distance for semantically equivalent statements.

### Mechanism 3
- **Claim:** Heuristic search using TED as a guide makes the transformation process computationally tractable.
- **Mechanism:** The system uses a heuristic search that prioritizes tactics most likely to reduce the structural distance between trees, avoiding combinatorial explosion while finding good-enough alignment paths.
- **Core assumption:** Tactics that immediately reduce Tree Edit Distance are likely on the path to proving semantic equivalence.
- **Evidence anchors:** Section 3.3.2 states the algorithm performs heuristic search guided by TED with pruning of less promising branches; Section 4.2 notes CPU-only implementation with lower computational overhead.
- **Break condition:** If the search time limit is exceeded, the system returns the minimum distance found so far, potentially underestimating similarity.

## Foundational Learning

- **Concept: Tree Edit Distance (TED)**
  - **Why needed here:** This is the mathematical engine of the paper; understanding the baseline cost model is essential for grasping the TransTED improvement.
  - **Quick check question:** Given trees `(A (B C))` and `(A B)`, what is the edit distance? (Answer: 1, delete C).

- **Concept: Theorem Proving Tactics (Lean 4)**
  - **Why needed here:** The "transformations" are actually Lean tactics (`rw`, `apply`, `ext`); understanding what `congrArg` does is necessary to see how the system bridges semantic gaps.
  - **Quick check question:** If the goal is `f x = f y`, which tactic reduces it to `x = y`? (Answer: `congrArg` or similar congruence logic).

- **Concept: Pseudometric Space**
  - **Why needed here:** The paper defines its score as a pseudometric, formalizing why `sim(a, b) = 1` doesn't strictly mean textual identity but rather distance-zero in the metric space.
  - **Quick check question:** In a pseudometric, if distance(x, y) = 0, does x equal y? (Answer: Not necessarily, e.g., `a+b` and `b+a`).

## Architecture Onboarding

- **Component map:** Input Layer (Formal Language statement pair) -> Parser (Lean Language Server) -> Operator Tree (OPT) -> Baseline Metric (APTED algorithm) -> Semantic Engine (TransTED) -> Normalizer (scales to [0,1] similarity score)

- **Critical path:** The Transformation Search in Algorithm 1 is where the metric differentiates itself from standard string metrics. If this loop fails to find a transformation path, the score degrades to simple structural similarity.

- **Design tradeoffs:**
  - Precision vs. Recall: The finite list of tactics ensures speed but risks missing semantic equivalences requiring complex theorems (false negatives).
  - Exactness vs. Score: Proof-based methods are binary (0 or 1), while TransTED provides a graded score useful for near-misses but theoretically less rigorous than full formal proof.

- **Failure signatures:**
  - False Positives (Definitional Equality): Watch for implicit type variables matching concrete types unexpectedly.
  - Timeouts: If heuristic search gets stuck, the algorithm returns the best-found distance, which might be non-zero for equivalent statements.

- **First 3 experiments:**
  1. Unit Test (Commutativity): Input `theorem T : a + b = b + a` vs `theorem T : b + a = a + b`. Verify TED similarity is low (~0.5) but TransTED similarity is 1.0.
  2. Threshold Sweep: Run TransTED on EPLA-miniF2F and plot Accuracy vs. Threshold to verify the "robustness" claim compared to BLEU.
  3. Ablation on Tactics: Remove `congrArg` from Table 1 and measure performance drop on the benchmark to validate the contribution of semantic transformations.

## Open Questions the Paper Calls Out

### Open Question 1
- **Question:** Can the ASSESS framework and TransTED Similarity metric be effectively adapted to formal languages other than Lean 4, such as Isabelle or Coq?
- **Basis:** The paper focuses exclusively on Lean 4 for Operator Tree construction and transformation tactics, despite listing other formal languages as prominent.
- **Why unresolved:** The current implementation relies on the Lean Language Server and specific Lean tactics to define the transformation pseudometric.
- **What evidence would resolve it:** A demonstration of TransTED applied to datasets from other formal systems showing comparable accuracy.

### Open Question 2
- **Question:** How does the completeness of the curated transformation set affect the theoretical upper bound of the TransTED metric's performance?
- **Basis:** The authors use a finite list of transformations to avoid combinatorial explosion, while the theoretical framework assumes a set of transformations T.
- **Why unresolved:** It's unclear if selected tactics cover the vast majority of mathematical equivalences or if the metric hits a "glass ceiling" due to missing specific transformations.
- **What evidence would resolve it:** An ablation study adding more complex tactics or an error analysis identifying missed equivalences due to lack of tactic coverage.

### Open Question 3
- **Question:** What are the specific semantic or structural characteristics of the ~21% of cases where TransTED fails to align with human judgment?
- **Basis:** While the paper reports state-of-the-art accuracy (78.82%), this implies a significant remaining error rate where the automated metric disagrees with expert-annotated ground truth.
- **Why unresolved:** The paper highlights improvements over baselines but doesn't detail the failure modes of the proposed method.
- **What evidence would resolve it:** A qualitative review of the "False Negatives" and "False Positives" in the EPLA benchmark specific to TransTED, categorizing the root causes of divergence.

## Limitations
- The method's reliance on a finite set of transformation tactics may miss semantic equivalences requiring more complex theorem applications, potentially creating false negatives.
- The heuristic search approach provides no guarantee of finding optimal transformation paths within the time limit, meaning reported similarities may underestimate true equivalence.
- The EPLA benchmark size (524 pairs) and its derivation from specific sources may not fully represent the diversity of formal mathematical statements encountered in practice.

## Confidence

- **High Confidence:** The mechanism of using Operator Trees to capture structural information is well-established and implementation details are clearly specified.
- **Medium Confidence:** The heuristic search approach for semantic transformations is reasonable but exact parameters and their impact on results are not fully disclosed.
- **Medium Confidence:** Benchmark results are reproducible given the dataset, but generalizability to other formal systems beyond Lean 4 remains untested.

## Next Checks

1. **Ablation Study:** Remove individual tactics from Table 1 and measure performance degradation to quantify the specific contribution of each semantic transformation.
2. **Cross-Formal-System Evaluation:** Apply ASSESS to statement pairs from other formal systems (Coq, Isabelle) to test generalizability beyond Lean 4.
3. **Timeout Sensitivity Analysis:** Systematically vary the search timeout parameter and measure the correlation between timeout frequency and accuracy drops to understand the reliability of heuristic search.