---
ver: rpa2
title: Machine learning for in-situ composition mapping in a self-driving magnetron
  sputtering system
arxiv_id: '2506.05999'
source_url: https://arxiv.org/abs/2506.05999
tags:
- figure
- deposition
- composition
- learning
- materials
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This work presents a self-driving lab (SDL) for magnetron sputtering
  that rapidly generates accurate composition maps for combinatorial thin films without
  external calibration. The approach uses quartz-crystal microbalance (QCM) sensors
  to measure deposition rates and active learning with Gaussian processes (GPs) to
  model sputter flux as a function of power and pressure.
---

# Machine learning for in-situ composition mapping in a self-driving magnetron sputtering system

## Quick Facts
- arXiv ID: 2506.05999
- Source URL: https://arxiv.org/abs/2506.05999
- Reference count: 40
- Primary result: A self-driving lab for magnetron sputtering uses QCM sensors and active learning to generate accurate composition maps without external calibration.

## Executive Summary
This work presents a self-driving lab (SDL) for magnetron sputtering that rapidly generates accurate composition maps for combinatorial thin films without external calibration. The approach uses quartz-crystal microbalance (QCM) sensors to measure deposition rates and active learning with Gaussian processes (GPs) to model sputter flux as a function of power and pressure. For each source, deposition rates are learned sequentially using Bayesian optimization, then combined with a geometric flux model to predict compositions across samples. The best-performing method, BALM (Bayesian active learning MacKay), achieved accurate models with as few as 10 experiments per source. Composition predictions were validated against RBS measurements, showing RMS deviations of 1.5-2.3% and center-point errors within 0.02 atomic fraction. This framework dramatically increases throughput by eliminating the need for extensive characterization or calibration, demonstrating the potential of ML-guided SDLs to accelerate materials exploration.

## Method Summary
The framework uses QCM sensors to measure mass deposition rates from magnetron sputtering sources at different power and pressure conditions. Gaussian process regression models deposition rate surfaces using active learning with acquisition functions (NIPV, BALM, BALD). For co-sputtering, individual source models are combined using a geometric flux model (cos^n φ distribution) to predict spatial composition maps. The fully Bayesian GP with BALM acquisition achieves the best performance, learning deposition rates in ~10 experiments per source. The geometric model parameters are fitted to QCM measurements, enabling interpolation across the substrate. Composition predictions are validated against RBS measurements.

## Key Results
- BALM (Bayesian active learning MacKay) achieved the best performance, learning single-source deposition rates in just 10 experiments
- Composition predictions validated against RBS showed RMS deviations of 1.5-2.3% and center-point errors within 0.02 atomic fraction
- The geometric flux model with parameters fitted to three QCM sensors accurately predicted deposition rates across the substrate

## Why This Works (Mechanism)

### Mechanism 1
- **Claim:** Fully Bayesian Gaussian processes with entropy-based acquisition (BALM) can learn deposition rate surfaces in ~10 experiments per source.
- **Mechanism:** The BALM acquisition function maximizes reduction in predictive marginal entropy by sampling from the hyperparameter posterior via Monte Carlo. This explicitly accounts for hyperparameter uncertainty (unlike standard GPs), reducing overfitting and enabling faster convergence.
- **Core assumption:** The deposition rate surface is smooth (Matérn 5/2 kernel prior) except at the plasma extinction boundary, which can be excluded via domain restriction.
- **Evidence anchors:**
  - [abstract] "A fully Bayesian GP - BALM - achieved the best performance, learning the deposition rates for a single source in 10 experiments."
  - [section] Figure 5c shows BALM reaches ERMS ~1 in <10 queries for Cases 2/3; Figure 7 shows rapid hyperparameter convergence.
  - [corpus] Multi-stage Bayesian optimization paper (2512.15483) discusses similar decision-making acceleration in SDLs, though not specific to PVD.
- **Break condition:** If deposition rate has discontinuities within the valid operating region (not just at plasma extinction), smoothness assumption fails; acquisition functions prioritizing exploration may under-sample sharp transitions.

### Mechanism 2
- **Claim:** Three fixed QCM sensors combined with a geometric cos^n φ flux model provide accurate spatial interpolation of deposition rates across the substrate.
- **Mechanism:** QCM frequency shifts (via Sauerbrey equation) yield mass deposition rates at three positions. A geometric model with parameters (a, n) fitted to these three readings predicts flux at any (x,y) substrate coordinate using cosθ cos^n φ / (2πr²) distribution.
- **Core assumption:** The true flux distribution is well-approximated by this cos^n form with spatially invariant parameters per (power, pressure) condition.
- **Evidence anchors:**
  - [section] Section 2.2 and Figure 2 describe the geometric model; equation (2) gives the mathematical form.
  - [section] Section 3.2 validates composition predictions via RBS with RMS deviations 1.5–2.3% and center-point errors <0.02 atomic fraction.
  - [corpus] Weak corpus evidence for this specific flux model; related SDL papers focus on solution-based synthesis rather than PVD flux modeling.
- **Break condition:** Extreme n values (>~5) may indicate physically unrealistic solutions (e.g., poor sticking coefficients at high pressure), as noted in Discussion for Ba at elevated pressures.

### Mechanism 3
- **Claim:** Single-source GP models trained independently can be linearly combined to predict co-sputtering composition maps without re-training.
- **Mechanism:** For co-sputtering, the summed mass rates from individually trained source GPs predict total QCM readings. The flux model converts these to spatial distributions, enabling atomic fraction computation by converting mass to molar rates.
- **Core assumption:** No significant plasma-plasma interactions or resputtering between co-sputtered species; source contributions are additive.
- **Evidence anchors:**
  - [section] Section 3.2 states "sum of predicted deposition rates will be equal to the actual measured rates" for Cu-Sn; Figure S2/S3 (supplement) show linear additivity for most source pairs.
  - [section] Discussion notes Ba-Sn adjacent sources showed deviations due to plasma interactions detectable via voltage changes.
  - [corpus] No corpus papers address co-sputtering additivity; this appears novel to PVD-based SDLs.
- **Break condition:** Adjacent sources with interacting plasmas, or elements with high vapor pressures (e.g., Zn) causing differential sticking between substrate and QCM.

## Foundational Learning

- **Concept: Gaussian Process Regression**
  - Why needed here: Core surrogate model encoding beliefs about smoothness and uncertainty; enables Bayesian optimization.
  - Quick check question: Can you explain why a GP posterior mean at an unobserved point is a weighted combination of observed outputs, with weights determined by the kernel?

- **Concept: Acquisition Functions for Active Learning**
  - Why needed here: Drives experiment selection; BALM outperforms random by 2× in enhancement factor.
  - Quick check question: How does BALM's entropy criterion differ from NIPV's variance minimization in terms of what uncertainty is being reduced?

- **Concept: Physical Vapor Deposition Flux Distributions**
  - Why needed here: The geometric model bridges QCM point measurements to substrate-wide predictions.
  - Quick check question: Why does the cos^n φ model capture the transition from broad to directed emission as n increases?

## Architecture Onboarding

- **Component map:**
  [Magnetron Sources] → [QCM Sensors (×3)] → [Sauerbrey Conversion] → [GP Models (per source)]
                                                                              ↓
  [Substrate] ← [Flux Model (a,n fitting)] ← [Deposition Rate Predictions] ←┘
       ↓
  [Composition Map] → [RBS Validation]

- **Critical path:**
  1. Define minimum pressure cutoff (e.g., 4 mTorr) to exclude plasma extinction region.
  2. Initialize GP with 5 points (4 corners + center in power-pressure space).
  3. Run 10–30 active learning iterations per source using BALM (or NIPV for computational speed).
  4. Validate additivity assumption with co-sputtering test before production runs.

- **Design tradeoffs:**
  - BALM vs. NIPV: BALM achieves ~2× better sample efficiency but requires minutes of compute vs. seconds for NIPV.
  - Case 2 vs. Case 3 initialization: Case 3 (pre-defined corners) is more robust but requires domain knowledge; Case 2 with Sobol sampling is more general.
  - Fixed vs. dynamic experiment budget: Current implementation uses 30 iterations; a variance-based stopping criterion could reduce unnecessary experiments.

- **Failure signatures:**
  - GP predicts negative deposition rates → under-specified initial points; add more queries.
  - High n values (>5) in flux model → check for sticking coefficient issues or pressure-dependent anomalies.
  - Co-sputtering predicted vs. measured QCM rates diverge → plasma-plasma interactions; avoid adjacent sources or add correction term.

- **First 3 experiments:**
  1. Run single-source characterization on one target (e.g., Cu) with Case 3 initialization and BALM acquisition for 10 iterations; verify GP surface is smooth and positive.
  2. Repeat for second target (e.g., Sn); confirm similar convergence behavior.
  3. Perform co-sputtering test at 3 diverse (power, pressure) conditions; compare predicted vs. measured QCM rates to validate additivity assumption before RBS validation.

## Open Questions the Paper Calls Out

### Open Question 1
- Question: Can the framework be adapted for reactive sputtering to distinguish between metal flux and reactive gas incorporation?
- Basis in paper: [explicit] The authors state that "Extending the approach to reactive sputtering is another future challenge, as the mass deposition rate detected at the QCMs includes a contribution from the gas-phase element, which cannot be distinguished in-situ without additional methods."
- Why unresolved: Current QCM sensors measure total mass accumulation but lack the chemical specificity to differentiate between the deposited metal and the reactive gas species.
- What evidence would resolve it: Demonstrating a system that integrates a complementary in-situ technique (e.g., optical emission spectroscopy) to decouple gas and metal contributions.

### Open Question 2
- Question: Does the linear additivity of source models hold for materials with high vapor pressures or poor sticking coefficients, such as Zn?
- Basis in paper: [inferred] The authors identify "elements with poor sticking coefficients (high vapour pressures), e.g. Zn" as a "likely source of problems" where adhesion may differ between the QCM and the substrate.
- Why unresolved: The model assumes the deposition rate measured at the QCM directly predicts the substrate rate, an assumption that may fail if sticking coefficients vary significantly with substrate temperature or co-sputtering interactions.
- What evidence would resolve it: Validation of composition predictions via RBS for combinatorial samples containing high vapor pressure elements like Zn or Ba.

### Open Question 3
- Question: Can multi-objective Gaussian processes further improve the efficiency of learning deposition rates compared to the single-objective BALM method?
- Basis in paper: [explicit] The authors note that "this could be extended to multi-objective GPs... to further improve the efficiency and accuracy of the predictions."
- Why unresolved: The current study restricted its evaluation to single-objective GPs with various acquisition functions.
- What evidence would resolve it: A comparative benchmark showing that multi-objective models require fewer experiments to reach the same RMS error as the established baseline.

## Limitations

- BALM's superior sample efficiency requires minutes of compute per iteration versus seconds for NIPV, creating a scalability trade-off for multiple sources
- The co-sputtering additivity assumption may fail for adjacent sources with interacting plasmas, limiting generality across material systems
- The geometric flux model's accuracy at extreme parameter values (n > 5) and different geometries remains uncertain

## Confidence

- **High confidence**: BALM's superior sample efficiency (~10 experiments per source) and composition validation accuracy (RMS deviations 1.5–2.3%, center-point errors ≤0.02 atomic fraction) are well-supported by experimental data
- **Medium confidence**: The geometric flux model's ability to interpolate between three QCM sensors is validated for the tested materials, but its performance for extreme parameter values and different geometries remains uncertain
- **Medium confidence**: The co-sputtering additivity assumption works for well-separated sources but requires careful validation for each material combination, particularly when plasma interactions are possible

## Next Checks

1. **Test co-sputtering additivity**: Systematically vary source separation distances and measure QCM rates to quantify plasma interaction effects; develop correction factors for adjacent sources
2. **Validate flux model limits**: Test the geometric model's accuracy at extreme n values (>5) and different substrate geometries to identify parameter regimes where the cos^n φ approximation breaks down
3. **Benchmark computational efficiency**: Compare BALM vs NIPV performance across different materials and substrate sizes to establish practical limits on the number of sources before computational cost becomes prohibitive