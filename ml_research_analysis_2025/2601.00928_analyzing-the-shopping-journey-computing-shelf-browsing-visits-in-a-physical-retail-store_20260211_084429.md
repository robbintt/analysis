---
ver: rpa2
title: 'Analyzing the Shopping Journey: Computing Shelf Browsing Visits in a Physical
  Retail Store'
arxiv_id: '2601.00928'
source_url: https://arxiv.org/abs/2601.00928
tags:
- shelf
- store
- trajectories
- browsing
- retail
- transformers
- self-attention
- retrieval-augmented-generation
- instruction-tuning
- parameter-efficient-finetuning
- mixture-of-experts
- chain-of-thought
core_contribution: This paper presents a method to detect and analyze customer shelf
  browsing behavior in physical retail stores using machine vision-based 3D tracking.
  The authors developed a heuristic algorithm that identifies when customers stop
  in front of shelves based on trajectory data, calibrated using human-labeled browsing
  activity.
---

# Analyzing the Shopping Journey: Computing Shelf Browsing Visits in a Physical Retail Store

## Quick Facts
- arXiv ID: 2601.00928
- Source URL: https://arxiv.org/abs/2601.00928
- Reference count: 22
- Key outcome: A heuristic algorithm detects customer shelf browsing in physical stores using trajectory and orientation data, achieving F1 scores of 0.86–0.89 in two convenience stores.

## Executive Summary
This paper introduces a method to autonomously detect customer shelf browsing behavior in physical retail stores using machine vision-based 3D tracking and 2D trajectory data. By developing a heuristic algorithm that combines position, velocity, and body orientation, the authors identify when customers stop in front of shelves and generate labeled browsing events. The method is calibrated on human-labeled data and validated both within and across stores, demonstrating generalizability. The approach addresses a gap in retail analytics, enabling large-scale analysis of browsing patterns and their relationship to purchases.

## Method Summary
The authors propose a heuristic algorithm to detect shelf browsing visits by analyzing 2D customer trajectories and body orientation data. At each timestep, a ray is cast along the customer's body orientation to identify the nearest shelf face. A browsing event is detected if the same shelf candidate is observed for a continuous period (≥ T_B), the customer is within a maximum distance (≤ Δ_B), and their velocity is below a threshold (≤ v_B). The algorithm is calibrated using grid search to maximize F1 score on human-labeled browsing events. Evaluation is performed both within and across stores, and the method is applied to large trajectory datasets to analyze browsing behavior.

## Key Results
- The heuristic algorithm achieves F1 scores of 0.86–0.89 during calibration and maintains 0.84–0.87 in cross-store evaluation.
- Average shelf visits per shopping trip: 2.5–2.8.
- Browsing patterns correlate with purchases in preliminary analysis (Store 1 only).

## Why This Works (Mechanism)
The method leverages spatial and temporal coherence in customer movement: browsing is characterized by sustained proximity to a shelf, low velocity, and body orientation aligned with the shelf face. By combining ray-casting with continuous-interval detection, the algorithm robustly distinguishes browsing from passing-by or other in-store movements.

## Foundational Learning
- **Ray-casting along body orientation**: Projects a vector from customer position in the direction they face to find the nearest shelf; needed to link customer position to specific shelf faces.
- **Velocity computation via finite differences**: Estimates speed from position changes over time; needed to identify low-speed browsing periods.
- **Grid search for parameter calibration**: Systematically searches parameter space (T_B, Δ_B, v_B) to optimize F1 score on labeled data; needed to tune detection thresholds for each store.
- **Continuous-interval detection**: Requires sustained conditions (shelf candidate, distance, velocity) over time; needed to filter out transient proximity or orientation changes.
- **Cross-store generalization**: Tests algorithm performance on data from a store not used for calibration; needed to assess robustness to different store layouts.
- **Human-labeled ground truth**: Provides manual annotation of browsing events for training and validation; needed to benchmark detection accuracy.

## Architecture Onboarding
**Component map:** Trajectory data (x_i(t_k), θ_i(t_k)) -> Preprocess (filter, velocity) -> Ray-cast to shelf face -> Continuous-interval detection (T_B, Δ_B, v_B) -> Browsing label -> F1 evaluation

**Critical path:** Raw tracking data → Preprocessed trajectory → Ray-shelf intersection → Stop detection → Browsing label → Evaluation

**Design tradeoffs:** Heuristic simplicity (easy to implement, fast) vs. accuracy (may miss nuanced behaviors). Fixed thresholds vs. adaptability to diverse store layouts. Ray-casting vs. more complex spatial modeling (e.g., occupancy grids).

**Failure signatures:** Rapid shelf candidate switching (orientation noise), false negatives due to velocity spikes (unfiltered position noise), cross-store performance drop (geometry mismatch).

**First 3 experiments:**
1. Apply algorithm to simulated trajectories with known browsing events to verify detection accuracy.
2. Test sensitivity of detection to velocity threshold (v_B) and proximity radius (Δ_B).
3. Evaluate cross-store performance on a third, unseen store layout.

## Open Questions the Paper Calls Out
**Open Question 1**
- Question: Can incorporating gaze and head orientation analysis enable product-level (rather than shelf-level) attention detection during browsing?
- Basis in paper: [explicit] Authors state in Future Works: "more targeted understanding of which products the shopper focused on during shelf browsing through analysis of gaze and head orientation"
- Why unresolved: Current algorithm uses only centroid position, body orientation, and velocity—not fine-grained head pose or gaze direction
- What evidence would resolve it: Comparative evaluation showing improved prediction of specific product interactions when gaze features are added to the model

**Open Question 2**
- Question: Can machine learning approaches outperform the heuristic 3-parameter algorithm in shelf visit detection accuracy?
- Basis in paper: [explicit] Authors list "introduction of machine learning and other techniques to increase accuracy of browsing detection" as a future extension
- Why unresolved: The current heuristic uses only threshold parameters (T_B, Δ_B, v_B); no learning-based approaches have been tested
- What evidence would resolve it: Head-to-head comparison on held-out trajectories showing statistically significant F1 improvement from ML-based detection

**Open Question 3**
- Question: Does the calibrated algorithm generalize to retail formats beyond convenience stores (e.g., supermarkets, department stores)?
- Basis in paper: [inferred] Authors claim "the same approach applies to other formats" but validate only on two convenience stores with different geometries
- Why unresolved: Store layouts vary substantially in aisle width, shelf height, and traffic patterns; parameter values may be format-specific
- What evidence would resolve it: Cross-format evaluation demonstrating F1 ≥ 0.84 on larger retail environments without full recalibration

**Open Question 4**
- Question: How robust is the visit-to-purchase conversion relationship identified in Store 1 when analyzed across multiple stores with different layouts?
- Basis in paper: [inferred] Purchase correlation analysis used only 473 trajectories from one store; authors call this a "very preliminary analysis"
- Why unresolved: No comparative data exists to determine whether conversion patterns are store-specific or generalizable
- What evidence would resolve it: Multi-store purchase-linked trajectory analysis showing consistent conversion rate patterns or identifying layout-dependent variations

## Limitations
- Ground truth labels are based on a small, manual annotation process with potential inter-rater variability.
- Generalization tested only on two convenience stores; performance on larger or more complex formats is unknown.
- Method assumes fixed 10 Hz sampling and simple preprocessing, which may not handle noisy real-world tracking systems.

## Confidence
- Detection performance (F1 ~0.86–0.89): **High**
- Cross-store generalization: **Medium**
- Robustness to varied store layouts and real-world noise: **Low**
- Representativeness of browsing behavior via velocity/orientation: **Medium**

## Next Checks
1. Test the algorithm on a larger set of stores with different geometries, including aisles with obstacles or dynamic product displays.
2. Conduct a sensitivity analysis on the effect of orientation noise and low-pass filter parameters on stop detection accuracy.
3. Evaluate whether the browsing definition captures actual customer engagement by correlating detected browsing events with explicit interaction behaviors (e.g., product pick-up or mobile app usage).